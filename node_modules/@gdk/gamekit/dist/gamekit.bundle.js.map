{"version":3,"sources":["webpack://@gdk/gamekit/webpack/bootstrap","webpack://@gdk/gamekit/./src/com/popin/style.less","webpack://@gdk/gamekit//builds/gdk/framework/node_modules/css-loader/lib/css-base.js","webpack://@gdk/gamekit//builds/gdk/framework/node_modules/style-loader/lib/addStyles.js","webpack://@gdk/gamekit//builds/gdk/framework/node_modules/style-loader/lib/urls.js","webpack://@gdk/gamekit/(webpack)/buildin/global.js","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/adaptativeVisualIdentity/adaptativeVisualIdentity.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/adaptativeVisualIdentity/events.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/adaptativeVisualIdentity/identities/danskeSpil/components/time.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/adaptativeVisualIdentity/identities/danskeSpil/views/bottomBar.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/adaptativeVisualIdentity/identities/fgs/components/messagePopin.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/adaptativeVisualIdentity/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/com/com.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/com/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/com/messageManager/definitions.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/com/messageManager/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/com/messageManager/messageManager.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/com/popin/definitions.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/com/popin/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/com/popin/popin.ts","webpack://@gdk/gamekit/./src/com/popin/style.less?0ec4","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/paginatedPopin.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/popin.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/popinsContainer.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/replayPopin.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/shineableButton.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/twoButtonsPopin.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/viButtons.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/ds/winLosePopin.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/abstractGame.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/action/action.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/action/model.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/action/session.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/carousel.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/express/express.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/express/ticket.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/gameEvents.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/inactivity.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/multipass/multipass.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/multipass/notifications.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/multipass/session.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/notifier/notifier.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/tweenUtils.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/crossSell/crossSell.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/game/timer.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/home/home.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/amountCoinWizzStage.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/amountCurrencyWizzStage.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/amountResultStage.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/resultBox.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/resultStage.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/scratchStage.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/spineStage.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/result/textResultStage.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/rules/agreement.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/rules/baseSlide.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/rules/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/rules/rules.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/rules/slide.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/ui/rules/textSlide.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/game/wizz/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/loading/extensions/behaviorCode.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/loading/index.ts","webpack://@gdk/gamekit/src/builds/gdk/framework/modules/gamekit/src/loading/projectLoader.ts","webpack://@gdk/gamekit/external \"falcon\"","webpack://@gdk/gamekit/external \"@gdk/core\"","webpack://@gdk/gamekit/external \"@gdk/core-pixi\"","webpack://@gdk/gamekit/external \"gsap\"","webpack://@gdk/gamekit/external \"howler\"","webpack://@gdk/gamekit/external \"i18next\"","webpack://@gdk/gamekit/external \"pixi.js\""],"names":[],"mappings":";;;QAAA;QACA;QACA;QACA;;;QAGA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;;;QAGA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;;;QAIA;QACA;QACA,iDAAiD,kLAAkL;QACnO;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;;;QAGA;;QAEA;QACA,iCAAiC;;QAEjC;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,MAAM;QACN;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,wBAAwB,kCAAkC;QAC1D,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,0CAA0C,oBAAoB,WAAW;;QAEzE;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;;;;;;;;;;;;ACrMA,2BAA2B,mBAAO,CAAC,6GAAwD;AAC3F;;;AAGA;AACA,cAAc,QAAS,0BAA0B,oBAAoB,YAAY,WAAW,aAAa,cAAc,oBAAoB,eAAe,oBAAoB,+BAA+B,4CAA4C,iCAAiC,GAAG,sDAAsD,yCAAyC,GAAG,8BAA8B,eAAe,GAAG,6CAA6C,gDAAgD,sDAAsD,KAAK,GAAG,8CAA8C,+CAA+C,sDAAsD,KAAK,GAAG,oCAAoC,iCAAiC,8CAA8C,wBAAwB,iBAAiB,2BAA2B,uBAAuB,0BAA0B,cAAc,oBAAoB,aAAa,gBAAgB,qBAAqB,qBAAqB,6CAA6C,yCAAyC,qCAAqC,sBAAsB,GAAG,0CAA0C,sBAAsB,GAAG,qDAAqD,uBAAuB,gBAAgB,cAAc,eAAe,gBAAgB,eAAe,GAAG,2DAA2D,iBAAiB,GAAG,sHAAsH,uBAAuB,eAAe,mBAAmB,iBAAiB,eAAe,8BAA8B,GAAG,4DAA4D,6BAA6B,GAAG,2DAA2D,8BAA8B,GAAG,qDAAqD,sBAAsB,mBAAmB,mBAAmB,GAAG,oDAAoD,qBAAqB,GAAG,uDAAuD,iBAAiB,qBAAqB,eAAe,GAAG,iFAAiF,oBAAoB,0BAA0B,GAAG,mGAAmG,qBAAqB,iBAAiB,wBAAwB,oBAAoB,qBAAqB,yBAAyB,sBAAsB,8BAA8B,sBAAsB,wBAAwB,wBAAwB,iBAAiB,GAAG,0TAA0T,iBAAiB,GAAG,gDAAgD,oBAAoB,WAAW,cAAc,YAAY,aAAa,GAAG;;AAExoG;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,2DAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;AC1XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;;;;;ACxFA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;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","file":"gamekit.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"bundle\": 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"gamekit.\" + ({\"ds\":\"ds\",\"fdj\":\"fdj\",\"fdj_wizz\":\"fdj_wizz\",\"fgs\":\"fgs\",\"fgs_ds\":\"fgs_ds\",\"fgs_ees\":\"fgs_ees\",\"fgs_nt\":\"fgs_nt\",\"fgs_szk\":\"fgs_szk\",\"lor\":\"lor\",\"nt\":\"nt\",\"svs\":\"svs\",\"vks\":\"vks\"}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp_gdk_gamekit\"] = window[\"webpackJsonp_gdk_gamekit\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".gdk-popin-background {\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  cursor: default;\\n  opacity: 0;\\n  z-index: 999999;\\n  transition-duration: 0.15s;\\n  transition-timing-function: ease-in-out;\\n  transition-property: opacity;\\n}\\n.gdk-popin-background.gdk-popin-background-overlay {\\n  background-color: rgba(0, 0, 0, 0.6);\\n}\\n.gdk-popin-background.show {\\n  opacity: 1;\\n}\\n@media screen and (orientation: portrait) {\\n  .gdk-popin-background .gdk-popin.landscape {\\n    transform: translate(-50%, -50%) rotate(-90deg);\\n  }\\n}\\n@media screen and (orientation: landscape) {\\n  .gdk-popin-background .gdk-popin.portrait {\\n    transform: translate(-50%, -50%) rotate(-90deg);\\n  }\\n}\\n.gdk-popin-background .gdk-popin {\\n  background-color: whitesmoke;\\n  box-shadow: 0 0 5px rgba(51, 51, 51, 0.5);\\n  border-radius: 15px;\\n  color: black;\\n  font-family: Helvetica;\\n  text-align: center;\\n  display: inline-block;\\n  left: 50%;\\n  position: fixed;\\n  top: 50%;\\n  z-index: 10;\\n  min-width: 230px;\\n  max-width: 450px;\\n  -webkit-transform: translate(-50%, -50%);\\n  -ms-transform: translate(-50%, -50%);\\n  transform: translate(-50%, -50%);\\n  padding: 3px 15px;\\n}\\n.gdk-popin-background .gdk-popin > div {\\n  padding: 5px 20px;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-close {\\n  position: absolute;\\n  right: 12px;\\n  top: 10px;\\n  width: 8px;\\n  height: 8px;\\n  opacity: 1;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-close:hover {\\n  opacity: 0.6;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-close:before,\\n.gdk-popin-background .gdk-popin .gdk-popin-close:after {\\n  position: absolute;\\n  right: 3px;\\n  content: \\\" \\\";\\n  height: 14px;\\n  width: 3px;\\n  background-color: #1187c7;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-close:before {\\n  transform: rotate(45deg);\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-close:after {\\n  transform: rotate(-45deg);\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-title {\\n  font-weight: bold;\\n  font-size: 1em;\\n  color: #ec0b5e;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-text {\\n  font-size: 0.9em;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-buttons {\\n  font-size: 0;\\n  margin-top: 15px;\\n  padding: 0;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-buttons .gdk-popin-button-wrapper {\\n  font-size: 1rem;\\n  display: inline-block;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-buttons .gdk-popin-button-wrapper .gdk-popin-button {\\n  line-height: 1em;\\n  padding: 8px;\\n  margin: 0 16px 10px;\\n  cursor: pointer;\\n  font-size: 0.8em;\\n  font-family: inherit;\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  user-select: none;\\n  border-radius: 15px;\\n  background: #1187c7;\\n  color: white;\\n}\\n.gdk-popin-background .gdk-popin .gdk-popin-buttons .gdk-popin-button-wrapper .gdk-popin-button:hover,\\n.gdk-popin-background .gdk-popin .gdk-popin-buttons .gdk-popin-button-wrapper .gdk-popin-button:active,\\n.gdk-popin-background .gdk-popin .gdk-popin-buttons .gdk-popin-button-wrapper .gdk-popin-button:focus {\\n  opacity: 0.8;\\n}\\n.gdk-popin-background .gdk-popin-click-layer {\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { utils, ticker, Graphics, Rectangle } from \"pixi.js\";\nimport i18n from \"i18next\";\nimport { GameCore, Loader, State, Tools, HowlerLoader } from \"@gdk/core\";\nimport {\n\tFontLoader,\n\tResize,\n\tStateImporter,\n\tContainerImporter,\n\tScratchSolver,\n\tAssetStore,\n} from \"@gdk/core-pixi\";\nimport type { LoadedView, ContainerView, IProject } from \"@gdk/core-pixi\";\nimport type { Sprite } from \"pixi.js\";\n\nimport { ProjectLoader } from \"../loading\";\nimport { EVisualIdentityAction, EVisualIdentityEvent } from \"./events\";\nimport type { AbstractGame } from \"../game/abstractGame\";\nimport type {\n\tIIdentity,\n\tIAdaptativeLoadingView,\n\tIAdaptativeIntroductionView,\n\tIAdaptativeInGameView,\n\tIAdaptativeLockedView,\n} from \"./identity\";\n\ndeclare var __webpack_public_path__: string;\n\n/**\n * Optionnal boolean parameters used by the adaptative visual identity.\n */\nexport interface IAdaptativeIdentityParameters {\n\trulesEnabled?: boolean;\n\tsoundButtonEnabled?: boolean;\n\tskipIntroduction?: boolean;\n\tbackgroundRulesClickable?: boolean;\n\t[key: string]: any;\n}\n\nexport interface IAdaptativeIdentityConfig {\n\t/**\n\t * The lottery id to load identity\n\t */\n\tlottery: string;\n\t/**\n\t * The theme of the lottery identity\n\t */\n\ttheme: string;\n\t/**\n\t * Parameters feeded to the identity\n\t */\n\tparameters?: IAdaptativeIdentityParameters;\n}\n\nexport class AdaptativeVisualIdentity extends GameCore {\n\t/**\n\t * Defines the main emitter listened by the views\n\t */\n\tpublic emitter: utils.EventEmitter = new utils.EventEmitter();\n\t/**\n\t * Defines the background used as an overlay when player shows the settings.\n\t * Anyway it can be used for other needs. The background is added into the stage\n\t * and has a Cover resize method.\n\t */\n\tpublic background: Sprite | Graphics = null;\n\t/**\n\t * Defines the loading view instance created after importing the lottery identity\n\t */\n\tpublic loadingView: (LoadedView | ContainerView) & IAdaptativeLoadingView = null;\n\t/**\n\t * Defines the introduction view instance created after importing the lottery identity\n\t */\n\tpublic introductionView: (LoadedView | ContainerView) & IAdaptativeIntroductionView = null;\n\t/**\n\t * Defines the in-game view instance created after importing the lottery identity\n\t */\n\tpublic inGameView: (LoadedView | ContainerView) & IAdaptativeInGameView = null;\n\t/**\n\t * Defines the lock view instance created after importing the lottery identity\n\t */\n\tpublic lockView: (LoadedView | ContainerView) & IAdaptativeLockedView = null;\n\t/**\n\t * Defines the skin of the overall loaded identity\n\t */\n\tpublic skin: any;\n\n\t/**\n\t * Called once the VI has been initialized\n\t */\n\tpublic onInitialized: () => void;\n\t/**\n\t * For backward compatibility, keep show rules callback\n\t * @deprecated\n\t */\n\tpublic onShowRules: () => void;\n\t/**\n\t * For backward compatibility, keep show main rules callback\n\t * @deprecated\n\t */\n\tpublic onShowMainRules: () => void;\n\n\t/**\n\t * Reference of the game using the Adaptative Visual Identity\n\t */\n\tpublic game: AbstractGame;\n\n\t/**\n\t * Reference of the parameters used by the Adaptative Visual Identity\n\t */\n\tpublic parameters: IAdaptativeIdentityParameters;\n\n\tprivate _config: IAdaptativeIdentityConfig;\n\tprivate _files: any = {};\n\n\t// false if sound was disabled from VI\n\tprotected _soundEnabled: boolean = true;\n\n\t/**\n\t * Constructor\n\t * @param game the game reference containing the VI\n\t */\n\tpublic constructor(game: AbstractGame, config: IAdaptativeIdentityConfig) {\n\t\t// Game Core\n\t\tsuper(null, null, false);\n\n\t\t// Misc.\n\t\tthis.game = game;\n\t\tthis._config = config;\n\t\tthis.parameters = this._config.parameters || {};\n\n\t\tticker.shared.autoStart = false;\n\n\t\t// Register needed loaders\n\t\tLoader.register(new FontLoader());\n\n\t\t// Background\n\t\tthis.background = new Graphics();\n\t\tthis.background.resize = new Resize(Resize.cover);\n\t\tthis.background.interactive = true;\n\n\t\t// Events\n\t\tthis._bindEvents();\n\t}\n\n\t/**\n\t * Loads the given lottery identity exposing the required views\n\t * @param lottery the lottery identifier to know what identity to load\n\t */\n\tpublic async getIdentity(lottery: string): Promise<IIdentity> {\n\t\t__webpack_public_path__ = `${this.game.gameConfig.frameworkPath || \".\"}${Tools.getFolder(\n\t\t\tthis.game.gameConfig.modules.paths[\"@gdk/gamekit\"]\n\t\t)}/`;\n\n\t\tswitch (lottery) {\n\t\t\tcase \"fdj\":\n\t\t\t\treturn await import(/* webpackChunkName: \"fdj\" */ \"./identities/fdj\");\n\t\t\tcase \"fdj_wizz\":\n\t\t\t\tthis.background.visible = false;\n\t\t\t\treturn await import(/* webpackChunkName: \"fdj_wizz\" */ \"./identities/fdj_wizz\");\n\t\t\tcase \"ds\":\n\t\t\t\treturn await import(/* webpackChunkName: \"ds\" */ \"./identities/danskeSpil\");\n\t\t\tcase \"nt\":\n\t\t\t\treturn await import(/* webpackChunkName: \"nt\" */ \"./identities/norskTipping\");\n\t\t\tcase \"svs\":\n\t\t\t\treturn await import(/* webpackChunkName: \"svs\" */ \"./identities/svenskaSpel\");\n\t\t\tcase \"lor\":\n\t\t\t\treturn await import(/* webpackChunkName: \"lor\" */ \"./identities/lor\");\n\t\t\tcase \"fgs\":\n\t\t\t\treturn await import(/* webpackChunkName: \"fgs\" */ \"./identities/fgs\");\n\t\t\tcase \"fgs_nt\":\n\t\t\t\treturn await import(/* webpackChunkName: \"fgs_nt\" */ \"./identities/fgs_nt\");\n\t\t\tcase \"fgs_ds\":\n\t\t\t\treturn await import(/* webpackChunkName: \"fgs_ds\" */ \"./identities/fgs_ds\");\n\t\t\tcase \"fgs_szk\":\n\t\t\t\treturn await import(/* webpackChunkName: \"fgs_szk\" */ \"./identities/fgs_szk\");\n\t\t\tcase \"fgs_ees\":\n\t\t\t\treturn await import(/* webpackChunkName: \"fgs_ees\" */ \"./identities/fgs_ees\");\n\t\t\tcase \"vks\":\n\t\t\t\treturn await import(/* webpackChunkName: \"vks\" */ \"./identities/veikkaus\");\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Inits the VI by loading the assets and creating the state\n\t */\n\tpublic async init(done?: () => void): Promise<void> {\n\t\t// Load theme files\n\t\tawait this.loader.configureFromTheme(\n\t\t\t\"vi\",\n\t\t\tthis.game.settings.language,\n\t\t\t`${this._config.lottery}/${this._config.theme}/`\n\t\t);\n\t\tawait this.loader.load();\n\n\t\t// i18n\n\t\tconst locales = this.loader.get(\"vi-i18n-base\");\n\t\tif (locales) {\n\t\t\ti18n.addResourceBundle(this.game.settings.language, \"game\", locales, true, true);\n\t\t}\n\n\t\tconst overridenLocales = this.loader.get(\"vi-i18n\");\n\t\tif (overridenLocales) {\n\t\t\ti18n.addResourceBundle(this.game.settings.language, \"game\", overridenLocales, true, true);\n\t\t}\n\n\t\t// Views\n\t\tconst identity = await this.getIdentity(this._config.lottery);\n\n\t\tthis.loadingView = new identity.LoadingView(this) as (LoadedView | ContainerView) &\n\t\t\tIAdaptativeLoadingView;\n\t\tthis.introductionView = new identity.IntroductionView(this) as (LoadedView | ContainerView) &\n\t\t\tIAdaptativeIntroductionView;\n\t\tthis.inGameView = new identity.InGameView(this) as (LoadedView | ContainerView) &\n\t\t\tIAdaptativeInGameView;\n\t\tthis.lockView = new identity.LockView(this) as (LoadedView | ContainerView) &\n\t\t\tIAdaptativeLockedView;\n\n\t\t// State\n\t\tthis.state = new State({\n\t\t\tloading: { view: this.loadingView },\n\t\t\tintroduction: { view: this.introductionView },\n\t\t\tgame: { view: this.inGameView },\n\t\t\tlock: { view: this.lockView },\n\t\t});\n\n\t\t// Load project (from editor)\n\t\tconst project = this.loader.get<IProject>(\"project\");\n\t\tthis.skin = project.skin;\n\t\tthis.loader.remove(\"project\");\n\n\t\tContainerImporter.customContainerCreator = (config, container) => {\n\t\t\treturn ProjectLoader.customContainerLoader(config, this.loader.baseUrl, container, project);\n\t\t};\n\n\t\tAssetStore.parse(project.assets, this.loader.baseUrl);\n\n\t\tproject.views.forEach((v) =>\n\t\t\tStateImporter.importView(\n\t\t\t\tthis.state.states[v.stateName].view as LoadedView,\n\t\t\t\tv,\n\t\t\t\tthis.loader.baseUrl,\n\t\t\t\tproject\n\t\t\t)\n\t\t);\n\n\t\t// Start First as VI assets are still accessible.\n\t\tsuper.start();\n\n\t\t// Then Clear loader as VI assets are now useless.\n\t\t// excepted HowlerLoader that optionally loaded sound files than are often loaded\n\t\t// during the game\n\t\tif (this.game.gameConfig.gameParameters.overrideOnMultipleLoads) {\n\t\t\tthis.game.pixiLoader.overrideOnMultipleLoads = true;\n\t\t} else {\n\t\t\tfor (const loader of this.loader.loaders) {\n\t\t\t\tif (!(loader instanceof HowlerLoader)) {\n\t\t\t\t\tloader.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Configure the GamePixi lock view\n\t\tthis.game.lockStage.addChild(this.lockView);\n\t\tthis.lockView.orientation = this.game.settings.orientation;\n\n\t\t// Resize game\n\t\tthis.game.resize();\n\n\t\t// VI has been initialized\n\t\tif (this.onInitialized) {\n\t\t\tthis.onInitialized();\n\t\t}\n\n\t\t// Hide the environment \"loading\" image\n\t\tthis.game.com.bridge.executeAction(\"GAME_LOADING\");\n\n\t\tif (done) {\n\t\t\tdone();\n\t\t}\n\t}\n\n\t/**\n\t * Shows the loading view\n\t */\n\tpublic showLoadingView(): void {\n\t\t// Add view in front of all other views\n\t\tthis.game.stage.addChild(this.loadingView);\n\n\t\t// Configure loader\n\t\tthis.game.loader.onProgress = (percentage) => this.loadingView.onProgress(percentage);\n\t}\n\n\t/**\n\t * Shows the introduction\n\t * @param done callback once the animation is done\n\t */\n\tpublic async showIntroduction(done?: () => void): Promise<void> {\n\t\t// Always set on top\n\t\tthis.game.stage.addChild(this.introductionView);\n\n\t\t// Go to introduction view\n\t\tawait this.state.to(\"introduction\");\n\n\t\t// Play introduction sprite\n\t\treturn new Promise<void>((resolve) => {\n\t\t\tthis.introductionView.animate(() => {\n\t\t\t\tthis.emitter.emit(EVisualIdentityEvent.IntroductionShown);\n\t\t\t\tif (done) {\n\t\t\t\t\tdone();\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Shows the VI in game (logo, settings, purse etc.)\n\t */\n\tpublic showInGame(): void {\n\t\t// Always set on top\n\t\tthis.game.stage.addChild(this.inGameView);\n\t\tthis.game.stage.addChild(this.introductionView);\n\n\t\t// Go to game view\n\t\tthis.state.to(\"game\");\n\t}\n\n\t/**\n\t * Hides the visual identity views\n\t */\n\tpublic hide(): void {\n\t\tthis.game.stage.removeChild(this.background);\n\n\t\tObject.keys(this.state.states).forEach((s) => {\n\t\t\tconst view = this.state.states[s].view as ContainerView;\n\t\t\tview.visible = false;\n\t\t});\n\t}\n\n\t/**\n\t * Emit a VisualIdentity action event\n\t * @param event the action type to emit to intentities\n\t * @param parameters the parameters to send to the identity on the given action\n\t */\n\tpublic emit<T>(event: EVisualIdentityAction | string, parameters?: T): boolean {\n\t\treturn this.emitter.emit(event, parameters);\n\t}\n\n\t// Fills the background according to the given color / alpha\n\tprivate _fillBackground(color: number, alpha?: number): void {\n\t\tif (!(this.background instanceof Graphics)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// set default values\n\t\tif (alpha === undefined) {\n\t\t\talpha = 0.4;\n\t\t}\n\n\t\tthis.background.beginFill(color, alpha);\n\t\tthis.background.clear();\n\t\tthis.background.drawRect(0, 0, 1, 1);\n\t\tthis.background.endFill();\n\n\t\t// We have to manually set hit area on PIXI.Graphics\n\t\tthis.background.hitArea = new Rectangle(\n\t\t\t0,\n\t\t\t0,\n\t\t\tthis.game.renderer.width,\n\t\t\tthis.game.renderer.height\n\t\t);\n\t}\n\n\t// Binds the events\n\tprivate _bindEvents(): void {\n\t\t// Resize\n\t\twindow.addEventListener(\"resize\", () => this.emitter.emit(\"resize\"));\n\n\t\t// Settings\n\t\tthis.emitter.on(EVisualIdentityEvent.ShowSettings, () => {\n\t\t\t// the loro lottery use a clickable transparent background for settings\n\t\t\tconst behaviourParameter =\n\t\t\t\tthis.game.gameConfig.behavioursParameters[this.game.gameConfig.selectedBehaviour];\n\t\t\tthis._fillBackground(0x0, behaviourParameter.settingsBackgroundOpacity);\n\n\t\t\tthis.game.stage.addChild(this.background);\n\t\t\tthis.game.stage.addChild(this.inGameView);\n\n\t\t\t// Hack: need to render stage to update transforms according to\n\t\t\t// vertex datas of settings component and its children...\n\t\t\t// this.game.renderer.render(this.game.stage);\n\t\t});\n\n\t\tthis.emitter.on(EVisualIdentityEvent.HideSettings, () => {\n\t\t\tthis.game.stage.removeChild(this.background);\n\t\t});\n\n\t\t// Scratch\n\t\tthis.emitter.on(EVisualIdentityAction.ShowScratchSettings, (visible: boolean) => {\n\t\t\tif (visible) {\n\t\t\t\tthis._fillBackground(0x0, 0.4);\n\t\t\t\tthis.game.stage.addChild(this.background);\n\t\t\t} else {\n\t\t\t\tthis.game.stage.removeChild(this.background);\n\t\t\t}\n\n\t\t\tthis.game.stage.addChild(this.inGameView);\n\t\t});\n\n\t\tthis.emitter.on(EVisualIdentityEvent.SetScratchConfiguration, (params) => {\n\t\t\tScratchSolver.scratchs.forEach((scratch) => {\n\t\t\t\t// TODO: change this addTarget interface for a scratchComponent.setTool(IScratchConfig)\n\t\t\t\tscratch.emitterDatas = params.emitterDatas;\n\t\t\t\tscratch.revealEmitterDatas = params.revealEmitterDatas;\n\t\t\t\tparams.pointer.addTarget(scratch);\n\t\t\t});\n\t\t});\n\n\t\tthis.emitter.on(EVisualIdentityAction.SoundEnabled, (enabled: boolean) => {\n\t\t\tthis._soundEnabled = enabled;\n\t\t});\n\n\t\t// Backward compatibility\n\t\tthis.emitter.on(EVisualIdentityEvent.ShowRules, () => this.onShowRules && this.onShowRules());\n\t\tthis.emitter.on(\n\t\t\tEVisualIdentityEvent.ShowMainRules,\n\t\t\t() => this.onShowMainRules && this.onShowMainRules()\n\t\t);\n\t}\n\n\t/**\n\t * For backward compatibility, keep setter to know if settings are enabled\n\t * @deprecated\n\t */\n\tpublic set settingsEnabled(enabled: boolean) {\n\t\tthis.emitter.emit(EVisualIdentityAction.SettingsEnabled, enabled);\n\t}\n\n\t/**\n\t * Enabled / disable sound\n\t * @param enabled: boolean\n\t */\n\tpublic set soundEnabled(enabled: boolean) {\n\t\tthis._soundEnabled = enabled;\n\t\tthis.emitter.emit(EVisualIdentityAction.SoundEnabled, enabled);\n\t}\n\n\t/**\n\t * Return true if sound is enabled in VI, false otherwise.\n\t * @returns boolean\n\t */\n\tpublic get soundEnabled(): boolean {\n\t\treturn this._soundEnabled;\n\t}\n}\n","export enum EVisualIdentityEvent {\n\t/**\n\t * Event sent by the VI once the introduction has been shown\n\t */\n\tIntroductionShown = \"introductionShown\",\n\t/**\n\t * Event sent by the VI once the introduction finished\n\t */\n\tIntroductionComplete = \"introductionComplete\",\n\t/**\n\t * Event sent by the VI on the user wants to see the settings\n\t */\n\tShowSettings = \"showsettings\",\n\t/**\n\t * Event sent by the VI on the user wants to hide the settings\n\t */\n\tHideSettings = \"hidesettings\",\n\t/**\n\t * Event sent by the VI on the user wants to see the rules\n\t */\n\tShowRules = \"showrules\",\n\t/**\n\t * Event sent by the VI on the user wants to hide the rules\n\t * (from Norsk Tipping)\n\t */\n\tHideRules = \"hiderules\",\n\t/**\n\t * Event sent by the VI on the user wants to see the main rules\n\t */\n\tShowMainRules = \"showmainrules\",\n\t/**\n\t * Event sent by the VI on the sound status changed\n\t */\n\tSoundStatusChanged = \"soundstatuschanged\",\n\t/**\n\t * Event sent by the VI on the user wants to quit the game\n\t */\n\tQuitGame = \"quitgame\",\n\t/**\n\t * Event sent by the VI on the user wanted to quit the game and the confirm popup is appearing\n\t */\n\tConfirmQuitGame = \"confirmQuitGame\",\n\t/**\n\t * Event sent by the VI on the user wants to see the winning table\n\t * (from Danske Spil)\n\t */\n\tShowWinningTable = \"showwinningtable\",\n\t/**\n\t * Event sent by the VI on the user wants to see the informations about the current game\n\t * (from Danske Spil)\n\t */\n\tAboutGame = \"aboutGame\",\n\t/**\n\t * Event sent by the VI to notify that scratch configuration has to be modified\n\t * Sent with params as {pointer:CustomPointer, emitterDatas:any}\n\t */\n\tSetScratchConfiguration = \"setscratchconfiguration\",\n\t/**\n\t * Event sent by the VI on the user wanted to go to the game tutorial\n\t * (from FDJ)\n\t */\n\tTutorial = \"tutorial\",\n\t/**\n\t * Event sent by the VI when the user want to switch game mode between normal and demo\n\t */\n\tSwitchGameMode = \"switchgamemode\",\n\t/**\n\t * Event sent when the webpage lose focus and become blurred\n\t */\n\tGameBlurred = \"gameblurred\",\n\t/**\n\t * Event sent when the webpage regain focus\n\t */\n\tGameFocused = \"gamefocused\",\n\t/**\n\t * Event sent by the LORO VI when a user use the built in auto button\n\t */\n\tAutoButton = \"autobutton\",\n}\n\nexport enum EVisualIdentityAction {\n\t/**\n\t * Action that sets if the settings are enabled or not\n\t * @example vi.emitter.emit(EVisualIdentityAction.SettingsEnabled, true); // To enable settings\n\t * @example vi.emitter.emit(EVisualIdentityAction.SettingsEnabled, false); // To disable settings\n\t */\n\tSettingsEnabled = \"settingsEnabled\",\n\t/**\n\t * Action that sets the new purse to display\n\t * @example vi.emitter.emit(EVisualIdentityAction.SetPurse, new Amount(0)); // Set a purse of 0€ for example\n\t */\n\tSetPurse = \"setPurse\",\n\t/**\n\t * Action that sets if the rules are enabled or not\n\t * @example vi.emitter.emit(EVisualIdentityAction.RulesEnabled, true); // To enable rules\n\t * @example vi.emitter.emit(EVisualIdentityAction.RulesEnabled, false); // To disable rules\n\t */\n\tRulesEnabled = \"rulesEnabled\",\n\t/**\n\t * Action that sets that the game is ready so the Visual Identity can perform\n\t * some actions that require the game to be ready\n\t */\n\tSetGameReady = \"setGameReady\",\n\t/**\n\t * Action that sets the scratch settings component visible\n\t * @example vi.emitter.emit(EVisualIdentityAction.ShowScratchSettings, true); // To show scratch settings\n\t * @example vi.emitter.emit(EVisualIdentityAction.ShowScratchSettings, false); // To hide scratch settings\n\t */\n\tShowScratchSettings = \"showScratchSettings\",\n\t/**\n\t * Tells the Visual Identity to update its design according to the newly loaded assets in the game\n\t * @example vi.emitter.emit(EVisualIdentityAction.UpadteDesign); // Tells to update the design\n\t */\n\tUpdateDesign = \"updateDesign\",\n\t/**\n\t * Tells the VI to add the given buttons to the controls buton\n\t */\n\tAddControlButton = \"addControlButton\",\n\t/**\n\t * Give the WIZZ VI the rules to add\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzSetRules, [ContainerRules1, ContainerRules2]); // To add two rules slide\n\t */\n\tWizzSetRules = \"wizzSetRules\",\n\t/**\n\t * Set wizz game specific textures\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzSetConfig, {\n\t * \t\tbottom?: {\n\t * \t\t\ttitle?: Texture,\n\t * \t\t\tbackground?: Texture,\n\t * \t\t},\n\t * \t\tbet?: {\n\t * \t\t\tidle?: Texture,\n\t * \t\t\tover?: Texture,\n\t * \t\t\tclick?: Texture,\n\t * \t\t\tdisabled?: Texture,\n\t * \t\t},\n\t * \t\tonBet: () => Promise<void>,\n\t * \t\tonReconnect: () => Promise<void>,\n\t * \t\tamount: Amount,\n\t * \t});\n\t */\n\tWizzSetConfig = \"wizzSetConfig\",\n\t/**\n\t * Wizz get purse containers\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzGetPursesContainers, (containers) => {\n\t * \t\tcontainers.gift // promo token\n\t * \t\tcontainers.token // token\n\t * \t\tcontainers.gameWin // game win\n\t * \t\tcontainers.standard // real purse\n\t * });\n\t */\n\tWizzGetPursesContainers = \"wizzGetPursesContainer\",\n\t/**\n\t * Wizz get bottom container\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzGetBottomContainer, (container) => {\n\t * \t\tcontainer\n\t * });\n\t */\n\tWizzGetBottomContainer = \"wizzGetBottomContainer\",\n\t/**\n\t * Wizz get waiting container\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzGetWaitingContainer, (container) => {\n\t * \t\tcontainer\n\t * });\n\t */\n\tWizzGetWaitingContainer = \"wizzGetWaitingContainer\",\n\t/**\n\t * Wizz open canceled popup\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzOpenCanceled);\n\t */\n\tWizzOpenCanceled = \"wizzOpenCanceled\",\n\t/**\n\t * Wizz open canceled popup\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzOpenStopped);\n\t */\n\tWizzOpenStopped = \"wizzOpenStopped\",\n\t/**\n\t * Wizz open reconnection popup\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzOpenReconnection);\n\t */\n\tWizzOpenReconnection = \"wizzOpenReconnection\",\n\t/**\n\t * Wizz close reconnection popup\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzCloseReconnection);\n\t */\n\tWizzCloseReconnection = \"wizzCloseReconnection\",\n\t/**\n\t * Wizz open bet popup\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzOpenBet);\n\t */\n\tWizzOpenBet = \"wizzOpenBet\",\n\t/**\n\t * Wizz open waiting room\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzOpenWaitingRoom);\n\t */\n\tWizzOpenWaitingRoom = \"wizzOpenWaitingRoom\",\n\t/**\n\t * Wizz close waiting room\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzCloseWaitingRoom);\n\t */\n\tWizzCloseWaitingRoom = \"wizzCloseWaitingRoom\",\n\t/**\n\t * Wizz close reconnection popup\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzCloseReconnection);\n\t */\n\tWizzCloseAllPopups = \"wizzCloseAllPopups\",\n\t/**\n\t * Wizz update token purses\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzUpdatePurse);\n\t */\n\tWizzUpdatePurse = \"wizzUpdatePurse\",\n\t/**\n\t * Wizz update game gain\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzUpdateGain, amount);\n\t */\n\tWizzUpdateGain = \"wizzUpdateGain\",\n\t/**\n\t * @deprecated  use wizzGetAvatarslots instead\n\t * Wizz get Avatars from avatar ids\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzUpdateGain, ids, (avatars) => void);\n\t */\n\tWizzGetAvatars = \"wizzGetAvatars\",\n\t/**\n\t * Wizz Add VI Player\n\t * @example vi.emitter.emit(EVisualIdentityAction.WizzAddLobbyPlayer, AvatarSlot, isClientPlayer);\n\t */\n\tWizzAddLobbyPlayer = \"wizzAddLobbyPlayer\",\n\t/**\n\t * get the avatar with truncated pseudo and positioning\n\t * @example\tthis.game.vi.emitter.emit(EVisualIdentityAction.WizzGetAvatarSlots, playerInfo, this.clientPlayerID, (avatarSlots: IAvatarSlot[]) => {clback here});\n\t */\n\tWizzGetAvatarSlots = \"wizzGetAvatarSlots\",\n\t/**\n\t * Hide or show tutorial button\n\t * @example vi.emitter.emit(EVisualIdentityAction.TutorialVisible, true, true)\n\t */\n\tTutorialVisible = \"tutorialVisible\",\n\t/**\n\t * Enable or disable the sound\n\t * @example vi.emitter.emit(EVisualIdentityAction.SoundEnabled, true)\n\t */\n\tSoundEnabled = \"soundEnabled\",\n\t/**\n\t * Enable or disable the auto button on the VI\n\t * @exemple vi.emmiter.emit(EVisualIdentityAction.AutoEnabled, true)\n\t */\n\tAutoEnabled = \"autoEnabled\",\n}\n","import { Container } from \"pixi.js\";\nimport type { WebGLRenderer, CanvasRenderer, Sprite } from \"pixi.js\";\nimport type { TextField } from \"@gdk/core-pixi\";\n\nexport class Time extends Container {\n\t/**\n\t * Label textfield used to draw the purse value (from the editor)\n\t */\n\tpublic label: TextField = null;\n\tprivate iconBlack: Sprite = null;\n\tprivate iconWhite: Sprite = null;\n\n\tprivate _hours: number = -1;\n\tprivate _minutes: number = -1;\n\n\t/**\n\t * Constructor\n\t */\n\tpublic constructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * sets the clock color to black or white\n\t */\n\tpublic set color(value: string) {\n\t\tthis.iconBlack.visible = value === \"black\" || value === \"#000000\" || value === \"#000\";\n\t\tthis.iconWhite.visible = !this.iconBlack.visible;\n\t\tthis.label.styles.default.fill = value;\n\t\tthis.label.text = this.label.text;\n\t}\n\n\t/**\n\t * Sets the current time\n\t * @param ms ellapsed milliseconds\n\t */\n\tpublic setTime(ms: number): void {\n\t\t// apply time text\n\t\tconst d = new Date(ms);\n\t\tconst hours = d.getHours();\n\t\tconst minutes = d.getMinutes();\n\n\t\tif (hours === this._hours && minutes === this._minutes) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Update text\n\t\tthis.label.text = `${(hours < 10 ? \"0\" : \"\") + hours}:${(minutes < 10 ? \"0\" : \"\") + minutes}`;\n\n\t\t// Update cache\n\t\tthis._hours = hours;\n\t\tthis._minutes = minutes;\n\t}\n\n\t/**\n\t * Render text with WebGL\n\t * @param renderer the pixi.js renderer (WebGLRenderer)\n\t * @override PIXI.Sprite.renderWebGL\n\t */\n\tpublic renderWebGL(renderer: WebGLRenderer): void {\n\t\tthis.setTime(Date.now());\n\t\tsuper.renderWebGL(renderer);\n\t}\n\n\t/**\n\t * Render text with Canvas renderer\n\t * @param renderer the pixi.js renderer (CanvasRenderer)\n\t * @override PIXI.Sprite._renderCanvas\n\t */\n\tpublic _renderCanvas(renderer: CanvasRenderer): void {\n\t\tthis.setTime(Date.now());\n\t\tsuper._renderCanvas(renderer);\n\t}\n}\n","import { Container } from \"pixi.js\";\nimport type { Graphics } from \"pixi.js\";\nimport type { Button } from \"@gdk/core-pixi\";\n\nimport { Time } from \"../components/time\";\nimport type { AdaptativeVisualIdentity } from \"../../../adaptativeVisualIdentity\";\nimport type { InGameView } from \"./inGameView\";\n\nexport class BottomBar extends Container {\n\tpublic static height: number = 90;\n\t/**\n\t * Bottom overlay used to draw time and menu button\n\t */\n\tpublic bottomOverlay: Graphics = null;\n\t/**\n\t * Quick button used to show DS Quick settings (from the editor)\n\t */\n\tpublic settingsButton: Button = null;\n\t/**\n\t * Textfield used to draw the current time (from the editor)\n\t */\n\tpublic time: Time = new Time();\n\n\tprivate _buttons: Button[] = [];\n\tprivate _buttonsLeft: Button[] = [];\n\tprivate _buttonsRight: Button[] = [];\n\n\t/**\n\t * Constructor\n\t * @param vi the adaptative visual identity reference\n\t */\n\tpublic constructor(protected vi: AdaptativeVisualIdentity, protected inGameView: InGameView) {\n\t\tsuper();\n\t}\n\n\t/**\n\t * handle bottom bar resize\n\t */\n\tpublic onResize(): void {\n\t\tconst rendererWidth = this.vi.game.renderer.width / this.vi.game.renderer.resolution;\n\t\tconst reverseParentScaleRatio = 1 / this.inGameView.scaleXY;\n\t\tthis.dockingBounds.width = Math.max(\n\t\t\tthis.inGameView.dockingBounds.width,\n\t\t\trendererWidth * reverseParentScaleRatio\n\t\t);\n\n\t\tlet maxButtonsWidth = 0;\n\t\tlet maxLeftButtonsWidth = 0;\n\t\tlet maxRightButtonsWidth = 0;\n\n\t\tthis._buttonsLeft.forEach((leftButton) => {\n\t\t\tmaxLeftButtonsWidth = Math.max(maxLeftButtonsWidth, leftButton.width);\n\t\t});\n\n\t\tthis._buttonsRight.forEach((rightBUtton) => {\n\t\t\tmaxRightButtonsWidth = Math.max(maxRightButtonsWidth, rightBUtton.width);\n\t\t});\n\n\t\tmaxButtonsWidth = Math.max(maxLeftButtonsWidth, maxRightButtonsWidth);\n\n\t\tconst spacing = -10;\n\n\t\tthis._buttonsLeft.forEach((leftButton) => {\n\t\t\tleftButton.docking.x = (maxRightButtonsWidth + spacing) * -0.5;\n\t\t});\n\n\t\tthis._buttonsRight.forEach((rightButton) => {\n\t\t\trightButton.docking.x = (maxLeftButtonsWidth + spacing) * 0.5;\n\t\t});\n\t}\n\n\t/**\n\t * adds a button to the buttom bar\n\t * @param button\n\t */\n\tpublic addButton(button: Button): void {\n\t\tthis._buttons.push(button);\n\t\tif (button.docking.x < 0) {\n\t\t\tthis._buttonsLeft.push(button);\n\t\t} else if (button.docking.x > 0) {\n\t\t\tthis._buttonsRight.push(button);\n\t\t}\n\t\tthis.addChild(button);\n\t}\n}\n","import { Container, Rectangle, Point } from \"pixi.js\";\nimport { TweenMax, Cubic } from \"gsap\";\nimport i18next from \"i18next\";\nimport type { TextField, Button } from \"@gdk/core-pixi\";\nimport type { mesh, Sprite } from \"pixi.js\";\n\n/**\n * the popin buttons options\n */\nexport interface IMessagePopinButtonOptions {\n\tname: string; // the button name (used for tracking)\n\tlabel: string; // the label (text)\n\tvalue: unknown; // the value returned by this button.\n\ttype: string; // the type (primary, secondary, cancel...) must exist in editor.\n\texit?: boolean; // if the button trigger a rejection when clicked\n}\n\n/**\n * the Popin required options\n */\nexport interface IMessagePopinOptions {\n\tname: string; // the popin name (used for tracking)\n\ttitle: string; // the popin title\n\tbody: string; // the popin body\n\tbuttons: IMessagePopinButtonOptions[]; // the popin buttons\n}\n\n/**\n * the result returned by the Promise\n */\nexport interface IMessagePopinResult {\n\tresult?: unknown; // if there is a result\n\terror?: unknown; // if there is an error\n}\n\ninterface IButton {\n\t[name: string]: Button;\n}\n\nexport class MessagePopin extends Container {\n\tpublic static ERROR_NO_POPIN: string = \"Error: requested popin doesn't exist in i18n\";\n\n\t/**\n\t * the padding (rectangle) between popin borders and it's content\n\t */\n\tpublic padding: Rectangle = new Rectangle(35, 20, 35, 30);\n\n\t/**\n\t * the spacing (Point) between popin contents\n\t */\n\tpublic spacing: Point = new Point(15, 30);\n\n\tprivate background: mesh.NineSlicePlane = null;\n\tprivate title: TextField = null;\n\tprivate body: TextField = null;\n\tprivate overlay: Sprite = null;\n\tprivate _hidden: boolean = false;\n\tprivate _buttonsStack: Button[] = [];\n\tprivate _buttons: Button[] = [];\n\tprivate _buttonsByName: IButton[] = []; // Button[] = [];\n\n\tprivate _buttonsStackMinSize: number = 0;\n\tprivate _pending: IMessagePopinOptions;\n\tprivate _pendingResolve: (value?: unknown) => void;\n\tprivate _pendingReject: (reason?: unknown) => void;\n\n\tprivate _primary: Button = null;\n\tprivate _secondary: Button = null;\n\tprivate _cancel: Button = null;\n\tprivate _close: Button = null;\n\n\t/**\n\t * called once when loaded, init editor components\n\t */\n\tpublic onLoaded(): void {\n\t\tconst buttonsTemplates = [this._primary, this._secondary, this._cancel, this._close];\n\t\tbuttonsTemplates.forEach((button) => {\n\t\t\tthis._buttonsStackMinSize = Math.max(this._buttonsStackMinSize, button.nineSliceMinSize.x);\n\t\t\tbutton.visible = false;\n\t\t\tthis.removeChild(button);\n\t\t});\n\n\t\t// Force invisible\n\t\tthis.hide(0);\n\t}\n\n\t/**\n\t * will open a popin based on i18n object\n\t * @param key the i18n key\n\t */\n\tpublic async openFromi18n(\n\t\tkey: string,\n\t\toptions: i18next.TranslationOptions<object> = {}\n\t): Promise<IMessagePopinResult> {\n\t\tconst popinSettings = this.getFromi18n(key, options);\n\t\tif (popinSettings) {\n\t\t\treturn this.open(popinSettings);\n\t\t} else {\n\t\t\treturn { error: MessagePopin.ERROR_NO_POPIN };\n\t\t}\n\t}\n\n\t/**\n\t * open a message popin (text + optionnal buttons)\n\t * will get the popin settings based on an object from i18n\n\t * @param key the object key in i18n\n\t * @param options i18n options like replacement properties.\n\t */\n\tpublic getFromi18n(key: string, options: i18next.TranslationOptions<object> = {}): any {\n\t\treturn i18next.t(key, Object.assign(options, { returnObjects: true, defaultValue: null }));\n\t}\n\n\t/**\n\t * open a message popin (text + optionnal buttons)\n\t * will get the popin settings based on an object\n\t * @param options the popin options\n\t */\n\tpublic async open(options: IMessagePopinOptions): Promise<IMessagePopinResult> {\n\t\tthis._pending = options;\n\n\t\tif (!this.parent) {\n\t\t\treturn Promise.reject({\n\t\t\t\terror: `popin isn't in the display list (it doesn't have a parent)`,\n\t\t\t});\n\t\t}\n\n\t\tthis.addOverlay();\n\t\tthis.removeButtons();\n\n\t\t// const primary = this.primaryButton.clone();\n\t\tthis._pending.buttons.forEach((datas) => {\n\t\t\t// get a new button from the prefabs\n\t\t\tconst button = this[`_${datas.type}`].clone();\n\n\t\t\tif (button) {\n\t\t\t\t// for the tracking :\n\t\t\t\tbutton.setName(`${options.name}:${datas.name}`);\n\t\t\t\t// configure the button\n\t\t\t\tbutton.visible = true;\n\t\t\t\tthis.addChild(button);\n\n\t\t\t\tif (datas.type !== \"close\") {\n\t\t\t\t\tbutton.label = datas.label;\n\t\t\t\t\tthis._buttonsStack.push(button);\n\t\t\t\t}\n\t\t\t\tthis._buttons.push(button);\n\t\t\t\tthis._buttonsByName[datas.name] = button;\n\n\t\t\t\tbutton.on(\"pointertap\", async () => {\n\t\t\t\t\tawait this.hide();\n\t\t\t\t\tif (datas.exit || datas.type === \"close\") {\n\t\t\t\t\t\tthis._pendingReject(datas.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._pendingResolve(datas.value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Resize the settings background\n\t\tthis._resizeBackground();\n\n\t\tawait this.show();\n\n\t\treturn await new Promise((resolve, reject) => {\n\t\t\tthis._pendingResolve = resolve;\n\t\t\tthis._pendingReject = reject;\n\t\t}).then(\n\t\t\t(result) => {\n\t\t\t\treturn { result };\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\treturn { error };\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * will show the popin\n\t * @param duration the transition duration\n\t */\n\tpublic async show(duration: number = 0.2): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tif (this._hidden) {\n\t\t\t\tthis.visible = true;\n\t\t\t\tTweenMax.fromTo(\n\t\t\t\t\tthis,\n\t\t\t\t\tduration,\n\t\t\t\t\t{ scaleXY: 0.85, alpha: 0 },\n\t\t\t\t\t{\n\t\t\t\t\t\tscaleXY: 1,\n\t\t\t\t\t\talpha: 1,\n\t\t\t\t\t\tease: Cubic.easeOut,\n\t\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\t\tthis.buttonsSetEnabled(true);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\n\t\t\tthis._hidden = false;\n\t\t});\n\t}\n\n\t/**\n\t * will hide the popin\n\t * @param duration the transition duration\n\t */\n\tpublic async hide(duration: number = 0.2): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.buttonsSetEnabled(false);\n\t\t\tTweenMax.fromTo(\n\t\t\t\tthis,\n\t\t\t\tduration,\n\t\t\t\t{ scaleXY: 1, alpha: 1 },\n\t\t\t\t{\n\t\t\t\t\tscaleXY: 1.075,\n\t\t\t\t\talpha: 0,\n\t\t\t\t\tease: Cubic.easeOut,\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\tthis.visible = false;\n\t\t\t\t\t\tthis.removeOverlay();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.removeButtons();\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis._hidden = true;\n\t\t});\n\t}\n\n\t/**\n\t * give read only access to the popin buttons list (just in case)\n\t */\n\tpublic get buttons(): IButton[] {\n\t\treturn this._buttonsByName;\n\t}\n\n\tprivate _resizeBackground(): void {\n\t\tthis.title.docking.y = this.padding.top;\n\t\tthis.title.height = 0;\n\t\tthis.title.text = ``;\n\t\tthis.title.width = 0;\n\t\tthis.body.height = 0;\n\t\tthis.body.text = ``;\n\t\tthis.body.width = 0;\n\n\t\tconst buttons = this._buttonsStack.filter((button) => button.visible);\n\n\t\tlet maxButtonHeight = 0;\n\t\tlet maxButtonWidth = 0;\n\n\t\tbuttons.forEach((button) => {\n\t\t\t// resize button at min size\n\t\t\tbutton.nineSliceMinSize.x = this._buttonsStackMinSize;\n\t\t\tbutton.label = button.label;\n\n\t\t\tmaxButtonHeight = Math.max(maxButtonHeight, button.height);\n\t\t\tmaxButtonWidth = Math.max(maxButtonWidth, button.width);\n\t\t});\n\n\t\tconst buttonsWidth = buttons.length * maxButtonWidth + this.spacing.x * (buttons.length - 1);\n\n\t\tthis.title.width = Math.max(buttonsWidth, this.title.width);\n\t\tthis.title.text = this._pending.title;\n\n\t\tthis.body.width = Math.max(this.title.width, this.body.width);\n\t\tthis.body.docking.y = this.title.docking.y + this.title.height + this.spacing.y;\n\t\tthis.body.text = this._pending.body;\n\n\t\t// there is an error in case body text is empty\n\t\tif (this.body.text === \"\") {\n\t\t\tthis.body.text = \".\";\n\t\t\tthis.body.visible = false;\n\t\t} else {\n\t\t\tthis.body.visible = true;\n\t\t}\n\n\t\tconst totalWidth = Math.max(buttonsWidth, this.title.width, this.body.width);\n\t\tconst totalHeight = this.title.height + this.body.height + maxButtonHeight + this.spacing.y * 2;\n\n\t\tbuttons.forEach((button, index) => {\n\t\t\t// resize button\n\t\t\tbutton.nineSliceMinSize.x = maxButtonWidth;\n\t\t\tbutton.label = button.label;\n\t\t\t// position button\n\t\t\tbutton.docking.x =\n\t\t\t\t(totalWidth - buttonsWidth) * 0.5 +\n\t\t\t\t(maxButtonWidth + this.spacing.x) * index +\n\t\t\t\tthis.padding.x;\n\t\t\tbutton.docking.y = -this.padding.height;\n\t\t\t// enable button\n\t\t\tbutton.enabled = true;\n\t\t});\n\n\t\tthis.background.width = totalWidth + this.padding.x + this.padding.width;\n\t\tthis.background.height = totalHeight + this.padding.y + this.padding.height;\n\t\tthis.dockingBounds.setBounds(this.background.width, this.background.height);\n\t}\n\n\tprivate addOverlay(): void {\n\t\tif (this.parent) {\n\t\t\tthis.parent.addChild(this.overlay);\n\t\t\t// move to foreground\n\t\t\tthis.parent.addChild(this);\n\t\t}\n\t}\n\n\tprivate removeOverlay(): void {\n\t\tif (this.parent && this.overlay.parent) {\n\t\t\tthis.parent.removeChild(this.overlay);\n\t\t}\n\t}\n\n\tprivate buttonsSetEnabled(value: boolean): void {\n\t\t// this.closeButton.interactive = value;\n\t\tthis._buttons.forEach((button) => (button.enabled = value));\n\t}\n\n\tprivate buttonsSetInteractive(value: boolean): void {\n\t\t// this.closeButton.interactive = value;\n\t\tthis._buttons.forEach((button) => (button.interactive = value));\n\t}\n\n\tprivate removeButtons(): void {\n\t\tthis._buttons.forEach((button) => {\n\t\t\tif (button.parent) {\n\t\t\t\tthis.removeChild(button);\n\t\t\t\tbutton.interactive = false;\n\t\t\t\tbutton.removeAllListeners();\n\t\t\t\tbutton.destroy();\n\t\t\t}\n\t\t});\n\n\t\tthis._buttonsStack = [];\n\t\tthis._buttons = [];\n\t}\n}\n","export * from \"./adaptativeVisualIdentity\";\nexport * from \"./events\";\nexport * from \"./identity\";\n\nexport * from \"./identities/fgs/components/messagePopin\";\n","import { Bridge } from \"@falcon/bridge\";\nimport i18n from \"i18next\";\nimport { tracker, ErrorEvent } from \"@gdk/core\";\nimport type { IPrsTicketInfos } from \"@falcon/bridge/typings/prs\";\nimport type { IAmount } from \"@gdk/core\";\nimport type {\n\tICurrencyPurse,\n\tIMtrReplaySession,\n\tIBetRequest,\n\tIItgBetRequest,\n\tIItgBetResult,\n\tIItgTicket,\n\tEGameMode,\n\tIUserInformation,\n\tIOpenGameParameters,\n\tIService,\n\tIMtpRoomParamsResult,\n\tIMtpRoom,\n\tIMtpEnterRoomRequest,\n\tIMtpBetRequest,\n\tIMtpBetResult,\n\tIMtpSession,\n\tIPushSettings,\n\tIPlayerInformation,\n\tIMtrModel,\n\tIMtrSession,\n\tIMtrBetRequest,\n\tIMtrBetResult,\n\tIMtrBetUpdateRequest,\n} from \"@falcon/bridge\";\nimport type { PushChannel } from \"@falcon/push-client\";\n\nimport type { AbstractGame } from \"../game\";\nimport { MessageManager, EMessageType } from \"./messageManager\";\nimport { EPopinLevel, PopinButtonAction } from \"./popin\";\n\nexport interface ITrigger {\n\t/**\n\t * Trigger action on bridge\n\t * @param action the action's name\n\t * @param params parameters to send to the action\n\t */\n\ttrigger(action: string, params?: any): void;\n}\n\nexport interface IProxyConf {\n\tlocale: string;\n\ttheme: string;\n\tcurrency: string;\n}\n\nexport interface IAlert {\n\tid: string;\n}\nexport interface IOptions {\n\tapplicationId?: \"ITG\" | \"MTR\" | string;\n\tserviceName?: string;\n\troomId?: string;\n\tframework?: string;\n\tdimension?: {\n\t\twidth: number;\n\t\theight: number;\n\t};\n\tguest?: any;\n}\n\nexport class Com implements ITrigger {\n\t/**\n\t * It initiates the communication between the host and the game using the\n\t * proxy channel and load the file that load the game.\n\t *\n\t * In prod it is used like this: `<body onload=\"falcon.game.bridge.initialize()\">`.\n\t */\n\tpublic static initialize(): Promise<void> {\n\t\treturn Bridge.initialize();\n\t}\n\t/**\n\t * Bridge reference used to communicate with the host and request platforms.\n\t */\n\tpublic bridge: Bridge = null;\n\t/**\n\t * Array of notifications populated once a request has been finished.\n\t */\n\tpublic notifications: IAlert[] = [];\n\t/**\n\t * The active language used by the game.\n\t */\n\tpublic activeLanguage: string = \"fr\";\n\t/**\n\t * Message manager\n\t */\n\tpublic messageManager: MessageManager = new MessageManager(this);\n\n\t/**\n\t * User information object got in the .init function to keep user's informations.\n\t */\n\tpublic userInformation: IUserInformation = null;\n\n\t/**\n\t * game instance this Com is bound to.\n\t */\n\tpublic readonly game: AbstractGame;\n\n\tpublic constructor(game: AbstractGame) {\n\t\tthis.game = game;\n\t}\n\n\t/**\n\t * After being load the game should get a BridgeImpl instance that merge `platform` and\n\t * `channel` implementation (ie: createBet, ..., getLocaleInformations, ...)\n\t */\n\tpublic async init(): Promise<void> {\n\t\ttry {\n\t\t\t// Get bridge\n\t\t\tthis.bridge = Bridge.getBridge();\n\n\t\t\t// Active language @TODO remove as any when bridge is up to date in typings\n\t\t\tthis.activeLanguage = (\n\t\t\t\t(await this.bridge.getCurrentGameConfiguration()) as any\n\t\t\t).selectedLocale;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Inits the com (bridge) locales containing the server errors etc.\n\t */\n\tpublic async initI18n(): Promise<void> {\n\t\tconst locales = await this.bridge.loadLocales(this.activeLanguage);\n\t\ti18n.addResourceBundle(this.activeLanguage, \"game\", locales, true, false);\n\t}\n\n\t/**\n\t * Returns the current player's purse.\n\t */\n\tpublic async getPurse(): Promise<IAmount> {\n\t\ttry {\n\t\t\treturn (await this.bridge.channel.getPurseInformation()).displayedAmount;\n\t\t} catch (e) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get avatar url for id\n\t * @param id\n\t */\n\tpublic getAvatarUrl(id: string): string {\n\t\treturn this.bridge.platform.getAvatarUrl(id);\n\t}\n\n\t/**\n\t * Get player currency\n\t * @param currencyCode\n\t * @param playerId\n\t * @param serviceName\n\t */\n\tpublic async getPlayerCurrency(\n\t\tcurrencyCode: string,\n\t\tplayerId: string,\n\t\tserviceName?: IService\n\t): Promise<ICurrencyPurse[]> {\n\t\ttry {\n\t\t\treturn await this.bridge.platform.getPlayerCurrency(\n\t\t\t\tcurrencyCode,\n\t\t\t\tplayerId,\n\t\t\t\tserviceName,\n\t\t\t\tthis.bridge.channel.lotteryCode\n\t\t\t);\n\t\t} catch (e) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the current player's information.\n\t * null if the player is not authenticated\n\t */\n\tpublic async getUserInformation(): Promise<IUserInformation> {\n\t\treturn this.bridge.getUserInformation();\n\t}\n\n\t/**\n\t * Has to be called before buying a ticket in real money\n\t * @returns promise\n\t * The lottery must resolve whenever it wants the player to continuer with his bet\n\t * The lottery must reject if ever it wants to cancel the player's bet process\n\t */\n\tpublic async preBet(betRequest: IBetRequest): Promise<void> {\n\t\treturn this.bridge.preBet(betRequest);\n\t}\n\n\t/**\n\t * Request a new game mode\n\t *  - if current game mode is already the one, it will do nothing\n\t *  - otherwise creates the dedicated IF session\n\t * Resolves when done, with the new current GameMode\n\t * @param mode: one of the two EGameMode\n\t */\n\tpublic async updateGameMode(mode: EGameMode): Promise<string> {\n\t\treturn await this.bridge.updateGameMode(mode);\n\t}\n\n\t/**\n\t * Return the current game mode\n\t * Resolves when done, with the new current GameMode\n\t */\n\tpublic getGameMode(): Promise<EGameMode> {\n\t\treturn this.bridge.getGameMode() as Promise<EGameMode>;\n\t}\n\n\t/**\n\t * Retrieve open game parameters\n\t */\n\tpublic getOpenGameParameters(): IOpenGameParameters {\n\t\treturn this.bridge.getOpenGameParameters();\n\t}\n\n\t/**\n\t * Retrieve ticket for replay if any\n\t */\n\tpublic async getTicketToReplay(demo: boolean = false): Promise<IItgTicket> {\n\t\tconst ticketId = this.bridge.getTicketIdToReplay();\n\t\tif (ticketId === null || demo) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getItgTicket(ticketId);\n\t\t\tif (response) {\n\t\t\t\tthis.populateNotifications(response);\n\t\t\t}\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Creates an ITG bet request.\n\t * @param options the options object to send in the ITG bet request.\n\t */\n\tpublic async createItgBet(options: IItgBetRequest): Promise<IItgBetResult> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.createITGBet(options);\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Gets all the available tickets from the current user.\n\t * @param serviceName the service name associated to the ticket.\n\t */\n\tpublic async getItgTickets(serviceName: string, demo: boolean = false): Promise<IItgTicket[]> {\n\t\tif (demo) {\n\t\t\treturn [];\n\t\t}\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getItgTickets(serviceName);\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the existing ticket identified by the given ticket id.\n\t * @param ticketId the id the opened ticket to get.\n\t */\n\tpublic async getItgTicket(ticketId: number): Promise<IItgTicket> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getItgTicket(ticketId);\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Updates the existing ticket according to the given bet request.\n\t * @param options the options object to send in the ITG bet request.\n\t * @param ticketId the id of the ticket to update\n\t * @param showError display an error message on request failure\n\t */\n\tpublic async updateItgTicket(\n\t\toptions: IItgBetRequest,\n\t\tticketId: number,\n\t\tshowError: boolean = true\n\t): Promise<IItgBetResult> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.updateItgBet(options, ticketId);\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tif (showError) {\n\t\t\t\tthis.onError(e);\n\t\t\t}\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Claims an ITG ticket.\n\t * @param options the options object to send in the ITG claim request\n\t * @param ticketId the id of the ticket to claim.\n\t */\n\tpublic async claimItgBet(options: IItgBetRequest, ticketId: number): Promise<IItgBetResult> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.claimItgBet(options, ticketId);\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Creates a MOTORS bet request (start).\n\t * @param options the options object to send in the MOTORS bet request.\n\t */\n\tpublic async createMtrBet<TEventResponse, TEventParameters>(\n\t\toptions: IMtrBetRequest<TEventParameters>\n\t): Promise<IMtrBetResult<TEventResponse>> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.createMtrBet<TEventResponse, TEventParameters>(\n\t\t\t\toptions\n\t\t\t);\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t}\n\t}\n\n\t/**\n\t * Returns the gamif context associated to the given service name.\n\t * @param serviceName the service name to request.\n\t */\n\tpublic async getContext<T>(serviceName: string): Promise<any> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getGamifContext({\n\t\t\t\tapplicationId: \"GAM\",\n\t\t\t\tserviceName,\n\t\t\t});\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t}\n\t}\n\n\t/**\n\t * Get model of the given Motors game informations (service name and application Id)\n\t * @param options\n\t */\n\tpublic async getModel<TModel>(options: IService, demoMode?: boolean): Promise<IMtrModel<TModel>> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getMtrModel<TModel>(options, demoMode);\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t}\n\t}\n\n\t/**\n\t * Get information about presto ticket\n\t */\n\tpublic async getPrsTicketInfos<TModel>(): Promise<IPrsTicketInfos> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getPrsTicketInfos();\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t}\n\t}\n\n\t/**\n\t * Retrieve ticket for replay if any\n\t */\n\tpublic async getMtrSessionToReplay<TEventResponse, TEventParameters>(\n\t\tservice: IService,\n\t\tdemoMode: boolean = false\n\t): Promise<IMtrReplaySession<TEventResponse, TEventParameters> | undefined> {\n\t\tconst sessionId = this.bridge.getTicketIdToReplay();\n\t\tif (typeof sessionId !== \"number\" && typeof sessionId !== \"string\") {\n\t\t\treturn undefined;\n\t\t}\n\t\ttry {\n\t\t\tconst session = await this.bridge.platform.getMtrSession<\n\t\t\t\tnever,\n\t\t\t\tTEventResponse,\n\t\t\t\tTEventParameters\n\t\t\t>(service, demoMode, sessionId.toString());\n\t\t\treturn session as IMtrReplaySession<TEventResponse, TEventParameters>;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Get active sessions for the given service name and application Id.\n\t * @template TGameData Response game data.\n\t * @param service\n\t * @param _showError\n\t * @param demoMode\n\t */\n\tpublic async getMtrSession<TGameData, TEventParameters, TEventResponse>(\n\t\tservice: IService,\n\t\t_showError: boolean = true,\n\t\tdemoMode: boolean = false\n\t): Promise<IMtrSession<TGameData, TEventParameters, TEventResponse> | undefined> {\n\t\ttry {\n\t\t\tconst session = await this.bridge.platform.getMtrSession<TGameData, never, never>(\n\t\t\t\tservice,\n\t\t\t\tdemoMode\n\t\t\t);\n\t\t\treturn session as IMtrSession<TGameData, TEventParameters, TEventResponse>;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t}\n\t}\n\n\t/**\n\t * Perform an execute request (update bet).\n\t * @template TEventResponse Response event response\n\t * @template TEventParameters Event parameters\n\t * @param updateBetRequest the request options (service name, application id)\n\t * @param showError determines if the com module should show a popin when the response is an error or failed\n\t */\n\tpublic async updateMtrBet<TEventResponse, TEventParameters>(\n\t\tupdateBetRequest: IMtrBetUpdateRequest<TEventParameters>,\n\t\tshowError: boolean = true\n\t): Promise<IMtrBetResult<TEventResponse>> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.updateMtrBet<TEventResponse, TEventParameters>(\n\t\t\t\tupdateBetRequest\n\t\t\t);\n\t\t\tthis.populateNotifications(response);\n\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tif (!showError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\n\t\t\t// In the case of motors, we should ask to refresh the game if an error occured\n\t\t\t// while updating the bet, in order to retry.\n\t\t\tconst text = this.t(\"refresh-motors\", \"error\");\n\t\t\ttracker.track(new ErrorEvent(text));\n\n\t\t\tthis.messageManager\n\t\t\t\t.display({\n\t\t\t\t\tcode: undefined,\n\t\t\t\t\ttype: EMessageType.Immediate,\n\t\t\t\t\tpopup: {\n\t\t\t\t\t\tlevel: EPopinLevel.Error,\n\t\t\t\t\t\ttext,\n\t\t\t\t\t\tclosable: false,\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: this.t(\"refresh\", \"ui\"),\n\t\t\t\t\t\t\t\taction: PopinButtonAction.RefreshGame,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.finally();\n\t\t}\n\t}\n\n\t/**\n\t *  Gets the current variant settings of the given MTP game (service name).\n\t * @param options the options containing the applicationId and the service name.\n\t */\n\tpublic async getMtpParameters<T>(options: IService): Promise<IMtpRoomParamsResult<T>> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getMtpModel<T>(options);\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the current list of active rooms for the player according to the given service name.\n\t * @param options the options containing the applicationId and the serivce name.\n\t */\n\tpublic async getMtpRooms(options: IService): Promise<IMtpRoom[]> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getMtpRooms(options);\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Enters to a room and bets according to the given bet informations.\n\t * @param options the options containing the room informations to enter and the bet informations.\n\t */\n\tpublic async enterMtpRoomAndBet(\n\t\toptions: IMtpEnterRoomRequest & IMtpBetRequest\n\t): Promise<IMtpBetResult> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.enterMtpRoomAndBet(options);\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Creates a MTP bet on the user entered the room.\n\t * @param options the options containing the bet informations.\n\t */\n\tpublic async createMtpBet(options: IMtpBetRequest): Promise<IMtpBetResult> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.createMtpBet(options);\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the current session object of the given MTP game at the given roomId.\n\t * @param options the options containing the service name.\n\t * @param roomId the id of the room containing the session to retrieve.\n\t */\n\tpublic async getMtpSession<T>(options: IService, roomId: string): Promise<IMtpSession<T>> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getMtpSession<T>(options, roomId);\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Updates the MTP bet request (typically a new choice by the player in the game).\n\t * @param options the informations containing the data to update for the given MTP game.\n\t */\n\tpublic async updateMtpBet(options: IMtpBetRequest): Promise<IMtpBetResult> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.updateMtpBet(options);\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Creates and returns an initialized channel for SSE or WebSocket connection\n\t * @param settings the push settings (host, port, etc.)\n\t */\n\tpublic async getNotificationsChannel(settings: IPushSettings): Promise<PushChannel> {\n\t\ttry {\n\t\t\treturn this.bridge.platform.createNotificationsChannel(settings);\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Enter to a room identified in the options parameter.\n\t * @param options the request parameters (service name, variant etc.)\n\t */\n\tpublic async enterMtpRoom(options: IMtpEnterRoomRequest): Promise<IMtpRoom> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.enterMtpRoom(options);\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the informations (avatar, pseudo, etc.) of the current player\n\t */\n\tpublic async getCurrentPlayerInformations(): Promise<IPlayerInformation> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getCurrentPlayerInfo();\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the informations (avatar, pseudo, etc.) of the given players identified by their Ids.\n\t * @param playersIds the ids of the player to retrieve the informations.\n\t */\n\tpublic async getPlayersInformations(playersIds: string[]): Promise<IPlayerInformation[]> {\n\t\ttry {\n\t\t\tconst response = await this.bridge.platform.getPlayersInfo(playersIds);\n\n\t\t\tthis.populateNotifications(response);\n\t\t\treturn response;\n\t\t} catch (e) {\n\t\t\tthis.onError(e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Trigger action on bridge\n\t * @param action the action's name\n\t * @param params parameters to send to the action\n\t */\n\tpublic trigger(action: string, params?: any): void {\n\t\tconst result = this.bridge.executeAction(action, params);\n\t\t// executeAction returns a Promise or nothing\n\t\tif (result) {\n\t\t\tresult.catch((e) => {\n\t\t\t\tthis.onError(e);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Helper to access getLocalizedString\n\t * @param key in the bridge configuration\n\t * @param scope of the key it may be server, error or ui\n\t */\n\tpublic t(key: string, scope: \"server\" | \"error\" | \"ui\" | \"multiplayer\"): string {\n\t\tif (!this.activeLanguage) {\n\t\t\tthrow new Error(\"no active language sets\");\n\t\t}\n\n\t\tconst path = `bridge__${scope}__${key}`;\n\t\tif (i18n.exists(path, { keySeparator: \"__\" })) {\n\t\t\treturn i18n.t(path, { keySeparator: \"__\" });\n\t\t} else {\n\t\t\treturn i18n.t(\"bridge.error.default\");\n\t\t}\n\t}\n\n\t/**\n\t * Shows the notifications from server\n\t * For example: AUTOWITHDRAWAL or SUSPENSION_TRIGGERED\n\t */\n\tpublic async showNotification(callback?: () => void): Promise<void> {\n\t\tif (this.notifications.length === 0) {\n\t\t\tif (callback) {\n\t\t\t\treturn callback();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst { id } = this.notifications.shift();\n\t\tawait this.messageManager.display({\n\t\t\tcode: id,\n\t\t\ttype: EMessageType.Immediate,\n\t\t\tpopup: {\n\t\t\t\tlevel: EPopinLevel.Info,\n\t\t\t\ttext: this.t(id, \"server\"),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: this.t(\"close\", \"ui\") || \" Close\",\n\t\t\t\t\t\taction: PopinButtonAction.ClosePopin,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\n\t\treturn await this.showNotification(callback);\n\t}\n\n\t/**\n\t * Send the sounds status through the channel\n\t * @param soundStatus\n\t */\n\tpublic sendSoundStatus(soundStatus: boolean): void {\n\t\tthis.bridge.emitEvent(\"SOUND_STATUS\", soundStatus);\n\t}\n\n\t/**\n\t * Show and track error message.\n\t * @param error Error catch when promise is rejected.\n\t */\n\tpublic onError(error: any): void {\n\t\tlet text = this.t(\"default\", \"error\") || \"Unknown error\";\n\t\tif (error.code) {\n\t\t\ttext = this.t(error.code, \"error\");\n\t\t}\n\t\ttracker.track(new ErrorEvent(text));\n\n\t\tthis.messageManager\n\t\t\t.display({\n\t\t\t\tcode: error ? error.code : \"default\",\n\t\t\t\ttype: EMessageType.Immediate,\n\t\t\t\tpopup: {\n\t\t\t\t\tlevel: EPopinLevel.Error,\n\t\t\t\t\ttext,\n\t\t\t\t\tclosable: false,\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: this.t(\"close\", \"ui\") || \"Close game\",\n\t\t\t\t\t\t\taction: PopinButtonAction.CloseGame,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tcontext: error.context,\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t// nothing to do in this case\n\t\t\t});\n\t}\n\n\t/**\n\t * populate Notifications.\n\t * @param response the response containing the notifications to draw later\n\t */\n\tpublic populateNotifications(response: any): void {\n\t\tlet messages: IAlert[] = response.serverMessage;\n\n\t\tif (Array.isArray(messages) && messages.length > 0) {\n\t\t\tthis.notifications = [];\n\t\t\tmessages = messages.filter((m) => m.id !== \"NO_ACTION\");\n\t\t\tif (messages.length > 0) {\n\t\t\t\t// legacy\n\t\t\t\tthis.notifications.push(messages[0]);\n\t\t\t}\n\t\t}\n\n\t\t// handle inGameMessaging\n\t\tif (response.message) {\n\t\t\tthis.messageManager.push(response.message).finally();\n\t\t}\n\t}\n}\n","import { Com, ITrigger } from \"./com\";\nimport {\n\tPopin,\n\tIPopinDefinition,\n\tIPopinButton,\n\tIPopinLink,\n\tEPopinLevel,\n\tPopinButtonAction,\n\tPopinLinkTarget,\n} from \"./popin/index\";\nimport { EMessageType, IMessage, MessageManager } from \"./messageManager/index\";\n\nexport {\n\tCom,\n\tITrigger,\n\tPopin,\n\tIPopinDefinition,\n\tIPopinButton,\n\tIPopinLink,\n\tEPopinLevel,\n\tPopinButtonAction,\n\tPopinLinkTarget,\n\tEMessageType,\n\tIMessage,\n\tMessageManager,\n};\n","import type { IPopinDefinition } from \"../popin/index\";\n\n/**\n * When to display the message.\n */\nexport enum EMessageType {\n\t/**\n\t * Immediatly after the call of the message manager.\n\t */\n\tImmediate = \"immediate\",\n\t/**\n\t * At the end of a game.\n\t */\n\tEnd = \"end\",\n}\n\n/**\n * Definition of an inGame message.\n */\nexport interface IMessage {\n\t/**\n\t * Error code.\n\t */\n\tcode: string;\n\t/**\n\t * When to display the message.\n\t */\n\ttype?: EMessageType;\n\t/**\n\t * Popin definition.\n\t */\n\tpopup?: IPopinDefinition;\n\t/**\n\t * Context in case of an IF error\n\t */\n\tcontext?: {\n\t\tcode: string;\n\t\tmessage: string;\n\t};\n}\n","export { EMessageType, IMessage } from \"./definitions\";\n\nexport { MessageManager } from \"./messageManager\";\n","import { EMessageType } from \"./definitions\";\nimport { Popin } from \"../popin/index\";\nimport type { IMessage } from \"./definitions\";\nimport type { IPopinActions } from \"../popin/index\";\nimport type { Com } from \"..\";\n\n/**\n * InGame message manager. Displays popins.\n */\nexport class MessageManager {\n\tprivate _messages: IMessage[] = [];\n\tprivate _com: Com;\n\tprivate _messageDisplayStack: Promise<void> = Promise.resolve();\n\n\tpublic constructor(com: Com) {\n\t\tthis._com = com;\n\t}\n\n\t/**\n\t * Push one or multiples messages to be displayed immediatly or at the end of the game\n\t * regarding the provided configuration\n\t * @param message message.s to display\n\t */\n\tpublic async push(message: IMessage | IMessage[]): Promise<void> {\n\t\tif (Array.isArray(message)) {\n\t\t\tawait Promise.all(message.map((each) => this._pushOne(each)));\n\t\t} else {\n\t\t\tawait this._pushOne(message);\n\t\t}\n\t}\n\n\t/**\n\t * Remove all messages waiting to be displayed.\n\t */\n\tpublic reset(): void {\n\t\tthis._messages.length = 0;\n\t}\n\n\t/**\n\t * Display all messages waiting for GameEnd event\n\t */\n\tpublic async onGameEnd(): Promise<void> {\n\t\tawait Promise.all(this._messages.map((message) => this.display(message)));\n\t\tthis.reset();\n\t}\n\n\t/**\n\t * Display a popin message\n\t * We first ask the lottery frontsite to display the message\n\t * without positive response we handle the popin ourself\n\t * @param message message to display\n\t */\n\tpublic async display(message: IMessage): Promise<void> {\n\t\tthis._messageDisplayStack = this._messageDisplayStack.then(async () => {\n\t\t\tthis._com.game.pause(\"messagemanager\");\n\n\t\t\ttry {\n\t\t\t\tawait new Promise((resolve, reject) => {\n\t\t\t\t\t// bridge promises are shitty, so we have to wrap them to be able to await them\n\t\t\t\t\t(this._com.bridge.executeAction(\"OPEN_POPUP\", message) as any)\n\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t.catch(reject);\n\t\t\t\t});\n\t\t\t} catch (up) {\n\t\t\t\tthis._com.game.showInteractivityOverlay();\n\t\t\t\tawait Popin.display(message.popup, {\n\t\t\t\t\tcloseGame: () => {\n\t\t\t\t\t\tthis._com.bridge.executeAction(\"CLOSE_GAME\");\n\t\t\t\t\t},\n\t\t\t\t\trefreshGame: () => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t},\n\t\t\t\t} as IPopinActions);\n\t\t\t\tthis._com.game.removeInteractivityOverlay();\n\t\t\t}\n\n\t\t\tthis._com.game.unpause(\"messagemanager\");\n\t\t});\n\n\t\tawait this._messageDisplayStack;\n\t}\n\n\tprivate async _pushOne(message: IMessage): Promise<void> {\n\t\tif (message.type === EMessageType.Immediate) {\n\t\t\tawait this.display(message);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._messages.push(message);\n\t}\n}\n","import type { Popin } from \"./popin\";\n\n/**\n * Log level\n */\nexport enum EPopinLevel {\n\tInfo = \"info\",\n\tWarning = \"warning\",\n\tError = \"error\",\n}\n\n/**\n * Interface defining popin options & content\n */\nexport interface IPopinDefinition {\n\t/**\n\t * Log level.\n\t */\n\tlevel: EPopinLevel;\n\t/**\n\t * Title of the popin.\n\t */\n\ttitle?: string;\n\t/**\n\t * Content of the popin.\n\t */\n\tcontent?: string;\n\t/**\n\t * Alias for content.\n\t */\n\ttext?: string;\n\t/**\n\t * Display a close button in the top right of the popin.\n\t */\n\tclosable?: boolean;\n\t/**\n\t * Give possibility fo close the popin by clicking on the background overlay.\n\t */\n\tclickOutsideToClose?: boolean;\n\t/**\n\t * List of buttons for the popin.\n\t */\n\tbuttons?: IPopinButton[];\n\t/**\n\t * For overriding the popin CSS.\n\t */\n\tstyle?: { [key: string]: string | number };\n\t/**\n\t * For overriding the title CSS.\n\t */\n\ttitleStyle?: { [key: string]: string | number };\n\t/**\n\t * For overriding the text CSS.\n\t */\n\ttextStyle?: { [key: string]: string | number };\n}\n\n/**\n * List of actions available for a popin button.\n */\nexport enum PopinButtonAction {\n\t/**\n\t * Open a link.\n\t */\n\tLink = \"link\",\n\t/**\n\t * Close the popin.\n\t */\n\tClosePopin = \"closePopup\",\n\t/**\n\t * Close the game through the bridge.\n\t */\n\tCloseGame = \"closeGame\",\n\t/**\n\t * Refresh the game.\n\t */\n\tRefreshGame = \"refreshGame\",\n\t/**\n\t * Call a callback with the popin as argument.\n\t */\n\tCallback = \"callback\",\n}\n\n/**\n * Set type of link.\n */\nexport enum PopinLinkTarget {\n\t/**\n\t * Open the link in an another page.\n\t */\n\tBlank = \"blank\",\n\t/**\n\t * Open the link in the current page.\n\t */\n\tSelf = \"self\",\n}\n\n/**\n * Definition of a link for a popin link button.\n */\nexport interface IPopinLink {\n\t/**\n\t * Target of the link.\n\t */\n\turl: string;\n\t/**\n\t * Type of link.\n\t */\n\ttarget: PopinLinkTarget;\n}\n\n/**\n * Definition of a popin button.\n */\nexport interface IPopinButton {\n\t/**\n\t * Label of the button.\n\t */\n\tlabel: string;\n\t/**\n\t * Type of click action.\n\t */\n\taction: PopinButtonAction;\n\t/**\n\t * Optionnal link definition for a Link button.\n\t */\n\tlink?: IPopinLink;\n\t/**\n\t * Optionnal callback for a Callback button.\n\t * Provide the Popin as argument.\n\t */\n\tcallback?: (self: Popin) => void;\n\t/**\n\t * For overriding the button CSS;\n\t */\n\tstyle?: { [key: string]: string | number };\n}\n\n/**\n * Actions available for a Popin.\n */\nexport interface IPopinActions {\n\t/**\n\t * Close the game through the bridge.\n\t */\n\tcloseGame: () => void;\n\t/**\n\t * Refresh game\n\t */\n\trefreshGame: () => void;\n}\n","export { Popin } from \"./popin\";\n\nexport {\n\tEPopinLevel,\n\tIPopinDefinition,\n\tPopinButtonAction,\n\tIPopinButton,\n\tIPopinLink,\n\tIPopinActions,\n\tPopinLinkTarget,\n} from \"./definitions\";\n","import { Tools } from \"@gdk/core\";\n\nimport { PopinButtonAction, PopinLinkTarget } from \"./definitions\";\nimport \"./style.less\";\nimport type { IPopinDefinition, IPopinButton, IPopinActions } from \"./definitions\";\n\n/**\n * InGame HTML Popin\n */\nexport class Popin {\n\tprotected static instances: Popin[] = [];\n\tprotected static _defaultOrientation: undefined | \"portrait\" | \"landscape\";\n\n\tpublic static wrapper: HTMLElement;\n\n\t/**\n\t * Define popin orientation. If not set, popin will follow natural page orientation.\n\t * If specified, and if it does not match page orientation, popups will be rotated\n\t * to fit with the new orientation.\n\t * This is useful when game orientation differs from device orientation.\n\t */\n\tpublic static set defaultOrientation(orientation: \"portrait\" | \"landscape\") {\n\t\tthis._defaultOrientation = orientation;\n\n\t\t// update existing popins\n\t\tfor (const instance of Popin.instances) {\n\t\t\tinstance.orientation = orientation;\n\t\t}\n\t}\n\n\t/**\n\t * Instantiate and display a popin\n\t * @param definition popin definition\n\t * @param actions callback actions\n\t */\n\tpublic static async display(definition: IPopinDefinition, actions: IPopinActions): Promise<void> {\n\t\tconst popin = new Popin(definition, actions);\n\t\tawait popin.display();\n\t}\n\n\tprivate _definition: IPopinDefinition;\n\tprivate _actions: IPopinActions;\n\tprivate _domElement: HTMLElement;\n\tprivate _notifyClosed: () => void;\n\n\tpublic constructor(definition: IPopinDefinition, actions: IPopinActions) {\n\t\tthis._definition = definition;\n\t\tthis._actions = actions;\n\t\tthis._configure();\n\t\tPopin.instances.push(this);\n\t}\n\n\tpublic dispose(): void {\n\t\tconst index = Popin.instances.indexOf(this);\n\t\tif (index >= 0) {\n\t\t\tPopin.instances.splice(index, 1);\n\t\t}\n\t}\n\n\t/**\n\t * Change popin orientation, rotate it if orientation is not the same as device\n\t * orientation (rotation is applied through css tranform, thanks to classes \"portrait\"\n\t * and \"landscape\").\n\t */\n\tpublic set orientation(orientation: \"portrait\" | \"landscape\") {\n\t\tconst popin = this._domElement.querySelector(\".gdk-popin\");\n\t\tif (popin !== null) {\n\t\t\tpopin.classList.remove(\"portrait\", \"landscape\");\n\t\t\tpopin.classList.add(orientation);\n\t\t}\n\t}\n\n\t/**\n\t * Display the popin\n\t */\n\tpublic async display(): Promise<void> {\n\t\tconst closed = new Promise<void>((resolve) => {\n\t\t\tthis._notifyClosed = resolve;\n\t\t});\n\n\t\tPopin.wrapper.appendChild(this._domElement);\n\t\t// you have to wait some ticks to be able to trigger the fade-in animation\n\t\tawait new Promise<void>((resolve) => setTimeout(resolve, 10));\n\t\tthis._domElement.classList.add(\"show\");\n\n\t\tawait closed;\n\t}\n\n\t/**\n\t * Close the popin\n\t */\n\tpublic async close(): Promise<void> {\n\t\tif (!this._domElement.classList.contains(\"show\")) {\n\t\t\treturn;\n\t\t}\n\t\t// remove the show animation to trigger de fade-out animation\n\t\tthis._domElement.classList.remove(\"show\");\n\t\tthis._notifyClosed();\n\n\t\tawait new Promise<void>((resolve) => setTimeout(resolve, 200));\n\t\tPopin.wrapper.removeChild(this._domElement);\n\t\tthis.dispose();\n\t}\n\n\tprivate _configure(): void {\n\t\tthis._domElement = document.createElement(\"div\");\n\t\tthis._domElement.setAttribute(\"class\", \"gdk-popin-background\");\n\n\t\tconst popin = document.createElement(\"div\");\n\t\tpopin.setAttribute(\n\t\t\t\"class\",\n\t\t\t[\n\t\t\t\t\"gdk-popin\",\n\t\t\t\t\"gdk-popin-\" + this._definition.level.toString(),\n\t\t\t\tPopin._defaultOrientation ?? \"\",\n\t\t\t]\n\t\t\t\t.join(\" \")\n\t\t\t\t.trim()\n\t\t);\n\n\t\tpopin.innerHTML += `<div class=\"gdk-popin-title\">${this._definition.title || \"&nbsp\"}</div>`;\n\t\tif (this._definition.titleStyle) {\n\t\t\tconst title = popin.getElementsByClassName(\"gdk-popin-title\")[0] as HTMLElement;\n\t\t\tTools.assign(title.style, this._definition.titleStyle);\n\t\t}\n\n\t\tpopin.innerHTML += `<div class=\"gdk-popin-text\">${\n\t\t\tthis._definition.content || this._definition.text || \"&nbsp\"\n\t\t}</div>`;\n\t\tif (this._definition.textStyle) {\n\t\t\tconst text = popin.getElementsByClassName(\"gdk-popin-text\")[0] as HTMLElement;\n\t\t\tTools.assign(text.style, this._definition.textStyle);\n\t\t}\n\n\t\tif (this._definition.buttons && this._definition.buttons.length) {\n\t\t\tconst buttons = this._getButtons();\n\t\t\tpopin.appendChild(buttons);\n\t\t}\n\n\t\tif (this._definition.closable !== false) {\n\t\t\tconst closeCross = this._getCloseCross();\n\t\t\tpopin.appendChild(closeCross);\n\t\t}\n\n\t\tif (this._definition.style) {\n\t\t\tTools.assign(popin.style, this._definition.style);\n\t\t}\n\n\t\tthis._domElement.appendChild(popin);\n\n\t\tif (this._definition.clickOutsideToClose) {\n\t\t\tconst closeLayer = this._getCloseLayer();\n\t\t\tthis._domElement.appendChild(closeLayer);\n\t\t}\n\t}\n\n\tprivate _getButtons(): HTMLElement {\n\t\tconst buttons = document.createElement(\"div\");\n\t\tbuttons.setAttribute(\"class\", \"gdk-popin-buttons\");\n\n\t\tfor (const buttonDefinition of this._definition.buttons) {\n\t\t\tbuttons.appendChild(this._getButton(buttonDefinition));\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\tprivate _getButton(definition: IPopinButton): HTMLElement {\n\t\tconst wrapper = document.createElement(\"div\");\n\t\twrapper.setAttribute(\"class\", \"gdk-popin-button-wrapper\");\n\t\twrapper.innerHTML = `<div class=\"gdk-popin-button gdk-popin-button-${definition.action}\">${definition.label}</div>`;\n\n\t\tif (definition.style) {\n\t\t\tconst button = wrapper.firstChild as HTMLElement;\n\t\t\tTools.assign(button.style, definition.style);\n\t\t}\n\n\t\twrapper.firstChild.addEventListener(\"click\", this._getButtonAction(definition));\n\n\t\treturn wrapper;\n\t}\n\n\tprivate _getButtonAction(definition: IPopinButton): () => void {\n\t\tswitch (definition.action) {\n\t\t\tcase PopinButtonAction.ClosePopin: {\n\t\t\t\treturn this.close.bind(this);\n\t\t\t}\n\t\t\tcase PopinButtonAction.CloseGame: {\n\t\t\t\treturn this._actions.closeGame;\n\t\t\t}\n\t\t\tcase PopinButtonAction.RefreshGame: {\n\t\t\t\treturn this._actions.refreshGame;\n\t\t\t}\n\t\t\tcase PopinButtonAction.Callback: {\n\t\t\t\treturn definition.callback.bind({}, this);\n\t\t\t}\n\t\t\tcase PopinButtonAction.Link: {\n\t\t\t\tif (!definition.link) {\n\t\t\t\t\treturn () => undefined;\n\t\t\t\t}\n\t\t\t\tif (definition.link.target === PopinLinkTarget.Self) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\twindow.location.href = definition.link.url;\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\twindow.open(definition.link.url);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn () => undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _getCloseCross(): HTMLElement {\n\t\tconst closeCross = document.createElement(\"a\");\n\t\tcloseCross.setAttribute(\"class\", \"gdk-popin-close\");\n\t\tcloseCross.addEventListener(\"click\", this.close.bind(this));\n\t\treturn closeCross;\n\t}\n\n\tprivate _getCloseLayer(): HTMLElement {\n\t\tconst closeLayer = document.createElement(\"div\");\n\t\tcloseLayer.setAttribute(\"class\", \"gdk-popin-click-layer\");\n\t\tcloseLayer.addEventListener(\"click\", this.close.bind(this));\n\t\treturn closeLayer;\n\t}\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/less-loader/dist/cjs.js!./style.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/less-loader/dist/cjs.js!./style.less\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/less-loader/dist/cjs.js!./style.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import {\n\tISoftDSVIButtonsOptions,\n\tIDSPopinsContainerOptions,\n\tEGameStates,\n\tDSPopinsContainer,\n} from \"./popinsContainer\";\nimport { IDSVIButtonsOptions } from \"./viButtons\";\n\nexport {\n\tISoftDSVIButtonsOptions,\n\tIDSPopinsContainerOptions,\n\tEGameStates,\n\tDSPopinsContainer,\n\tIDSVIButtonsOptions,\n};\n","import { Container, extras, Texture, Sprite, Point } from \"pixi.js\";\nimport { Button, DockingBounds, Docking, Stackable } from \"@gdk/core-pixi\";\n\nimport { DSPopin } from \"./popin\";\nimport type { IDSPopinOptions } from \"./popin\";\n\nconst BUTTON_IDLE = \"buttons/primary/idle\";\nconst BUTTON_OVER = \"buttons/primary/over\";\nconst BUTTON_DISABLED = \"buttons/primary/idle\";\nconst LEFT_TOP_RIGHT = 30;\nconst BOTTOM = 40;\nconst BUTTONS_SPACE = 80;\nconst BULLETS_SPACE = 60;\nconst DEFAULT_COLOR = \"#000000\";\nconst BULLET_BUTTONS_HEIGHT = -150;\nconst BULLET_HEIGHT = -40;\nconst BULLET = \"icons/color/bullet-\";\nconst BULLET_ON = `${BULLET}on`;\nconst BULLET_OFF = `${BULLET}off`;\nconst CIRCLE = \"backgrounds/white/circle\";\nconst ARROW = \"icons/color/arrow\";\n\nexport interface IDSPaginatedPopinOptions extends IDSPopinOptions {\n\tslides: Container[];\n\tbuttonColor?: string;\n\tleftButtonLabel?: string;\n\trightButtonLabel?: string;\n\tonLeft?: () => Promise<void>;\n\tonRight?: () => Promise<void>;\n}\n\nexport class DSPaginatedPopin extends DSPopin {\n\tprivate leftButton?: Button;\n\tprivate rightButton?: Button;\n\tprivate bullets: extras.AnimatedSprite[] = [];\n\tprivate bulletContainer?: Container;\n\tprivate slides: Container[] = [];\n\tprivate slideContainer?: Container;\n\tprivate previousButton?: Button;\n\tprivate nextButton?: Button;\n\n\tprivate _currentSlide?: number;\n\n\tpublic constructor(options: IDSPaginatedPopinOptions) {\n\t\tsuper(options);\n\n\t\tthis.content.dockingBounds = new DockingBounds(DSPopin.minWidth, BUTTONS_SPACE);\n\n\t\tif (options.leftButtonLabel && options.rightButtonLabel) {\n\t\t\tthis.addButtons(options);\n\t\t}\n\n\t\tif (options.slides.length > 1) {\n\t\t\tthis.setSlides(options);\n\t\t} else {\n\t\t\tthis.setContent(options);\n\t\t}\n\t}\n\n\tprivate setContent(options: IDSPaginatedPopinOptions): void {\n\t\tthis.slideContainer = new Container();\n\t\tthis.slideContainer.dockingBounds = new DockingBounds(0, 0);\n\t\tthis.content.addChild(this.slideContainer);\n\n\t\tthis.bulletContainer = new Container();\n\n\t\tconst slide = options.slides[0];\n\t\tif (slide.parent) {\n\t\t\tslide.parent.removeChild(slide);\n\t\t}\n\n\t\tthis.slides.push(slide);\n\t\tthis.slideContainer.addChild(slide);\n\n\t\tif (slide.dockingBounds.width > this.slideContainer.dockingBounds.width) {\n\t\t\tthis.slideContainer.dockingBounds.width = slide.dockingBounds.width;\n\t\t}\n\n\t\tif (slide.dockingBounds.height > this.slideContainer.dockingBounds.height) {\n\t\t\tthis.slideContainer.dockingBounds.height = slide.dockingBounds.height;\n\t\t}\n\t}\n\n\tprivate setSlides(options: IDSPaginatedPopinOptions): void {\n\t\tthis.slideContainer = new Container();\n\t\tthis.slideContainer.dockingBounds = new DockingBounds(0, 0);\n\t\tthis.content.addChild(this.slideContainer);\n\n\t\tthis.bulletContainer = new Container();\n\n\t\tfor (const slide of options.slides) {\n\t\t\tif (slide.parent) {\n\t\t\t\tslide.parent.removeChild(slide);\n\t\t\t}\n\n\t\t\tthis.slides.push(slide);\n\n\t\t\tif (slide.dockingBounds.width > this.slideContainer.dockingBounds.width) {\n\t\t\t\tthis.slideContainer.dockingBounds.width = slide.dockingBounds.width;\n\t\t\t}\n\n\t\t\tif (slide.dockingBounds.height > this.slideContainer.dockingBounds.height) {\n\t\t\t\tthis.slideContainer.dockingBounds.height = slide.dockingBounds.height;\n\t\t\t}\n\n\t\t\tconst bullet = new extras.AnimatedSprite([\n\t\t\t\tTexture.fromImage(BULLET_OFF),\n\t\t\t\tTexture.fromImage(BULLET_ON),\n\t\t\t]);\n\n\t\t\tbullet.anchor.x = 0;\n\t\t\tbullet.anchor.y = 0;\n\t\t\tbullet.x = this.bullets.length * bullet.width;\n\t\t\tthis.bulletContainer.addChild(bullet);\n\t\t\tthis.bullets.push(bullet);\n\t\t}\n\n\t\tthis.bulletContainer.dockingBounds = new DockingBounds(\n\t\t\tthis.bulletContainer.width,\n\t\t\tthis.bulletContainer.height\n\t\t);\n\t\tthis.bulletContainer.docking = new Docking(Docking.bottomCenterHorizontal);\n\t\tthis.addChild(this.bulletContainer);\n\n\t\tthis.setArrows();\n\t}\n\n\t/**\n\t * Show the active buttons\n\t *\n\t * @access public\n\t * @param {boolean} withButtons=false, Must the popup have buttons or only the close one\n\t */\n\tpublic show(withButtons: boolean = false): void {\n\t\tif (this.leftButton && this.rightButton) {\n\t\t\tthis.leftButton.visible = withButtons;\n\t\t\tthis.rightButton.visible = withButtons;\n\t\t}\n\n\t\tthis.closeButton.visible = !withButtons;\n\n\t\tthis.currentSlide = 0;\n\n\t\tsuper.show();\n\t}\n\n\t/**\n\t * Set the current slide, it will also set the correct dot in slide progression\n\t *\n\t * @access public\n\t * @param {number} slide, The slide id for activation\n\t */\n\tpublic set currentSlide(slide: number) {\n\t\tif (this.slides.length > 1) {\n\t\t\tif (slide >= this.slides.length) {\n\t\t\t\tslide = 0;\n\t\t\t} else if (slide < 0) {\n\t\t\t\tslide = this.slides.length - 1;\n\t\t\t}\n\n\t\t\tif (this.bullets.length > 1) {\n\t\t\t\tthis.bullets[this._currentSlide].gotoAndStop(0);\n\t\t\t\tthis.bullets[slide].gotoAndStop(1);\n\t\t\t}\n\n\t\t\tthis._currentSlide = slide;\n\n\t\t\tif (this.slideContainer.children.length) {\n\t\t\t\tthis.slideContainer.removeChildAt(0);\n\t\t\t}\n\n\t\t\tif (this.slides.length) {\n\t\t\t\tthis.slideContainer.addChild(this.slides[this.currentSlide]);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Return the current slide id\n\t *\n\t * @access public\n\t * @returns {number} The current slide id\n\t */\n\tpublic get currentSlide(): number {\n\t\treturn this._currentSlide;\n\t}\n\n\t/**\n\t * Resize the popin according to content\n\t *\n\t * @access public\n\t */\n\tpublic resizePopin(): void {\n\t\tthis.content.dockingBounds.width = this.slideContainer.dockingBounds.width;\n\t\tif (this.leftButton && this.leftButton.visible) {\n\t\t\tthis.content.dockingBounds.height = this.slideContainer.dockingBounds.height;\n\n\t\t\tif (this.bullets.length > 1) {\n\t\t\t\tthis.bulletContainer.docking.y = BULLET_BUTTONS_HEIGHT;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.content.dockingBounds.height = this.slideContainer.dockingBounds.height;\n\n\t\t\tif (this.bullets.length > 1) {\n\t\t\t\tthis.bulletContainer.docking.y = BULLET_HEIGHT;\n\t\t\t}\n\t\t}\n\n\t\t// this.buttonStack.y = this.content.dockingBounds.height - this.buttonStack.height * .5 + 10;\n\n\t\tif (this.bullets.length > 1) {\n\t\t\tthis.content.dockingBounds.height += BULLETS_SPACE;\n\t\t}\n\n\t\tif (this.content.dockingBounds.width < DSPopin.minWidth) {\n\t\t\tthis.content.dockingBounds.width = DSPopin.minWidth;\n\t\t}\n\n\t\tsuper.resizePopin();\n\n\t\t// this.buttonStack.x = (this.content.dockingBounds.width - this.buttonStack.width) * .5;\n\t}\n\n\tprivate setArrows(): void {\n\t\tfor (const key of [\"previousButton\", \"nextButton\"]) {\n\t\t\tthis[key] = new Button({\n\t\t\t\tidleTexture: CIRCLE,\n\t\t\t\toverTexture: CIRCLE,\n\t\t\t\tclickedTexture: CIRCLE,\n\t\t\t\tdisabledTexture: CIRCLE,\n\t\t\t});\n\t\t\tthis[key].isNineSlice = true;\n\t\t\tthis[key].scaleXY = 1.4;\n\t\t\tthis[key].dockingBounds = new DockingBounds(this[key].width, this[key].height);\n\n\t\t\tif (key === \"previousButton\") {\n\t\t\t\tthis[key].docking = new Docking(Docking.centerVerticalLeft, 0, 20, false);\n\t\t\t} else {\n\t\t\t\tthis[key].docking = new Docking(Docking.centerVerticalRight, -0, 20, false);\n\t\t\t\tthis[key].scaleX *= -1;\n\t\t\t}\n\t\t\tthis[key].pivot = new Point(50, 45);\n\n\t\t\tconst arrow = Sprite.fromFrame(ARROW);\n\t\t\tarrow.x = 50;\n\t\t\tarrow.y = 45;\n\t\t\tthis[key].addChild(arrow);\n\t\t\tthis.addChild(this[key]);\n\t\t}\n\n\t\tthis._currentSlide = 0;\n\t\tthis.currentSlide = 0;\n\n\t\tthis.previousButton.on(\"pointertap\", () => {\n\t\t\tthis.currentSlide--;\n\t\t});\n\n\t\tthis.nextButton.on(\"pointertap\", () => {\n\t\t\tthis.currentSlide++;\n\t\t});\n\t}\n\n\tprivate addButtons(options: IDSPaginatedPopinOptions): void {\n\t\tfor (const key of [\"leftButton\", \"rightButton\"]) {\n\t\t\tthis[key] = new Button(\n\t\t\t\t{\n\t\t\t\t\tidleTexture: BUTTON_IDLE,\n\t\t\t\t\toverTexture: BUTTON_OVER,\n\t\t\t\t\tclickedTexture: BUTTON_IDLE,\n\t\t\t\t\tdisabledTexture: BUTTON_DISABLED,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\t\tfontSize: DSPopin.buttonFontSize,\n\t\t\t\t\t\tfill: options.buttonColor ? options.buttonColor : DEFAULT_COLOR,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\toptions[`${key}Label`]\n\t\t\t);\n\t\t\t// this[key].docking = new Docking(key === \"leftButton\" ? Docking.bottomLeft : Docking.bottomRight);\n\n\t\t\tthis[key].isNineSlice = true;\n\t\t\tthis[key].backgroundNineSlice.leftWidth = LEFT_TOP_RIGHT;\n\t\t\tthis[key].backgroundNineSlice.topHeight = LEFT_TOP_RIGHT;\n\t\t\tthis[key].backgroundNineSlice.rightWidth = LEFT_TOP_RIGHT;\n\t\t\tthis[key].backgroundNineSlice.bottomHeight = BOTTOM;\n\n\t\t\tthis[key].nineSliceMinSize.x = 320;\n\t\t\tthis[key].nineSliceMinSize.y = 70;\n\n\t\t\tthis[key].nineSlicePadding.x = 20;\n\t\t\tthis[key].nineSlicePadding.y = 21;\n\t\t\tthis[key].nineSlicePadding.width = 20;\n\t\t\tthis[key].nineSlicePadding.height = 22;\n\n\t\t\tthis[key].on(\"pointertap\", () => {\n\t\t\t\tthis.executeButtonCallback(key === \"leftButton\" ? options.onLeft : options.onRight);\n\t\t\t});\n\n\t\t\tthis.buttonStack.push(this[key], false);\n\t\t\t// this.content.addChild(this[key]);\n\t\t\t// Useful for resizing a niceSlice Button\n\t\t\tthis[key].label = this[key].label;\n\t\t}\n\t}\n\n\tprotected activateButtons(activate: boolean): void {\n\t\tfor (const key of [\"leftButton\", \"rightButton\", \"closeButton\"]) {\n\t\t\tif (this[key]) {\n\t\t\t\tthis[key].enabled = activate;\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Container, mesh, Texture, Sprite, Point } from \"pixi.js\";\nimport {\n\tButton,\n\tDocking,\n\tTextField,\n\tDockingBounds,\n\tEAlign,\n\tStackable,\n\tResize,\n} from \"@gdk/core-pixi\";\n\nimport type { ShineableButton } from \"./shineableButton\";\n\nconst FILL = \"card/fill\";\nconst BORDER = \"card/outline\";\nconst CLOSE = \"backgrounds/white/circle\";\nconst CROSS = \"icons/color/cross\";\nconst RADIUS = 30;\nconst MARGIN = 30;\nconst DEFAULT_COLOR = \"#000000\";\n\nexport interface IDSPopinOptions {\n\tcontent?: Container;\n\ttitle: string;\n\ttitleColor?: string;\n\tonClose?: () => Promise<void>;\n}\n\nexport abstract class DSPopin extends Container {\n\tpublic static minWidth: number = 768;\n\tpublic static textFontSize: number = 36;\n\tpublic static titleFontSize: number = 50;\n\tpublic static buttonFontSize: number = 36;\n\tpublic static menuButtonFontSize: number = 32;\n\n\tprivate fill: mesh.NineSlicePlane;\n\tprivate border: mesh.NineSlicePlane;\n\tprivate onClose?: () => Promise<void>;\n\n\tprotected title: TextField;\n\tprotected content: Container;\n\tprotected closeButton: Button;\n\tprotected buttonStack: Stackable<Button | ShineableButton>;\n\n\tpublic constructor(options: IDSPopinOptions) {\n\t\tsuper();\n\n\t\tthis.content = options.content || new Container();\n\t\tif (!this.content.dockingBounds) {\n\t\t\tthis.content.dockingBounds = new DockingBounds(0, 0);\n\t\t}\n\t\tthis.onClose = options.onClose;\n\n\t\tthis.buttonStack = new Stackable({ direction: \"right\", spacing: 20 });\n\t\tthis.buttonStack.width = 0;\n\t\tthis.buttonStack.height = 0;\n\t\tthis.buttonStack.dockingBounds = new DockingBounds();\n\t\tthis.buttonStack.docking = new Docking(Docking.bottomCenterHorizontal);\n\t\tthis.content.addChild(this.buttonStack);\n\n\t\tthis.fill = new mesh.NineSlicePlane(Texture.fromFrame(FILL), RADIUS, RADIUS, RADIUS, RADIUS);\n\t\tthis.addChild(this.fill);\n\n\t\tthis.border = new mesh.NineSlicePlane(\n\t\t\tTexture.fromFrame(BORDER),\n\t\t\tRADIUS,\n\t\t\tRADIUS,\n\t\t\tRADIUS,\n\t\t\tRADIUS\n\t\t);\n\t\tthis.addChild(this.border);\n\n\t\tthis.closeButton = new Button({\n\t\t\tidleTexture: CLOSE,\n\t\t\toverTexture: CLOSE,\n\t\t\tclickedTexture: CLOSE,\n\t\t\tdisabledTexture: CLOSE,\n\t\t});\n\t\tthis.closeButton.isNineSlice = true;\n\t\tthis.closeButton.scaleXY = 1.1;\n\t\tthis.closeButton.dockingBounds = new DockingBounds(1, 1);\n\t\tthis.closeButton.docking = new Docking(Docking.topRight, -20, 20, false);\n\t\tthis.closeButton.pivot = new Point(50, 45);\n\t\tconst cross = Sprite.fromFrame(CROSS);\n\t\tcross.x = 50;\n\t\tcross.y = 45;\n\t\tthis.closeButton.addChild(cross);\n\t\tthis.addChild(this.closeButton);\n\n\t\tthis.closeButton.on(\"pointertap\", () => {\n\t\t\tthis.executeButtonCallback(this.onClose);\n\t\t});\n\n\t\tconst titleColor = options.titleColor ? options.titleColor : DEFAULT_COLOR;\n\t\tthis.title = new TextField(\n\t\t\toptions.title,\n\t\t\t{\n\t\t\t\tdefault: {\n\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\tfontSize: DSPopin.titleFontSize,\n\t\t\t\t\tfill: titleColor,\n\t\t\t\t\tstroke: titleColor,\n\t\t\t\t\tstrokeOffsetX: 0,\n\t\t\t\t\tstrokeOffsetY: 0,\n\t\t\t\t\tstrokeWidth: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tnoUpdate: true,\n\t\t\t}\n\t\t);\n\t\tthis.title.freeze();\n\t\tthis.title.wordWrap = true;\n\t\tthis.title.width = DSPopin.minWidth;\n\t\tthis.title.align = EAlign.Center;\n\t\tthis.title.docking = new Docking(Docking.topCenterHorizontal, 0, 20);\n\t\tthis.title.unfreeze();\n\t\tthis.addChild(this.title);\n\n\t\tthis.addChild(this.content);\n\n\t\tthis.dockingBounds = new DockingBounds();\n\t}\n\n\t/**\n\t * Resize the popin to fit content\n\t *\n\t * @access public\n\t */\n\tpublic resizePopin(): void {\n\t\tconst maxSize = Math.max(768, this.dockingBounds.width) - MARGIN * 2;\n\t\tconst remainingSpace = maxSize - this.buttonStack.width - this.buttonStack.spacing;\n\t\tconst spacing = Math.min(remainingSpace / 3, 30);\n\n\t\tthis.buttonStack.spacing = spacing;\n\t\tthis.buttonStack.dockingBounds.width = this.buttonStack.width;\n\t\tthis.buttonStack.dockingBounds.height = this.buttonStack.docking.y = this.buttonStack.height;\n\n\t\tlet height = this.title.y + this.title.height + MARGIN;\n\t\tlet width = this.title.width + 2 * MARGIN;\n\n\t\tthis.content.y = height;\n\t\theight += this.content.dockingBounds.height + MARGIN + this.buttonStack.height;\n\t\tif (this.content.dockingBounds.width + 2 * MARGIN > width) {\n\t\t\twidth = this.content.dockingBounds.width + 2 * MARGIN;\n\t\t}\n\n\t\tthis.fill.height = height;\n\t\tthis.fill.width = width;\n\t\tthis.border.height = height;\n\t\tthis.border.width = width;\n\t\tthis.dockingBounds.height = height;\n\t\tthis.dockingBounds.width = width;\n\n\t\tthis.updateTransform();\n\n\t\tthis.content.x = (this.dockingBounds.width - this.content.dockingBounds.width) * 0.5;\n\n\t\t// this.buttonStack.x = (this.dockingBounds.width - this.buttonStack.width) * 0.5;\n\t\t// this.buttonStack.y = this.dockingBounds.height - this.buttonStack.height;\n\t\t// this.buttonStack.x = (this.content.dockingBounds.width - this.buttonStack.width) * .5;\n\t}\n\n\t/**\n\t * Show the popin\n\t *\n\t * @access public\n\t */\n\tpublic show(): void {\n\t\tthis.activateButtons(true);\n\n\t\tif (this.parent) {\n\t\t\tthis.resizePopin();\n\t\t}\n\n\t\tthis.visible = true;\n\t}\n\n\tprotected abstract activateButtons(activate: boolean): void;\n\n\tprotected async executeButtonCallback(callback: () => Promise<void>): Promise<void> {\n\t\tthis.activateButtons(false);\n\n\t\ttry {\n\t\t\tif (callback) {\n\t\t\t\tawait callback();\n\t\t\t}\n\n\t\t\tthis.visible = false;\n\t\t} catch (e) {\n\t\t\t// Empty\n\t\t}\n\t}\n}\n","import { Container, Graphics } from \"pixi.js\";\nimport * as i18n from \"i18next\";\nimport { DockingBounds, Docking, TextField, EAlign, Resize, Table } from \"@gdk/core-pixi\";\nimport { EGameMode } from \"@falcon/bridge\";\nimport type { IItgTicket } from \"@falcon/bridge\";\n\nimport { DSTwoButtonsPopin } from \"./twoButtonsPopin\";\nimport { DSWinLosePopin } from \"./winLosePopin\";\nimport { DSPaginatedPopin } from \"./paginatedPopin\";\nimport { DSVIButtons } from \"./viButtons\";\nimport { DSReplayPoptin } from \"./replayPopin\";\nimport { EVisualIdentityEvent, EVisualIdentityAction } from \"../adaptativeVisualIdentity\";\nimport { ETicketStatus, ETicketMode } from \"../game\";\nimport { DSPopin } from \"./popin\";\nimport { BottomBar } from \"../adaptativeVisualIdentity/identities/danskeSpil/views/bottomBar\";\nimport type { Express, Ticket } from \"../game\";\nimport type { IVisualIdentityDesign } from \"../adaptativeVisualIdentity\";\n\nconst BASE_COLOR = \"#000000\";\nconst TABLE_EXTERNAL_MARGIN = 40;\n\nexport type ITicket<T extends Ticket = Ticket> = new (\n\tticket: IItgTicket,\n\tmode: ETicketMode,\n\t_game: Express\n) => T;\n\nexport interface ISoftDSVIButtonsOptions {\n\tonAuto: () => void;\n\tonStop: () => void;\n}\n\nexport interface IDSPopinsContainerOptions {\n\tonStart: () => Promise<void>;\n\tviButtonsCallbacks: ISoftDSVIButtonsOptions;\n\tsecondaryColor?: string;\n\ttitleColor?: string;\n\tgainFontsizes?: {\n\t\tmain?: number;\n\t\tleft?: number;\n\t};\n\tgainMaxLines?: number;\n}\n\nexport enum EGameStates {\n\tFirst = 0,\n\tAfterDemoLose,\n\tAfterDemoWin,\n\tAfterWin,\n\tAfterLose,\n\tAfterReplayWin,\n\tAfterReplayLose,\n}\n\nexport class DSPopinsContainer<\n\tU extends Ticket = Ticket,\n\tT extends ITicket<U> = ITicket<U>\n> extends Container {\n\tpublic static verticalOffset: number = -25;\n\tpublic static verticalOffsetIOS: number = 0;\n\tpublic state: EGameStates = EGameStates.First;\n\n\tprivate _ticket: U;\n\tprivate betPopin: DSTwoButtonsPopin;\n\tprivate demoEndPopin: DSWinLosePopin;\n\tprivate betEndPopin: DSWinLosePopin;\n\tprivate replayEndPopin: DSWinLosePopin;\n\tprivate confirmPopin: DSTwoButtonsPopin;\n\tprivate rules: DSPaginatedPopin;\n\tprivate gainTable: DSPaginatedPopin;\n\tprivate replayPopin: DSReplayPoptin;\n\tprivate resumePopin: DSTwoButtonsPopin;\n\tprivate game: Express;\n\tprivate onStart: () => Promise<void>;\n\tprivate onAuto: () => void;\n\tprivate viButtons: DSVIButtons;\n\tprivate rulesOpen: boolean = false;\n\tprivate popinsOverlay: Graphics;\n\tprivate viOverlay: Graphics;\n\tprivate replayTicketResponse: IItgTicket;\n\tprivate _verticalOffset: number = 0;\n\n\tpublic constructor(options: IDSPopinsContainerOptions, game: Express, private ticketType: T) {\n\t\tsuper();\n\n\t\tthis.dockingBounds = new DockingBounds(\n\t\t\tgame.vi.inGameView.dockingBounds.width + 180, // add some margin for left and right arrows\n\t\t\tgame.vi.inGameView.dockingBounds.height + BottomBar.height\n\t\t); // add bottom bar height\n\n\t\tthis.resize = new Resize(Resize.fitContain);\n\n\t\tthis.game = game;\n\n\t\tthis.setViElements(options);\n\n\t\tthis.popinsOverlay = new Graphics();\n\t\tthis.popinsOverlay.beginFill(0, 0);\n\t\tthis.popinsOverlay.drawRect(0, 0, 1, 1);\n\t\tthis.popinsOverlay.endFill();\n\t\tthis.popinsOverlay.resize = new Resize(Resize.cover);\n\t\tthis.popinsOverlay.interactive = true;\n\t\tthis.addChild(this.popinsOverlay);\n\n\t\tthis.onStart = options.onStart;\n\t\tthis.onAuto = options.viButtonsCallbacks.onAuto;\n\n\t\tthis.on(\"added\", () => {\n\t\t\tthis.onAdded();\n\t\t});\n\n\t\tthis.setBetPopin(options);\n\t\tthis.setDemoEndPopin(options);\n\t\tthis.setBetEndPopin(options);\n\t\tthis.setReplayEndPopin(options);\n\t\tthis.setResumePopin(options);\n\t\tthis.setReplayPopin(options);\n\t\tthis.setConfirmPopin(options);\n\t\tthis.setViAccessableElements(options);\n\n\t\tthis.hideButtons();\n\t\tfor (const child of this.children) {\n\t\t\tchild.visible = false;\n\t\t}\n\t}\n\n\tpublic get ticket(): U {\n\t\treturn this._ticket;\n\t}\n\n\t/**\n\t * Handle the game start.\n\t * It will show the rules if thisit's rulesequired optionsr ask for wich game type this play.\n\t * It will also check for replay or resume if required.\n\t *\n\t * @access public\n\t */\n\tpublic async start(): Promise<void> {\n\t\tthis.hideButtons();\n\t\tfor (const child of this.children) {\n\t\t\tchild.visible = false;\n\t\t}\n\n\t\tthis.replayTicketResponse = await this.game.getTicketToReplay(false);\n\n\t\tif (this.replayTicketResponse) {\n\t\t\tif (this.replayTicketResponse.status === ETicketStatus.CLAIMED) {\n\t\t\t\tthis.popinsOverlay.visible = true;\n\t\t\t\tthis.hideButtons();\n\t\t\t\tthis._ticket = new this.ticketType(\n\t\t\t\t\tthis.replayTicketResponse,\n\t\t\t\t\tETicketMode.REPLAY,\n\t\t\t\t\tthis.game\n\t\t\t\t);\n\t\t\t\tthis.replayPopin.show(false);\n\t\t\t} else {\n\t\t\t\tthis._ticket = new this.ticketType(\n\t\t\t\t\tthis.replayTicketResponse,\n\t\t\t\t\tETicketMode.RESUME,\n\t\t\t\t\tthis.game\n\t\t\t\t);\n\t\t\t\tthis.resumePopin.show(false);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.shouldHideRules) {\n\t\t\t\tthis.toGame();\n\t\t\t} else {\n\t\t\t\tthis.viOverlay.visible = true;\n\t\t\t\tthis.rules.show(true);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * This will hide all the viButtons and deactivate them\n\t *\n\t * @access public\n\t */\n\tpublic hideButtons(): void {\n\t\tthis.viButtons.hideButtons(true);\n\t}\n\n\t/**\n\t * It will handle the end of game. It shows the result popin\n\t *\n\t * @access public\n\t */\n\tpublic end(): void {\n\t\tthis.popinsOverlay.visible = true;\n\t\tthis.hideButtons();\n\n\t\tswitch (this.state) {\n\t\t\tcase EGameStates.AfterDemoLose:\n\t\t\tcase EGameStates.AfterDemoWin:\n\t\t\t\tthis.demoEndPopin.show(true, this.ticket);\n\t\t\t\tbreak;\n\t\t\tcase EGameStates.AfterLose:\n\t\t\tcase EGameStates.AfterWin:\n\t\t\t\tthis.betEndPopin.show(true, this.ticket);\n\t\t\t\tbreak;\n\t\t\tcase EGameStates.AfterReplayLose:\n\t\t\tcase EGameStates.AfterReplayWin:\n\t\t\t\tthis._ticket = new this.ticketType(\n\t\t\t\t\tthis.replayTicketResponse,\n\t\t\t\t\tETicketMode.REPLAY,\n\t\t\t\t\tthis.game\n\t\t\t\t);\n\n\t\t\t\tthis.replayEndPopin.show(false, this._ticket);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Claim the ticket when the game is finished\n\t *\n\t * @access public\n\t * @returns {Promise<void>} The claim promise\n\t */\n\tpublic async claim(): Promise<void> {\n\t\tif (this.ticket.mode === ETicketMode.REPLAY) {\n\t\t\tthis.state =\n\t\t\t\tthis.ticket.wonAmount.value > 0 ? EGameStates.AfterReplayWin : EGameStates.AfterReplayLose;\n\t\t\treturn;\n\t\t}\n\n\t\tconst response = await this.ticket.claim();\n\n\t\tif (this.ticket.demo) {\n\t\t\tthis.state =\n\t\t\t\tresponse.wonAmount.value > 0 ? EGameStates.AfterDemoWin : EGameStates.AfterDemoLose;\n\t\t} else {\n\t\t\tthis.state = response.wonAmount.value > 0 ? EGameStates.AfterWin : EGameStates.AfterLose;\n\t\t}\n\t}\n\n\tprivate async replay(): Promise<void> {\n\t\tawait this.onStart();\n\t\tthis.onAuto();\n\t\tthis.game.vi.emit(EVisualIdentityAction.RulesEnabled, true);\n\t\tthis.game.vi.emit(EVisualIdentityAction.SettingsEnabled, true);\n\t}\n\n\tprivate async handleGameStart(demo: boolean = false): Promise<void> {\n\t\tconst responseTicket = await this.game.bet({\n\t\t\tapplicationId: \"ITG\",\n\t\t\tserviceName: this.game.gameConfig.lotteryGameCode,\n\t\t\tstake: {\n\t\t\t\tcurrency: this.game.selectedStake.currency,\n\t\t\t\tvalue: this.game.selectedStake.value,\n\t\t\t},\n\t\t\tdemo,\n\t\t});\n\n\t\tthis._ticket = new this.ticketType(responseTicket, ETicketMode.DEFAULT, this.game);\n\n\t\tthis.startAndActivateButtons();\n\t\tthis.popinsOverlay.visible = false;\n\t}\n\n\tprivate async startAndActivateButtons(): Promise<void> {\n\t\tawait this.onStart();\n\t\tthis.viButtons.activateAuto();\n\t\tthis.game.vi.emit(EVisualIdentityAction.RulesEnabled, true);\n\t\tthis.game.vi.emit(EVisualIdentityAction.SettingsEnabled, true);\n\t}\n\n\tprivate onHideSettings(): void {\n\t\tif (!this.rulesOpen) {\n\t\t\tthis.viButtons.showActiveButtons();\n\t\t\tthis.game.onRulesQuit();\n\t\t}\n\t}\n\n\tprivate onShowSettings(): void {\n\t\tthis.viButtons.hideButtons();\n\t}\n\n\tprivate showVIGains(): void {\n\t\tthis.game.onRulesOpen();\n\t\tthis.viOverlay.visible = true;\n\t\tthis.rulesOpen = true;\n\t\tthis.rules.visible = false;\n\t\tthis.gainTable.show(false);\n\t}\n\n\tprivate showVIRules(): void {\n\t\tthis.game.onRulesOpen();\n\t\tthis.viOverlay.visible = true;\n\t\tthis.rulesOpen = true;\n\t\tthis.gainTable.visible = false;\n\t\tthis.rules.show(false);\n\t}\n\n\tprivate toGame(): void {\n\t\tthis.popinsOverlay.visible = true;\n\t\tthis.viOverlay.visible = false;\n\t\tthis.game.vi.emit(EVisualIdentityAction.RulesEnabled, true);\n\t\tthis.game.vi.emit(EVisualIdentityAction.SettingsEnabled, true);\n\t\tthis.hideButtons();\n\t\tthis.betPopin.show(false);\n\t}\n\n\tprivate async cancelBet(): Promise<void> {\n\t\tswitch (this.state) {\n\t\t\tcase EGameStates.AfterDemoLose:\n\t\t\tcase EGameStates.AfterDemoWin:\n\t\t\t\tthis.end();\n\t\t\t\tbreak;\n\t\t\tcase EGameStates.AfterLose:\n\t\t\tcase EGameStates.AfterWin:\n\t\t\t\tthis.seeResult();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconst ticketToReplay = await this.game.getTicketToReplay(false);\n\n\t\t\t\tif (ticketToReplay) {\n\t\t\t\t\tif (ticketToReplay.status === ETicketStatus.CLAIMED) {\n\t\t\t\t\t\tthis.popinsOverlay.visible = true;\n\t\t\t\t\t\tthis.hideButtons();\n\t\t\t\t\t\tthis._ticket = new this.ticketType(ticketToReplay, ETicketMode.REPLAY, this.game);\n\t\t\t\t\t\tthis.replayPopin.show(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._ticket = new this.ticketType(ticketToReplay, ETicketMode.RESUME, this.game);\n\t\t\t\t\t\tthis.resumePopin.show(false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.toGame();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate async resume(): Promise<void> {\n\t\tthis.startAndActivateButtons();\n\t\tthis.popinsOverlay.visible = false;\n\t}\n\n\tprivate async confirm(): Promise<void> {\n\t\t// change game mode\n\t\tawait this.game.updateGameMode(EGameMode.normal);\n\n\t\tconst existingTicket = await this.game.getExistingTicket(\n\t\t\tthis.game.gameConfig.lotteryGameCode,\n\t\t\tfalse\n\t\t);\n\n\t\tif (existingTicket) {\n\t\t\tthis._ticket = new this.ticketType(existingTicket, ETicketMode.RESUME, this.game);\n\t\t\tthis.resumePopin.show(false);\n\t\t} else {\n\t\t\tawait this.game.preBet({\n\t\t\t\tapplicationId: \"ITG\",\n\t\t\t\tserviceName: this.game.gameConfig.lotteryGameCode,\n\t\t\t\tstake: {\n\t\t\t\t\tcurrency: this.game.selectedStake.currency,\n\t\t\t\t\tvalue: this.game.selectedStake.value,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.popinsOverlay.visible = true;\n\t\t\tthis.hideButtons();\n\t\t\tthis.confirmPopin.show(false);\n\t\t}\n\t}\n\n\tprivate noMoreRules(): void {\n\t\tlocalStorage.setItem(`${i18n.t(\"common.gameName\")}-noMoreRules`, \"true\");\n\t\tthis.toGame();\n\t}\n\n\tprivate get shouldHideRules(): boolean {\n\t\treturn (\n\t\t\tthis.game.getOpenGameParameters().skipRules ||\n\t\t\tlocalStorage.getItem(`${i18n.t(\"common.gameName\")}-noMoreRules`) === \"true\"\n\t\t);\n\t}\n\n\tprivate seeResult(): void {\n\t\tthis.popinsOverlay.visible = false;\n\t\tthis.viButtons.activatePlayAgain();\n\t}\n\n\tprivate seeDemoResult(): void {\n\t\tthis.popinsOverlay.visible = false;\n\t\tthis.viButtons.activateTryAgain();\n\t}\n\n\tprivate onAdded(): void {\n\t\tthis.betPopin.resizePopin();\n\t\tthis.demoEndPopin.resizePopin();\n\t\tthis.betEndPopin.resizePopin();\n\t\tthis.replayEndPopin.resizePopin();\n\t\tthis.confirmPopin.resizePopin();\n\t\tthis.rules.resizePopin();\n\t\tthis.gainTable.resizePopin();\n\t\tthis.resumePopin.resizePopin();\n\t\tthis.replayPopin.resizePopin();\n\n\t\t// this.fakeIOS13(true);\n\t}\n\n\tprivate onVIClose(): void {\n\t\tthis.rulesOpen = false;\n\t\tthis.viButtons.showActiveButtons();\n\t\tthis.viOverlay.visible = false;\n\t\tthis.game.onRulesQuit();\n\t}\n\n\tprivate setViElements(options: IDSPopinsContainerOptions): void {\n\t\t(this.game.vi.inGameView.settingsComponent as any).soundEnabled = false;\n\t\tthis.game.mute(true);\n\t\tthis.viOverlay = new Graphics();\n\t\tthis.viOverlay.beginFill(0, 0.3);\n\t\tthis.viOverlay.drawRect(0, 0, 1, 1);\n\t\tthis.viOverlay.endFill();\n\t\tthis.viOverlay.resize = new Resize(Resize.cover);\n\t\tthis.viOverlay.interactive = true;\n\n\t\tthis.game.vi.emitter.on(EVisualIdentityEvent.ShowRules, () => {\n\t\t\tthis.showVIRules();\n\t\t});\n\n\t\tthis.game.vi.emitter.on(EVisualIdentityEvent.ShowWinningTable, () => {\n\t\t\tthis.showVIGains();\n\t\t});\n\n\t\tthis.game.vi.emitter.on(EVisualIdentityEvent.ShowSettings, () => {\n\t\t\tthis.onShowSettings();\n\t\t});\n\n\t\tthis.game.vi.emitter.on(EVisualIdentityEvent.HideSettings, () => {\n\t\t\tthis.onHideSettings();\n\t\t});\n\n\t\tthis.viButtons = new DSVIButtons(this.game, {\n\t\t\tonAuto: () => {\n\t\t\t\tthis.viButtons.activatePause();\n\t\t\t\toptions.viButtonsCallbacks.onAuto();\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tthis.viButtons.activateAuto();\n\t\t\t\toptions.viButtonsCallbacks.onStop();\n\t\t\t},\n\t\t\tonPlayAgain: async () => {\n\t\t\t\tawait this.confirm().catch((e) => {\n\t\t\t\t\tthis.viButtons.activatePlayAgain();\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t\t},\n\t\t\tonTryAgain: () => {\n\t\t\t\tthis.end();\n\t\t\t},\n\t\t});\n\n\t\tthis.game.vi.emit(EVisualIdentityAction.UpdateDesign, {\n\t\t\ttitleStyles: {\n\t\t\t\tdefault: {\n\t\t\t\t\tfill: options.titleColor ? options.titleColor : BASE_COLOR,\n\t\t\t\t\tstroke: options.titleColor ? options.titleColor : BASE_COLOR,\n\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\tfontSize: DSPopin.titleFontSize,\n\t\t\t\t\tstrokeOffsetX: 0,\n\t\t\t\t\tstrokeOffsetY: 0,\n\t\t\t\t\tstrokeWidth: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcontentStyles: {\n\t\t\t\tdefault: {\n\t\t\t\t\tfill: options.titleColor ? options.titleColor : BASE_COLOR,\n\t\t\t\t\tstroke: options.titleColor ? options.titleColor : BASE_COLOR,\n\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\tfontSize: DSPopin.textFontSize,\n\t\t\t\t\tstrokeOffsetX: 0,\n\t\t\t\t\tstrokeOffsetY: 0,\n\t\t\t\t\tstrokeWidth: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t\tbuttonsStyles: {\n\t\t\t\tdefault: {\n\t\t\t\t\tfill: options.secondaryColor ? options.secondaryColor : BASE_COLOR,\n\t\t\t\t\tstroke: options.secondaryColor ? options.secondaryColor : BASE_COLOR,\n\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\tfontSize: DSPopin.menuButtonFontSize,\n\t\t\t\t\tstrokeOffsetX: 0,\n\t\t\t\t\tstrokeOffsetY: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t} as IVisualIdentityDesign);\n\t}\n\n\tprivate setRules(titleColor: string): void {\n\t\tconst slides = [];\n\t\tconst rulesContainer = this.game.stage.getChildByName(\"rules\");\n\t\tfor (const slide of rulesContainer.children) {\n\t\t\tslides.push(slide);\n\t\t}\n\t\tthis.game.stage.removeChild(rulesContainer);\n\n\t\tif (rulesContainer.dockingBounds) {\n\t\t\t// allow dev to set vi dockingBounds via rulesContainer (not great but revealView not aviable)\n\t\t\tthis.dockingBounds = new DockingBounds(\n\t\t\t\tMath.max(this.dockingBounds.width, rulesContainer.dockingBounds.width + 180), // add some margin for left and right arrows\n\t\t\t\tMath.max(this.dockingBounds.height, rulesContainer.dockingBounds.height + BottomBar.height)\n\t\t\t); // add bottom bar height\n\t\t}\n\n\t\tthis.rules = new DSPaginatedPopin({\n\t\t\ttitle: i18n.t(\"howTo.title\"),\n\t\t\ttitleColor,\n\t\t\tleftButtonLabel: i18n.t(\"howTo.toGame\"),\n\t\t\trightButtonLabel: i18n.t(\"howTo.hide\"),\n\t\t\tonLeft: async () => {\n\t\t\t\tthis.toGame();\n\t\t\t},\n\t\t\tonRight: async () => {\n\t\t\t\tthis.noMoreRules();\n\t\t\t},\n\t\t\tonClose: async () => {\n\t\t\t\tthis.onVIClose();\n\t\t\t},\n\t\t\tslides,\n\t\t});\n\n\t\tthis.rules.docking = new Docking(\n\t\t\tDocking.centerAll,\n\t\t\t0,\n\t\t\tDSPopinsContainer.verticalOffset - DSPopinsContainer.verticalOffsetIOS\n\t\t);\n\t\tthis.addChild(this.rules);\n\t}\n\n\tprivate setGainBoard(options: IDSPopinsContainerOptions): void {\n\t\tconst GAINS: Container[] = [];\n\t\tconst GAIN_BOARD = this.game.stage.getChildByName(\"gainBoard\");\n\t\tfor (const slide of GAIN_BOARD.children as Container[]) {\n\t\t\tGAINS.push(slide);\n\t\t}\n\t\tthis.game.stage.removeChild(GAIN_BOARD);\n\n\t\tif (GAINS.length === 0) {\n\t\t\tthis.makeGainBoardSlides(GAIN_BOARD, GAINS, options);\n\t\t}\n\n\t\tthis.gainTable = new DSPaginatedPopin({\n\t\t\ttitle: i18n.t(\"gainTable.title\"),\n\t\t\ttitleColor: options.titleColor,\n\t\t\tslides: GAINS,\n\t\t\tonClose: async () => {\n\t\t\t\tthis.onVIClose();\n\t\t\t},\n\t\t});\n\t\tthis.gainTable.docking = new Docking(Docking.centerAll, 0, DSPopinsContainer.verticalOffset);\n\t\tthis.addChild(this.gainTable);\n\t}\n\n\tprivate makeGainBoardSlides(\n\t\tgainBoard: Container,\n\t\tgains: Container[],\n\t\toptions: IDSPopinsContainerOptions\n\t): void {\n\t\tconst MAX_HEIGHT = gainBoard.dockingBounds.height - 2 * TABLE_EXTERNAL_MARGIN;\n\n\t\tconst MAIN_FONTSIZE =\n\t\t\toptions.gainFontsizes && options.gainFontsizes.main\n\t\t\t\t? options.gainFontsizes.main\n\t\t\t\t: DSPopin.titleFontSize;\n\t\tconst LEFT_FONTSIZE =\n\t\t\toptions.gainFontsizes && options.gainFontsizes.left\n\t\t\t\t? options.gainFontsizes.left\n\t\t\t\t: MAIN_FONTSIZE;\n\n\t\tconst MAX_LINES = options.gainMaxLines || 10;\n\n\t\tconst RANKS: string[] = [];\n\n\t\tlet newSlide: Container;\n\t\tlet newTable: Table<TextField>;\n\t\tlet index: number = 0;\n\t\tlet rank: string = i18n.t(`gainTable.ranks.${index}`);\n\t\tlet gain: string = i18n.t(`gainTable.gainRanks.${index}`);\n\t\tlet rows: Array<[TextField, TextField]>;\n\n\t\twhile (rank !== `gainTable.ranks.${index}` && gain !== `gainTable.gainRanks.${index}`) {\n\t\t\tif (index % MAX_LINES === 0) {\n\t\t\t\tnewSlide = new Container();\n\t\t\t\tnewSlide.dockingBounds = new DockingBounds(\n\t\t\t\t\tgainBoard.dockingBounds.width,\n\t\t\t\t\tgainBoard.dockingBounds.height\n\t\t\t\t);\n\n\t\t\t\tnewTable = new Table<TextField>();\n\t\t\t\tnewTable.docking = new Docking(Docking.centerAll);\n\t\t\t\tnewSlide.addChild(newTable);\n\n\t\t\t\tgains.push(newSlide);\n\n\t\t\t\trows = [];\n\t\t\t}\n\n\t\t\tRANKS.push(rank);\n\n\t\t\tconst RANK_TEXT = new TextField(\n\t\t\t\trank,\n\t\t\t\t{\n\t\t\t\t\tfill: options.titleColor ? options.titleColor : BASE_COLOR,\n\t\t\t\t\tfontSize: LEFT_FONTSIZE,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\talign: EAlign.Left,\n\t\t\t\t\tnoUpdate: true,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst GAIN_TEXT = new TextField(\n\t\t\t\tgain,\n\t\t\t\t{\n\t\t\t\t\tfill: options.titleColor ? options.titleColor : BASE_COLOR,\n\t\t\t\t\tfontSize: MAIN_FONTSIZE,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\talign: EAlign.Right,\n\t\t\t\t\tnoUpdate: true,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\trows.push([RANK_TEXT, GAIN_TEXT]);\n\n\t\t\tif (\n\t\t\t\tindex % MAX_LINES === MAX_LINES - 1 ||\n\t\t\t\ti18n.t(`gainTable.ranks.${index + 1}`) === `gainTable.ranks.${index + 1}` ||\n\t\t\t\ti18n.t(`gainTable.gainRanks.${index}`) === `gainTable.gainRanks.${index + 1}`\n\t\t\t) {\n\t\t\t\tconst COLUMN = rows.map((ROW) => {\n\t\t\t\t\treturn ROW[1];\n\t\t\t\t});\n\n\t\t\t\tlet maxWidth = 0;\n\t\t\t\tfor (const TEXT of COLUMN) {\n\t\t\t\t\tif (TEXT.width > maxWidth) {\n\t\t\t\t\t\tmaxWidth = TEXT.width;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmaxWidth += 40;\n\n\t\t\t\tnewTable.setFixedWidth(newSlide.dockingBounds.width - 2 * TABLE_EXTERNAL_MARGIN);\n\t\t\t\tnewTable.setFixedColumnsWidth([0, maxWidth]);\n\t\t\t\tnewTable.push(...rows);\n\n\t\t\t\t// send error cause the text is out of the popup\n\t\t\t\tif (newTable.height > MAX_HEIGHT) {\n\t\t\t\t\tthrow new Error(\"The gain table contains too much entries by slides\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tindex++;\n\t\t\trank = i18n.t(`gainTable.ranks.${index}`);\n\t\t\tgain = i18n.t(`gainTable.gainRanks.${index}`);\n\t\t}\n\n\t\tthis.demoEndPopin.ranks = RANKS;\n\t\tthis.replayEndPopin.ranks = RANKS;\n\t\tthis.betEndPopin.ranks = RANKS;\n\t}\n\n\tprivate setViAccessableElements(options: IDSPopinsContainerOptions): void {\n\t\tthis.addChild(this.viOverlay);\n\n\t\tthis.setRules(options.titleColor);\n\t\tthis.setGainBoard(options);\n\t}\n\n\tprivate setConfirmPopin(options: IDSPopinsContainerOptions): void {\n\t\tconst confirmSentence = new TextField(\n\t\t\ti18n.t(\"confirm.content\"),\n\t\t\t{\n\t\t\t\tdefault: {\n\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\tfontSize: DSPopin.textFontSize,\n\t\t\t\t\tfill: options.titleColor ? options.titleColor : BASE_COLOR,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tnoUpdate: true,\n\t\t\t}\n\t\t);\n\t\tconfirmSentence.freeze();\n\t\tconfirmSentence.wordWrap = true;\n\t\tconfirmSentence.align = EAlign.Center;\n\t\tconfirmSentence.width = DSPopin.minWidth;\n\t\tconfirmSentence.dockingBounds = new DockingBounds(DSPopin.minWidth, 120);\n\t\tconfirmSentence.unfreeze();\n\n\t\tthis.confirmPopin = new DSTwoButtonsPopin({\n\t\t\tbase: {\n\t\t\t\ttitle: i18n.t(\"confirm.title\"),\n\t\t\t\ttitleColor: options.titleColor,\n\t\t\t\tcontent: confirmSentence,\n\t\t\t},\n\t\t\tright: {\n\t\t\t\tlabel: i18n.t(\"confirm.no\"),\n\t\t\t\tcolor: options.secondaryColor,\n\t\t\t\tprimary: false,\n\t\t\t},\n\t\t\tonRight: async () => {\n\t\t\t\tawait this.cancelBet();\n\t\t\t},\n\t\t\tleft: {\n\t\t\t\tlabel: i18n.t(\"confirm.yes\"),\n\t\t\t\tprimary: true,\n\t\t\t},\n\t\t\tonLeft: async () => {\n\t\t\t\tawait this.handleGameStart();\n\t\t\t},\n\t\t\tshine: true,\n\t\t});\n\t\tthis.confirmPopin.docking = new Docking(Docking.centerAll, 0, DSPopinsContainer.verticalOffset);\n\t\tthis.addChild(this.confirmPopin);\n\t}\n\n\tprivate setReplayPopin(options: IDSPopinsContainerOptions): void {\n\t\tthis.replayPopin = new DSReplayPoptin(\n\t\t\t{\n\t\t\t\tbase: {\n\t\t\t\t\ttitle: i18n.t(\"replay.title\"),\n\t\t\t\t\ttitleColor: options.titleColor,\n\t\t\t\t},\n\t\t\t\tright: {\n\t\t\t\t\tlabel: i18n.t(\"replay.leftButton\"),\n\t\t\t\t\tcolor: options.secondaryColor,\n\t\t\t\t},\n\t\t\t\tonRight: async () => {\n\t\t\t\t\tawait this.confirm().catch((e) => {\n\t\t\t\t\t\tthis.replayPopin.show(false);\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tleft: {\n\t\t\t\t\tlabel: i18n.t(\"replay.rightButton\"),\n\t\t\t\t},\n\t\t\t\tonLeft: async () => {\n\t\t\t\t\tthis.replay();\n\t\t\t\t},\n\t\t\t\tshine: true,\n\t\t\t},\n\t\t\tthis\n\t\t);\n\t\tthis.replayPopin.docking = new Docking(Docking.centerAll, 0, DSPopinsContainer.verticalOffset);\n\t\tthis.addChild(this.replayPopin);\n\t}\n\n\tprivate setBetPopin(options: IDSPopinsContainerOptions): void {\n\t\tthis.betPopin = new DSTwoButtonsPopin({\n\t\t\tbase: {\n\t\t\t\ttitle: i18n.t(\"tryOrBuy.title\"),\n\t\t\t\ttitleColor: options.titleColor,\n\t\t\t},\n\t\t\tright: {\n\t\t\t\tlabel: i18n.t(\"tryOrBuy.try\"),\n\t\t\t\tcolor: options.secondaryColor,\n\t\t\t\tprimary: false,\n\t\t\t},\n\t\t\tonRight: async () => {\n\t\t\t\tawait this.handleGameStart(true);\n\t\t\t},\n\t\t\tleft: {\n\t\t\t\tlabel: i18n.t(\"tryOrBuy.buy\"),\n\t\t\t\tprimary: true,\n\t\t\t},\n\t\t\tonLeft: async () => {\n\t\t\t\tawait this.confirm().catch((e) => {\n\t\t\t\t\tthis.betPopin.show(false);\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t\t},\n\t\t\tshine: true,\n\t\t});\n\t\tthis.betPopin.docking = new Docking(Docking.centerAll, 0, DSPopinsContainer.verticalOffset);\n\t\tthis.addChild(this.betPopin);\n\t}\n\n\tprivate setReplayEndPopin(options: IDSPopinsContainerOptions): void {\n\t\tthis.replayEndPopin = new DSWinLosePopin({\n\t\t\tloseTitle: i18n.t(\"end.lose.title\"),\n\t\t\twinTitle: i18n.t(\"end.win.title\"),\n\t\t\tloseContent: i18n.t(\"end.lose.content\"),\n\t\t\twinContentKey: \"end.win.content\",\n\t\t\tbase: {\n\t\t\t\ttitle: \"\",\n\t\t\t\ttitleColor: options.titleColor,\n\t\t\t\tonClose: async () => {\n\t\t\t\t\tthis.seeDemoResult();\n\t\t\t\t},\n\t\t\t},\n\t\t\tright: {\n\t\t\t\tlabel: i18n.t(\"replay.leftButton\"),\n\t\t\t\tcolor: options.secondaryColor,\n\t\t\t},\n\t\t\tonRight: async () => {\n\t\t\t\tawait this.confirm().catch((e) => {\n\t\t\t\t\tthis.replayPopin.show(false);\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t\t},\n\t\t\tleft: {\n\t\t\t\tlabel: i18n.t(\"replay.rightButton\"),\n\t\t\t},\n\t\t\tonLeft: async () => {\n\t\t\t\tthis.replay();\n\t\t\t},\n\t\t\tshine: true,\n\t\t});\n\t\tthis.replayEndPopin.docking = new Docking(\n\t\t\tDocking.centerAll,\n\t\t\t0,\n\t\t\tDSPopinsContainer.verticalOffset\n\t\t);\n\t\tthis.addChild(this.replayEndPopin);\n\t}\n\n\tprivate setDemoEndPopin(options: IDSPopinsContainerOptions): void {\n\t\tthis.demoEndPopin = new DSWinLosePopin({\n\t\t\tloseTitle: i18n.t(\"tryEnd.lose.title\"),\n\t\t\twinTitle: i18n.t(\"tryEnd.win.title\"),\n\t\t\texceptionnalTitle: i18n.t(\"tryEnd.exceptionnal.title\"),\n\t\t\tloseContent: i18n.t(\"tryEnd.lose.content\"),\n\t\t\twinContentKey: \"tryEnd.win.content\",\n\t\t\texceptionnalContentKey: \"tryEnd.exceptionnal.content\",\n\t\t\tbase: {\n\t\t\t\ttitle: \"\",\n\t\t\t\ttitleColor: options.titleColor,\n\t\t\t\tonClose: async () => {\n\t\t\t\t\tthis.seeDemoResult();\n\t\t\t\t},\n\t\t\t},\n\t\t\tleft: {\n\t\t\t\tlabel: i18n.t(\"tryEnd.try\"),\n\t\t\t\tcolor: options.secondaryColor,\n\t\t\t},\n\t\t\tonLeft: async () => {\n\t\t\t\tawait this.handleGameStart(true);\n\t\t\t},\n\t\t\tright: {\n\t\t\t\tlabel: i18n.t(\"tryEnd.buy\"),\n\t\t\t},\n\t\t\tonRight: async () => {\n\t\t\t\tawait this.confirm().catch((e) => {\n\t\t\t\t\tthis.demoEndPopin.show(true, this.ticket);\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t\t},\n\t\t\tshine: true,\n\t\t});\n\t\tthis.demoEndPopin.docking = new Docking(Docking.centerAll, 0, DSPopinsContainer.verticalOffset);\n\t\tthis.addChild(this.demoEndPopin);\n\t}\n\n\tprivate setBetEndPopin(options: IDSPopinsContainerOptions): void {\n\t\tthis.betEndPopin = new DSWinLosePopin({\n\t\t\tloseTitle: i18n.t(\"end.lose.title\"),\n\t\t\twinTitle: i18n.t(\"end.win.title\"),\n\t\t\texceptionnalTitle: i18n.t(\"end.exceptionnal.title\"),\n\t\t\tloseContent: i18n.t(\"end.lose.content\"),\n\t\t\twinContentKey: \"end.win.content\",\n\t\t\texceptionnalContentKey: \"end.exceptionnal.content\",\n\t\t\tbase: {\n\t\t\t\ttitle: \"\",\n\t\t\t\ttitleColor: options.titleColor,\n\t\t\t\tonClose: async () => {\n\t\t\t\t\tthis.seeResult();\n\t\t\t\t},\n\t\t\t},\n\t\t\tright: {\n\t\t\t\tlabel: i18n.t(\"end.buy\"),\n\t\t\t},\n\t\t\tonRight: async () => {\n\t\t\t\tawait this.confirm().catch((e) => {\n\t\t\t\t\tthis.betEndPopin.show(true, this.ticket);\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t\t},\n\t\t\tshine: true,\n\t\t});\n\t\tthis.betEndPopin.docking = new Docking(Docking.centerAll, 0, DSPopinsContainer.verticalOffset);\n\t\tthis.addChild(this.betEndPopin);\n\t}\n\n\tprivate setResumePopin(options: IDSPopinsContainerOptions): void {\n\t\tconst resumeSentence = new TextField(\n\t\t\ti18n.t(\"resume.content\"),\n\t\t\t{\n\t\t\t\tdefault: {\n\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\tfontSize: DSPopin.textFontSize,\n\t\t\t\t\tfill: options.titleColor ? options.titleColor : BASE_COLOR,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tnoUpdate: true,\n\t\t\t}\n\t\t);\n\t\tresumeSentence.freeze();\n\t\tresumeSentence.wordWrap = true;\n\t\tresumeSentence.align = EAlign.Center;\n\t\tresumeSentence.width = DSPopin.minWidth;\n\t\tresumeSentence.dockingBounds = new DockingBounds(DSPopin.minWidth, 120);\n\t\tresumeSentence.unfreeze();\n\n\t\tthis.resumePopin = new DSTwoButtonsPopin({\n\t\t\tbase: {\n\t\t\t\ttitle: i18n.t(\"resume.title\"),\n\t\t\t\ttitleColor: options.titleColor,\n\t\t\t\tcontent: resumeSentence,\n\t\t\t},\n\t\t\tright: {\n\t\t\t\tlabel: i18n.t(\"resume.button\"),\n\t\t\t},\n\t\t\tonRight: async () => {\n\t\t\t\tthis.resume();\n\t\t\t},\n\t\t});\n\t\tthis.resumePopin.docking = new Docking(Docking.centerAll, 0, DSPopinsContainer.verticalOffset);\n\t\tthis.addChild(this.resumePopin);\n\t}\n}\n","import { TextField, EAlign, DockingBounds } from \"@gdk/core-pixi\";\nimport * as i18n from \"i18next\";\n\nimport { DSTwoButtonsPopin } from \"./twoButtonsPopin\";\nimport { DSPopin } from \"./popin\";\nimport type { DSPopinsContainer } from \"./popinsContainer\";\nimport type { IDSTwoButtonsPopinOptions } from \"./twoButtonsPopin\";\n\nconst REPLAY_CONTENT = \"replay.content\";\n\nexport class DSReplayPoptin extends DSTwoButtonsPopin {\n\tprivate popinsContainer: DSPopinsContainer;\n\tprivate replaySentence: TextField;\n\n\tpublic constructor(options: IDSTwoButtonsPopinOptions, popinsContainer: DSPopinsContainer) {\n\t\tconst replaySentence = new TextField(i18n.t(REPLAY_CONTENT), {\n\t\t\tdefault: {\n\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\tfontSize: DSPopin.textFontSize,\n\t\t\t\tfill: options.base.titleColor ? options.base.titleColor : \"#000000\",\n\t\t\t},\n\t\t});\n\t\treplaySentence.freeze();\n\t\treplaySentence.wordWrap = true;\n\t\treplaySentence.align = EAlign.Center;\n\t\treplaySentence.width = DSPopin.minWidth;\n\t\treplaySentence.dockingBounds = new DockingBounds(DSPopin.minWidth, 120);\n\t\treplaySentence.unfreeze({ noUpdate: true });\n\n\t\toptions.base.content = replaySentence;\n\n\t\tsuper(options);\n\n\t\tthis.popinsContainer = popinsContainer;\n\n\t\tthis.replaySentence = replaySentence;\n\t}\n\n\t/**\n\t * Show the popin with or without close button\n\t *\n\t * @access public\n\t * @param {boolean} withClose, should add the close button\n\t */\n\tpublic show(withClose: boolean): void {\n\t\tthis.replaySentence.text = i18n.t(REPLAY_CONTENT, {\n\t\t\tticketId: this.popinsContainer.ticket.ticketId,\n\t\t});\n\n\t\tsuper.show(withClose);\n\t}\n}\n","import { Button } from \"@gdk/core-pixi\";\nimport { Sprite, Texture, Graphics } from \"pixi.js\";\nimport { TweenMax, Linear } from \"gsap\";\nimport type { IButtonStyle, IStyles } from \"@gdk/core-pixi\";\n\nexport interface IShineableButtonOptions {\n\tbutton: IButtonStyle;\n\tshine?: boolean;\n}\n\nconst CTA = \"buttons/primary/shine\";\n\nexport class ShineableButton extends Button {\n\tprivate shine: Sprite;\n\tprivate _bump: number = 0;\n\tprivate shineScale: number;\n\tprivate shineMask: Graphics;\n\n\tpublic constructor(options: IShineableButtonOptions, textStyles: IStyles, text: string) {\n\t\tsuper(options.button, textStyles, text);\n\n\t\tif (options.shine) {\n\t\t\tthis.shine = new Sprite(Texture.from(CTA));\n\t\t\tthis.addChild(this.shine);\n\t\t\tthis.shine.anchor.x = 0;\n\t\t\tthis.shine.anchor.y = 0;\n\t\t}\n\t}\n\n\t/**\n\t * It will update the button size to fit min width or the text\n\t *\n\t * @access public\n\t */\n\tpublic updateSize(): void {\n\t\tif (this.shine) {\n\t\t\tif (!this.shineMask) {\n\t\t\t\tthis.shineMask = new Graphics();\n\t\t\t} else {\n\t\t\t\tthis.shineMask.clear();\n\t\t\t}\n\n\t\t\tthis.shineMask.beginFill(0xffffff, 1);\n\t\t\tthis.shineMask.drawRoundedRect(\n\t\t\t\t9,\n\t\t\t\t8,\n\t\t\t\tthis.backgroundNineSlice.width - 18,\n\t\t\t\tthis.backgroundNineSlice.height - 20,\n\t\t\t\t9\n\t\t\t);\n\t\t\tthis.shineMask.endFill();\n\t\t\tthis.addChild(this.shineMask);\n\n\t\t\tthis.shine.mask = this.shineMask;\n\t\t\tthis.shine.scaleXY = this.shineScale = this.backgroundNineSlice.height / this.shine.height;\n\n\t\t\tTweenMax.fromTo(\n\t\t\t\tthis.shine,\n\t\t\t\t0.9,\n\t\t\t\t{\n\t\t\t\t\tx: -this.shine.width,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tx: this.backgroundNineSlice.width,\n\t\t\t\t\trepeat: -1,\n\t\t\t\t\trepeatDelay: 2,\n\t\t\t\t\tease: Linear.easeNone,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tTweenMax.fromTo(\n\t\t\t\tthis,\n\t\t\t\t0.9,\n\t\t\t\t{\n\t\t\t\t\tbump: 0,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tbump: Math.PI,\n\t\t\t\t\trepeat: -1,\n\t\t\t\t\trepeatDelay: 2,\n\t\t\t\t\tease: Linear.easeNone,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * It will set the shine bump (scale bump)\n\t *\n\t * @access public\n\t * @param {number} bump, the bump size\n\t */\n\tpublic set bump(bump: number) {\n\t\tthis._bump = this.shineScale * (1 + Math.sin(bump));\n\t\tthis.shine.scaleXY = this._bump;\n\t}\n\n\t/**\n\t * It will return the current bump state\n\t *\n\t * @access public\n\t */\n\tpublic get bump(): number {\n\t\treturn this._bump;\n\t}\n\n\t/**\n\t * @Override, It will set the button with or without shine\n\t *\n\t * @access public\n\t * @param {boolean} enabled, enable the button or not\n\t */\n\tpublic set enabled(enabled: boolean) {\n\t\tif (this.shine) {\n\t\t\tthis.shine.visible = enabled;\n\t\t}\n\n\t\tif (!enabled) {\n\t\t\tif (this.disabledTexture) {\n\t\t\t\t(this as any)._updateTexture(this.disabledTexture);\n\t\t\t}\n\t\t} else {\n\t\t\t(this as any)._updateTexture(this.idleTexture);\n\t\t}\n\n\t\t(this as any)._updateTextStyle(enabled ? this.textStates.idle : this.textStates.disabled);\n\t\tthis._enabled = enabled;\n\n\t\tthis.interactive = enabled;\n\t\tthis.buttonMode = enabled;\n\t}\n\n\t/**\n\t * Get the enabled state\n\t *\n\t * @access public\n\t */\n\tpublic get enabled(): boolean {\n\t\treturn this._enabled;\n\t}\n}\n","import { Container } from \"pixi.js\";\nimport { Docking, DockingBounds, Stackable } from \"@gdk/core-pixi\";\nimport type { Button } from \"@gdk/core-pixi\";\n\nimport { DSPopin } from \"./popin\";\nimport { ShineableButton } from \"./shineableButton\";\nimport type { IDSPopinOptions } from \"./popin\";\n\nconst LEFT_TOP_RIGHT = 30;\nconst BOTTOM = 40;\nconst BUTTONS_SPACE = 80;\nconst DEFAULT_COLOR = \"#000000\";\n\nconst TEXTURES = {\n\tprimary: {\n\t\tidleTexture: \"buttons/primary/idle\",\n\t\toverTexture: \"buttons/primary/over\",\n\t\tclickedTexture: \"buttons/primary/idle\",\n\t\tdisabledTexture: \"buttons/primary/idle\",\n\t},\n\tsecondary: {\n\t\tidleTexture: \"buttons/secondary/idle\",\n\t\toverTexture: \"buttons/secondary/over\",\n\t\tclickedTexture: \"buttons/secondary/idle\",\n\t\tdisabledTexture: \"buttons/secondary/idle\",\n\t},\n};\n\nexport interface IDSNineSliceButtonOptions {\n\tlabel: string;\n\tcolor?: string;\n\ton?: () => Promise<void>;\n\tprimary?: boolean;\n}\n\nexport interface IDSTwoButtonsPopinOptions {\n\tbase: IDSPopinOptions;\n\tleft?: IDSNineSliceButtonOptions;\n\tright: IDSNineSliceButtonOptions;\n\tonLeft?: () => Promise<void>;\n\tonRight: () => Promise<void>;\n\tshine?: boolean;\n}\n\nexport class DSTwoButtonsPopin extends DSPopin {\n\tprivate leftButton: ShineableButton;\n\tprivate rightButton: ShineableButton;\n\n\tprivate baseContent: Container;\n\n\tpublic constructor(options: IDSTwoButtonsPopinOptions) {\n\t\tconst baseContent = options.base.content || new Container();\n\t\tif (!baseContent.dockingBounds) {\n\t\t\tbaseContent.dockingBounds = new DockingBounds(0, 0);\n\t\t}\n\t\toptions.base.content = null;\n\n\t\tsuper(options.base);\n\n\t\tthis.content.addChild(baseContent);\n\t\tthis.content.dockingBounds = new DockingBounds(\n\t\t\tbaseContent.dockingBounds.width,\n\t\t\tbaseContent.dockingBounds.height + BUTTONS_SPACE\n\t\t);\n\t\tthis.baseContent = baseContent;\n\n\t\tif (options.left) {\n\t\t\tconst primary = options.left.primary ?? false;\n\t\t\tconst textures = TEXTURES[primary ? \"primary\" : \"secondary\"];\n\t\t\tthis.leftButton = new ShineableButton(\n\t\t\t\t{\n\t\t\t\t\tbutton: textures,\n\t\t\t\t\tshine: primary && options.shine,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\t\tfontSize: DSPopin.buttonFontSize,\n\t\t\t\t\t\tfill: options.left.color ? options.left.color : DEFAULT_COLOR,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\toptions.left.label\n\t\t\t);\n\t\t\t// this.leftButton.docking = new Docking(Docking.bottomLeft);\n\t\t\tthis.leftButton.on(\"pointertap\", () => {\n\t\t\t\tthis.executeButtonCallback(options.onLeft);\n\t\t\t});\n\t\t}\n\n\t\tconst rightIsPrimary = options.right?.primary ?? true;\n\t\tconst rightTextures = TEXTURES[rightIsPrimary ? \"primary\" : \"secondary\"];\n\t\tthis.rightButton = new ShineableButton(\n\t\t\t{\n\t\t\t\tbutton: rightTextures,\n\t\t\t\tshine: rightIsPrimary && options.shine,\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefault: {\n\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\tfontSize: DSPopin.buttonFontSize,\n\t\t\t\t\tfill: options.right.color ? options.right.color : DEFAULT_COLOR,\n\t\t\t\t},\n\t\t\t},\n\t\t\toptions.right.label\n\t\t);\n\t\t// this.rightButton.docking = new Docking(options.left ? Docking.bottomRight : Docking.bottomCenterHorizontal);\n\t\tthis.rightButton.on(\"pointertap\", () => {\n\t\t\tthis.executeButtonCallback(options.onRight);\n\t\t});\n\n\t\tconst buttons: Button[] = [this.rightButton];\n\t\tif (options.left) {\n\t\t\tbuttons.unshift(this.leftButton);\n\t\t}\n\n\t\tfor (const button of buttons) {\n\t\t\tbutton.isNineSlice = true;\n\t\t\tbutton.backgroundNineSlice.leftWidth = LEFT_TOP_RIGHT;\n\t\t\tbutton.backgroundNineSlice.topHeight = LEFT_TOP_RIGHT;\n\t\t\tbutton.backgroundNineSlice.rightWidth = LEFT_TOP_RIGHT;\n\t\t\tbutton.backgroundNineSlice.bottomHeight = BOTTOM;\n\n\t\t\tbutton.nineSliceMinSize.x = 280;\n\t\t\tbutton.nineSliceMinSize.y = 70;\n\n\t\t\tbutton.nineSlicePadding.x = 20;\n\t\t\tbutton.nineSlicePadding.y = 21;\n\t\t\tbutton.nineSlicePadding.width = 20;\n\t\t\tbutton.nineSlicePadding.height = 22;\n\n\t\t\t// this.content.addChild(button);\n\t\t\tthis.buttonStack.push(button, false);\n\t\t\t// Useful for resizing a niceSlice Button\n\t\t\tbutton.label = button.label;\n\t\t}\n\n\t\tif (this.leftButton !== undefined) {\n\t\t\tthis.leftButton.updateSize();\n\t\t}\n\n\t\tthis.rightButton.updateSize();\n\t}\n\n\t/**\n\t * Resize the popin to fit the content\n\t *\n\t * @access public\n\t */\n\tpublic resizePopin(): void {\n\t\tthis.content.dockingBounds.width = this.baseContent.dockingBounds.width;\n\t\tthis.content.dockingBounds.height = this.baseContent.dockingBounds.height;\n\n\t\tif (this.content.dockingBounds.width < DSPopin.minWidth) {\n\t\t\tthis.content.dockingBounds.width = DSPopin.minWidth;\n\t\t}\n\n\t\tsuper.resizePopin();\n\t}\n\n\t/**\n\t * Show with or without close button\n\t *\n\t * @access public\n\t * @param {boolean} withClose=false, should add the close button\n\t */\n\tpublic show(withClose: boolean = false): void {\n\t\tthis.closeButton.visible = Boolean(withClose);\n\n\t\tsuper.show();\n\t}\n\n\tprotected activateButtons(activate: boolean): void {\n\t\tfor (const key of [\"leftButton\", \"rightButton\", \"closeButton\"]) {\n\t\t\tif (this[key]) {\n\t\t\t\tthis[key].enabled = activate;\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Button, Docking } from \"@gdk/core-pixi\";\nimport * as i18n from \"i18next\";\n\nimport { ShineableButton } from \"./shineableButton\";\nimport { EVisualIdentityAction } from \"../adaptativeVisualIdentity\";\nimport { DSPopin } from \"./popin\";\nimport type { Express } from \"../game\";\n\nconst BASE = \"buttons/autoskrab/\";\nconst IDLE = `${BASE}idle`;\nconst OVER = `${BASE}over`;\nconst CLICKED = `${BASE}down`;\nconst DISABLED = `${BASE}disabled`;\nconst PADDING = 15;\nconst PADDING_WIDTH = 30;\nconst COLOR = \"#000000\";\n\nconst KEYS = {\n\tauto: \"reveal.auto\",\n\tstop: \"reveal.pause\",\n\tplayAgain: \"reveal.playAgain\",\n\ttryAgain: \"reveal.tryAgain\",\n};\n\nexport interface IDSVIButtonsOptions {\n\tonAuto: () => void;\n\tonStop: () => void;\n\tonPlayAgain: () => void;\n\tonTryAgain: () => void;\n}\n\nexport class DSVIButtons {\n\tprivate auto: Button;\n\tprivate stop: Button;\n\tprivate playAgain: ShineableButton;\n\tprivate tryAgain: ShineableButton;\n\n\tprivate onAuto: () => void;\n\tprivate onStop: () => void;\n\tprivate onPlayAgain: () => void;\n\tprivate onTryAgain: () => void;\n\n\tprivate buttons: Button[] = [];\n\n\tprivate game: Express;\n\n\tpublic constructor(game: Express, callbacks: IDSVIButtonsOptions) {\n\t\tthis.game = game;\n\t\tthis.onAuto = callbacks.onAuto;\n\t\tthis.onStop = callbacks.onStop;\n\t\tthis.onPlayAgain = callbacks.onPlayAgain;\n\t\tthis.onTryAgain = callbacks.onTryAgain;\n\n\t\tfor (const key of [\"auto\", \"stop\", \"playAgain\", \"tryAgain\"]) {\n\t\t\tif (key === \"playAgain\" || key === \"tryAgain\") {\n\t\t\t\tthis[key] = new ShineableButton(\n\t\t\t\t\t{\n\t\t\t\t\t\tbutton: {\n\t\t\t\t\t\t\tidleTexture: IDLE,\n\t\t\t\t\t\t\toverTexture: OVER,\n\t\t\t\t\t\t\tclickedTexture: CLICKED,\n\t\t\t\t\t\t\tdisabledTexture: DISABLED,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshine: true,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\t\t\tfontSize: DSPopin.menuButtonFontSize,\n\t\t\t\t\t\t\tfill: COLOR,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis[key] = new Button(\n\t\t\t\t\t{\n\t\t\t\t\t\tidleTexture: IDLE,\n\t\t\t\t\t\toverTexture: OVER,\n\t\t\t\t\t\tclickedTexture: CLICKED,\n\t\t\t\t\t\tdisabledTexture: DISABLED,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\t\t\t\tfontSize: DSPopin.menuButtonFontSize,\n\t\t\t\t\t\t\tfill: COLOR,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis[key].docking = new Docking(Docking.centerAll);\n\t\t\tthis[key].text.docking.y = -4;\n\t\t\tthis[key].isNineSlice = true;\n\t\t\tthis[key].backgroundNineSlice.leftWidth = PADDING_WIDTH;\n\t\t\tthis[key].backgroundNineSlice.topHeight = PADDING;\n\t\t\tthis[key].backgroundNineSlice.rightWidth = PADDING_WIDTH;\n\t\t\tthis[key].backgroundNineSlice.bottomHeight = PADDING;\n\n\t\t\tthis[key].nineSliceMinSize.x = 170;\n\t\t\tthis[key].nineSliceMinSize.y = 70;\n\n\t\t\tthis[key].nineSlicePadding.x = PADDING;\n\t\t\tthis[key].nineSlicePadding.y = PADDING;\n\t\t\tthis[key].nineSlicePadding.width = PADDING;\n\t\t\tthis[key].nineSlicePadding.height = PADDING;\n\t\t\tthis[key].label = i18n.t(KEYS[key]);\n\t\t\tthis[key].trackingName = key;\n\n\t\t\tthis.buttons.push(this[key]);\n\t\t}\n\n\t\tthis.deactivateButtons();\n\n\t\tthis.auto.on(\"pointertap\", this.onAuto);\n\t\tthis.stop.on(\"pointertap\", this.onStop);\n\t\tthis.playAgain.on(\"pointertap\", this.onPlayAgain);\n\t\tthis.tryAgain.on(\"pointertap\", this.onTryAgain);\n\n\t\tthis.game.vi.emit(EVisualIdentityAction.AddControlButton, this.buttons);\n\t}\n\n\t/**\n\t * Activate the play again button\n\t *\n\t * @access public\n\t */\n\tpublic activatePlayAgain(): void {\n\t\tthis.activateButtons([this.playAgain]);\n\t\tthis.playAgain.updateSize();\n\t}\n\n\t/**\n\t * Activate the try again button\n\t *\n\t * @access public\n\t */\n\tpublic activateTryAgain(): void {\n\t\tthis.activateButtons([this.tryAgain]);\n\t\tthis.tryAgain.updateSize();\n\t}\n\n\t/**\n\t * Activate the auto button\n\t *\n\t * @access public\n\t */\n\tpublic activateAuto(): void {\n\t\tthis.activateButtons([this.auto]);\n\t}\n\n\t/**\n\t * Activate the pause button\n\t *\n\t * @access public\n\t */\n\tpublic activatePause(): void {\n\t\tthis.activateButtons([this.stop]);\n\t}\n\n\t/**\n\t * It will hide all the vi buttons.\n\t *\n\t * @access public\n\t * @param {boolean} deactivateAll=false, if it must disable all buttons\n\t */\n\tpublic hideButtons(deactivateAll: boolean = false): void {\n\t\tfor (const button of this.buttons) {\n\t\t\tbutton.visible = false;\n\t\t}\n\n\t\tif (deactivateAll) {\n\t\t\tthis.deactivateButtons();\n\t\t}\n\t}\n\n\t/**\n\t * Show all the active buttons\n\t *\n\t * @access public\n\t */\n\tpublic showActiveButtons(): void {\n\t\tthis.hideButtons();\n\n\t\tfor (const button of this.buttons) {\n\t\t\tif (button.enabled) {\n\t\t\t\tbutton.visible = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate activateButtons(buttons: Button[]): void {\n\t\tthis.deactivateButtons();\n\n\t\tfor (const button of buttons) {\n\t\t\tbutton.enabled = true;\n\t\t}\n\n\t\tthis.showActiveButtons();\n\t}\n\n\tprivate deactivateButtons(): void {\n\t\tfor (const button of this.buttons) {\n\t\t\tbutton.enabled = false;\n\t\t}\n\n\t\tthis.showActiveButtons();\n\t}\n}\n","import { TextField, DockingBounds, EAlign } from \"@gdk/core-pixi\";\nimport { Numeral } from \"@gdk/core\";\nimport * as i18n from \"i18next\";\nimport { EItgPrizeType } from \"@falcon/bridge\";\n\nimport { EBetResponseAction } from \"../game\";\nimport { DSTwoButtonsPopin } from \"./twoButtonsPopin\";\nimport { DSPopin } from \"./popin\";\nimport type { Ticket } from \"../game\";\nimport type { IDSTwoButtonsPopinOptions } from \"./twoButtonsPopin\";\n\nconst DEFAULT_COLOR = \"#000000\";\nconst BOTTOM_SPACE = 30;\n\nexport interface IDSWinLosePopinOptions extends IDSTwoButtonsPopinOptions {\n\tloseTitle: string;\n\twinTitle: string;\n\texceptionnalTitle?: string;\n\tloseContent: string;\n\twinContentKey: string;\n\texceptionnalContentKey?: string;\n}\n\nexport class DSWinLosePopin extends DSTwoButtonsPopin {\n\tprivate loseTitle: string;\n\tprivate winTitle: string;\n\tprivate exceptionnalTitle: string;\n\n\tprivate loseContent: string;\n\tprivate winContentKey: string;\n\tprivate exceptionnalContentKey: string;\n\n\tprivate contentText: TextField;\n\n\tprivate _ranks: string[];\n\n\tpublic constructor(options: IDSWinLosePopinOptions) {\n\t\tconst content = new TextField(\"\", {\n\t\t\tdefault: {\n\t\t\t\tfontName: \"OpenSans-SemiBold\",\n\t\t\t\tfontSize: DSPopin.textFontSize,\n\t\t\t\tfill: options.base.titleColor ? options.base.titleColor : DEFAULT_COLOR,\n\t\t\t},\n\t\t});\n\t\tcontent.wordWrap = true;\n\t\tcontent.width = DSPopin.minWidth;\n\t\tcontent.align = EAlign.Center;\n\t\tcontent.dockingBounds = new DockingBounds(0, 0);\n\t\toptions.base.content = content;\n\n\t\tsuper(options);\n\n\t\tthis.contentText = content;\n\t\tthis.loseTitle = options.loseTitle;\n\t\tthis.winTitle = options.winTitle;\n\t\tthis.exceptionnalTitle = options.exceptionnalTitle;\n\t\tthis.loseContent = options.loseContent;\n\t\tthis.winContentKey = options.winContentKey;\n\t\tthis.exceptionnalContentKey = options.exceptionnalContentKey;\n\t}\n\n\t/**\n\t * Show with or without close button, could use a Ticket to specify amount\n\t *\n\t * @access public\n\t * @param {boolean} withClose=false, Should show the close button\n\t * @param {Ticket} ticket?, the game ticket\n\t */\n\tpublic show(withClose: boolean = false, ticket?: Ticket): void {\n\t\tif (\n\t\t\tBoolean(this.exceptionnalTitle) &&\n\t\t\tBoolean(ticket.prize) &&\n\t\t\tticket.prize.type === EItgPrizeType.periodicWinning\n\t\t) {\n\t\t\t// periodic winning\n\t\t\tthis.title.text = this.exceptionnalTitle;\n\t\t\tthis.contentText.text = i18n\n\t\t\t\t.t(this.exceptionnalContentKey, { amount: this._formatAmount(ticket, true) })\n\t\t\t\t.replace(/\\.\\./g, \".\");\n\t\t} else if (\n\t\t\tBoolean(this.exceptionnalTitle) &&\n\t\t\tticket.action === EBetResponseAction.SUSPENSION_TRIGGERED\n\t\t) {\n\t\t\t// big win\n\t\t\tthis.title.text = this.exceptionnalTitle;\n\t\t\tthis.contentText.text = i18n\n\t\t\t\t.t(this.exceptionnalContentKey, { amount: this._formatAmount(ticket) })\n\t\t\t\t.replace(/\\.\\./g, \".\");\n\t\t} else if (ticket.wonAmount.value > 0) {\n\t\t\t// normal win\n\t\t\tthis.title.text = this.winTitle;\n\t\t\tthis.contentText.text = i18n\n\t\t\t\t.t(this.winContentKey, { amount: this._formatAmount(ticket) })\n\t\t\t\t.replace(/\\.\\./g, \".\");\n\t\t} else {\n\t\t\t// lose\n\t\t\tthis.title.text = this.loseTitle;\n\t\t\tthis.contentText.text = this.loseContent;\n\t\t}\n\n\t\tthis.contentText.dockingBounds.width = this.contentText.width;\n\t\tthis.contentText.dockingBounds.height = this.contentText.height + BOTTOM_SPACE;\n\n\t\tsuper.show(withClose);\n\t}\n\n\t/**\n\t * Set the ranks of the popin, it contains the descriptions of the game ranks.\n\t * They are used to display infomations on specials wins\n\t */\n\tpublic set ranks(ranks: string[]) {\n\t\tthis._ranks = ranks;\n\t}\n\n\tprivate _formatAmount(ticket: Ticket, description: boolean = false): string {\n\t\tlet amount: string;\n\t\tif (\n\t\t\tdescription &&\n\t\t\tBoolean(ticket.prize) &&\n\t\t\tticket.prize.rank &&\n\t\t\tArray.isArray(this._ranks) &&\n\t\t\tBoolean(this._ranks[ticket.prize.rank])\n\t\t) {\n\t\t\tamount = this._ranks[ticket.prize.rank - 1];\n\t\t} else {\n\t\t\tamount = Numeral.currency(ticket.wonAmount, {\n\t\t\t\tminimumFractionDigits: ticket.wonAmount.value % 100 === 0 ? 0 : 2,\n\t\t\t});\n\t\t}\n\t\treturn amount;\n\t}\n}\n","import {\n\tAmount,\n\tEOrientation,\n\tErrorEvent,\n\tGameLoaded,\n\tGameQuit,\n\tHowlerLoader,\n\tLoader,\n\tLogger,\n\tNumeral,\n\tTools,\n\ttracker,\n} from \"@gdk/core\";\nimport { GamePixi, Resize, Scratch2, SymbolSprite, SymbolSpriteError } from \"@gdk/core-pixi\";\nimport { TweenMax, Power1 } from \"gsap\";\nimport { Howler } from \"howler\";\nimport i18n from \"i18next\";\nimport { Graphics, ticker, utils } from \"pixi.js\";\nimport type { IGamePixiOptions, TextField } from \"@gdk/core-pixi\";\nimport type { IAmount, IGameConf } from \"@gdk/core\";\nimport type { EGameMode, IOpenGameParameters } from \"@falcon/bridge\";\n\nimport {\n\tAdaptativeVisualIdentity,\n\tEVisualIdentityAction,\n\tEVisualIdentityEvent,\n} from \"../adaptativeVisualIdentity\";\nimport { Com, EMessageType, EPopinLevel, Popin, PopinButtonAction } from \"../com\";\nimport { EGameEvents } from \"./gameEvents\";\nimport { Notifier } from \"./notifier/notifier\";\nimport { TweenUtils } from \"./tweenUtils\";\n\n/**\n * Strings used as identifier for reasons to pause the game. They are stored in\n * the AbstractGame \"pauseReasons\" instance property, and used to know if the game\n * should be paused or not. Each reason should be dedidated to exactly one use case,\n * and not shared, otherwise shared reasons could conflict and unpause the game when\n * it shouldn't be.\n */\ntype PauseReason =\n\t| \"lockscreen\" // lockscreen is displayed (VI lockscreen)\n\t| \"blur\" // game window lost focus\n\t| \"settings\" // settings were open (and game parameter pauseOnSetting is set)\n\t| \"rules\" // rules are open\n\t| \"messagemanager\" // com/messageManager is displaying a message\n\t| `notifier_${string}`; // pauses related to notifier\n\nexport class AbstractGame extends GamePixi {\n\t// Public members\n\tpublic com: Com;\n\tpublic vi: AdaptativeVisualIdentity;\n\n\tpublic gameConfig: IGameConf;\n\tpublic skin: any = null;\n\n\tpublic rulesVisible: boolean = false;\n\n\tpublic events: utils.EventEmitter = new utils.EventEmitter();\n\n\tprivate _muted: boolean = false;\n\n\tprivate _disableInteractivityOverlay: Graphics;\n\n\t/**\n\t * List of unique reasons this game was paused for.\n\t * This set is empty means: the game is not paused. Better use `paused` getter\n\t * to know if the game is paused.\n\t *\n\t * This set is updated by methods `pause` and `unpause`.\n\t */\n\tprotected pauseReasons: Set<PauseReason> = new Set();\n\n\t/**\n\t * Constructor\n\t * @param gameConfig: the game configuration (game.conf.json)\n\t * @param width: the canvas width\n\t * @param height: the canvas height\n\t * @param noWebGL: enable/disable WebGL (to force Canvas)\n\t * @param options: the Pixi.js applicaiton options\n\t */\n\tpublic constructor(\n\t\tgameConfig: IGameConf,\n\t\twidth: number,\n\t\theight: number,\n\t\tnoWebGL: boolean,\n\t\toptions: IGamePixiOptions\n\t) {\n\t\t// Initialize\n\t\tsuper(\n\t\t\twidth,\n\t\t\theight,\n\t\t\tnoWebGL,\n\t\t\tTools.assign(options, {\n\t\t\t\tcreateGameDiv: options.createGameDiv === undefined,\n\t\t\t})\n\t\t);\n\n\t\tthis.com = new Com(this);\n\n\t\t// merge behaviour into gameParameters, every property must be accessed in gameConfig.gameParameters\n\t\tgameConfig.gameParameters = Tools.merge(\n\t\t\tgameConfig.gameParameters,\n\t\t\tgameConfig.behavioursParameters[gameConfig.selectedBehaviour]\n\t\t);\n\n\t\t// Configure popin\n\t\tPopin.wrapper = this.gameDiv;\n\n\t\t// Init logger\n\t\tLogger.init();\n\n\t\t// Create Visual identity\n\t\tthis.vi = new AdaptativeVisualIdentity(this, {\n\t\t\tlottery: gameConfig.behavioursParameters[gameConfig.selectedBehaviour].vi,\n\t\t\ttheme:\n\t\t\t\tgameConfig.behavioursParameters[gameConfig.selectedBehaviour].viParameters.theme ||\n\t\t\t\t\"default\",\n\t\t\tparameters: gameConfig.behavioursParameters[gameConfig.selectedBehaviour].viParameters,\n\t\t});\n\n\t\t// Create the overlay used to disable all interactivity (ex: replay of a game)\n\t\tthis._createOverlay();\n\n\t\t// Events\n\t\tthis.onResize = () => this.resize();\n\t\tthis.onShowLockScreen = () => {\n\t\t\tthis.mute(true);\n\t\t\tthis.pause(\"lockscreen\");\n\n\t\t\t// TODO[epic=jackpot] JACKPOT_SHOW_LOCKSCREEN\n\t\t\tthis.com.bridge.emitEvent(\"JACKPOT_SHOW_LOCKSCREEN\");\n\t\t};\n\n\t\tthis.onHideLockScreen = () => {\n\t\t\tthis.unpause(\"lockscreen\");\n\n\t\t\tthis.tryToMute(false);\n\n\t\t\t// TODO[epic=jackpot] JACKPOT_HIDE_LOCKSCREEN\n\t\t\tthis.com.bridge.emitEvent(\"JACKPOT_HIDE_LOCKSCREEN\");\n\t\t};\n\n\t\tthis.vi.emitter.on(EVisualIdentityAction.SoundEnabled, (enabled: boolean) => {\n\t\t\tthis.mute(!enabled);\n\t\t});\n\n\t\t// Track quit event\n\t\tthis.vi.emitter.on(EVisualIdentityEvent.QuitGame, () => {\n\t\t\ttracker.track(new GameQuit());\n\t\t\tthis.com.bridge.executeAction(\"CLOSE_GAME\");\n\t\t});\n\n\t\t// Handle Rules buttons\n\t\tlet previouslyEnabled = false;\n\n\t\tthis.vi.emitter.on(EVisualIdentityEvent.ShowSettings, () => {\n\t\t\t// Pause the game\n\t\t\tif (this.gameConfig.gameParameters.pauseOnSettings ?? true) {\n\t\t\t\tthis.pause(\"settings\");\n\t\t\t}\n\n\t\t\t// On show settings, enable or disable rules buttons\n\t\t\tlet enabled =\n\t\t\t\tthis.vi.inGameView.settingsComponent && this.vi.inGameView.settingsComponent.rulesEnabled;\n\n\t\t\tpreviouslyEnabled = enabled;\n\n\t\t\tif (this.state.current() === \"rules\") {\n\t\t\t\tenabled = false;\n\t\t\t}\n\n\t\t\tif (this.vi.inGameView.settingsComponent) {\n\t\t\t\tthis.vi.inGameView.settingsComponent.rulesEnabled = enabled;\n\t\t\t}\n\t\t});\n\n\t\tthis.vi.emitter.on(EVisualIdentityEvent.HideSettings, () => {\n\t\t\tif (this.gameConfig.gameParameters.pauseOnSettings ?? true) {\n\t\t\t\tthis.unpause(\"settings\");\n\t\t\t}\n\n\t\t\tif (this.vi.inGameView.settingsComponent) {\n\t\t\t\tthis.vi.inGameView.settingsComponent.rulesEnabled = previouslyEnabled;\n\t\t\t}\n\t\t});\n\n\t\tthis.vi.emitter.on(EVisualIdentityEvent.ShowRules, () => {\n\t\t\tthis.onRulesOpen();\n\t\t});\n\t\tthis.vi.emitter.on(EVisualIdentityEvent.HideRules, () => {\n\t\t\tthis.onRulesQuit();\n\t\t});\n\t\tthis.vi.emitter.on(EVisualIdentityEvent.ShowMainRules, () => {\n\t\t\tthis.onRulesOpen();\n\t\t});\n\t\tthis.vi.emitter.on(EVisualIdentityEvent.ShowWinningTable, () => {\n\t\t\tthis.onRulesOpen();\n\t\t});\n\n\t\t// Override events from game-core\n\t\t// (blur & focus)\n\t\tthis.onFocus = () => {\n\t\t\tif (this.gameConfig.gameParameters.pauseOnBlur) {\n\t\t\t\tthis.unpause(\"blur\");\n\t\t\t}\n\n\t\t\tif (this.gameConfig.gameParameters.muteSoundOnBlur !== false) {\n\t\t\t\tthis.tryToMute(false);\n\t\t\t}\n\n\t\t\tthis.vi.emitter.emit(EVisualIdentityEvent.GameFocused);\n\t\t};\n\t\tthis.onBlur = () => {\n\t\t\t// games may want to remains active on blur.\n\t\t\tif (this.gameConfig.gameParameters.pauseOnBlur) {\n\t\t\t\tthis.pause(\"blur\");\n\t\t\t}\n\n\t\t\t// We check !== false to ensure backward compatibility where muteSoundOnBlur\n\t\t\t// was undefined.\n\t\t\tif (this.gameConfig.gameParameters.muteSoundOnBlur !== false) {\n\t\t\t\tthis.tryToMute(true);\n\t\t\t}\n\n\t\t\tthis.vi.emitter.emit(EVisualIdentityEvent.GameBlurred);\n\t\t};\n\n\t\t// Request fullscreen\n\t\tthis.application.view.addEventListener(\"touchend\", () => {\n\t\t\tthis.requestFullscreen();\n\t\t});\n\n\t\t// handle context menu blocking\n\t\tif (gameConfig.gameParameters.contextMenuBlocked) {\n\t\t\tdocument.addEventListener(\n\t\t\t\t\"contextmenu\",\n\t\t\t\t(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t}\n\n\t\t// handle right click rejection\n\t\tif (gameConfig.gameParameters.rightClickRejected) {\n\t\t\tconst interaction = this.application.renderer.plugins.interaction;\n\n\t\t\tif (interaction.supportsPointerEvents) {\n\t\t\t\twindow.document.removeEventListener(\"pointermove\", interaction.onPointerMove, true);\n\t\t\t\tinteraction.interactionDOMElement.removeEventListener(\n\t\t\t\t\t\"pointerdown\",\n\t\t\t\t\tinteraction.onPointerDown,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\twindow.removeEventListener(\"pointerup\", interaction.onPointerUp, true);\n\t\t\t} else {\n\t\t\t\twindow.document.removeEventListener(\"mousemove\", interaction.onPointerMove, true);\n\t\t\t\tinteraction.interactionDOMElement.removeEventListener(\n\t\t\t\t\t\"mousedown\",\n\t\t\t\t\tinteraction.onPointerDown,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\twindow.removeEventListener(\"mouseup\", interaction.onPointerUp, true);\n\t\t\t}\n\n\t\t\tconst legacyOnPointerDown = interaction.onPointerDown;\n\n\t\t\tinteraction.onPointerDown = function (e: MouseEvent): void {\n\t\t\t\tif (e.button !== 2) {\n\t\t\t\t\tlegacyOnPointerDown.call(this, e);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst legacyOnPointerUp = interaction.onPointerUp;\n\n\t\t\tinteraction.onPointerUp = function (e: MouseEvent): void {\n\t\t\t\tif (e.button !== 2) {\n\t\t\t\t\tlegacyOnPointerUp.call(this, e);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst legacyOnPointerMove = interaction.onPointerMove;\n\n\t\t\tinteraction.onPointerMove = function (e: MouseEvent): void {\n\t\t\t\tif (e.buttons === 0 || (e.buttons & 1) === 1) {\n\t\t\t\t\tlegacyOnPointerMove.call(this, e);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (interaction.supportsPointerEvents) {\n\t\t\t\twindow.document.addEventListener(\"pointermove\", interaction.onPointerMove, true);\n\t\t\t\tinteraction.interactionDOMElement.addEventListener(\n\t\t\t\t\t\"pointerdown\",\n\t\t\t\t\tinteraction.onPointerDown,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\twindow.addEventListener(\"pointerup\", interaction.onPointerUp, true);\n\t\t\t} else {\n\t\t\t\twindow.document.addEventListener(\"mousemove\", interaction.onPointerMove, true);\n\t\t\t\tinteraction.interactionDOMElement.addEventListener(\n\t\t\t\t\t\"mousedown\",\n\t\t\t\t\tinteraction.onPointerDown,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\twindow.addEventListener(\"mouseup\", interaction.onPointerUp, true);\n\t\t\t}\n\t\t}\n\n\t\t// Register sound loader\n\t\tLoader.register(new HowlerLoader());\n\n\t\tthis.events.on(EGameEvents.GameEnd, () => {\n\t\t\tthis.com.messageManager.onGameEnd();\n\t\t});\n\n\t\t// Configure numeral\n\t\tNumeral.locale = gameConfig.selectedLocale;\n\t\tNumeral.currencyCode = gameConfig.stakes[0].currency;\n\t}\n\n\t/**\n\t * Return true if the game is paused for one of the given reasons.\n\t * If no reason passed, this method simply returns true if the game is paused.\n\t */\n\tpublic isPaused(...reasons: PauseReason[]): boolean {\n\t\tif (reasons.length === 0) {\n\t\t\treturn this.pauseReasons.size > 0;\n\t\t}\n\n\t\tfor (const reason of reasons) {\n\t\t\tif (this.pauseReasons.has(reason)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Add a reason to pause the game. The game is actually paused if it wasn't yet.\n\t */\n\tpublic pause(reason: PauseReason): void {\n\t\tconst wasPaused = this.isPaused();\n\t\tthis.pauseReasons.add(reason);\n\n\t\tconsole.debug(\n\t\t\t`game.pause(${reason}).` +\n\t\t\t\t` Game pause reasons: [${Array.from(this.pauseReasons).join(\", \")}]`\n\t\t);\n\n\t\tif (!wasPaused) {\n\t\t\tthis.events.emit(EGameEvents.GamePaused, true, reason);\n\n\t\t\t// send events to jackpot\n\t\t\tswitch (reason) {\n\t\t\t\tcase \"blur\":\n\t\t\t\t\tthis.com.bridge.emitEvent(\"JACKPOT_PAUSE\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"lockscreen\":\n\t\t\t\t\tthis.com.bridge.emitEvent(\"JACKPOT_SHOW_LOCKSCREEN\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"rules\":\n\t\t\t\tcase \"settings\":\n\t\t\t\tcase \"messagemanager\":\n\t\t\t\t\tthis.com.bridge.emitEvent(\"JACKPOT_CONFIGURE\", { interactive: false });\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tTweenUtils.pauseAllTweens(false);\n\t\t\tticker.shared.stop();\n\n\t\t\t// Mute scratch sounds\n\t\t\tif (Scratch2.scratchSound) {\n\t\t\t\tScratch2.scratchSound.mute(true);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Unregister given reason from the list of reasons to pause and resume the game\n\t * is necessary.\n\t *\n\t * @returns boolean: was the game resumed ?\n\t *     true if this call did actually unpause the game,\n\t *     false otherwise\n\t */\n\tpublic unpause(reason: PauseReason): boolean {\n\t\tconst wasPaused = this.isPaused();\n\t\tthis.pauseReasons.delete(reason);\n\n\t\tconsole.debug(\n\t\t\t`game.unpause(${reason}).` +\n\t\t\t\t` Game pause reasons: [${Array.from(this.pauseReasons).join(\", \")}]`\n\t\t);\n\n\t\t// try to unmute sound, if it was muted\n\t\tif (!this.isPaused()) {\n\t\t\tthis.mute(false);\n\t\t}\n\n\t\tif (wasPaused && !this.isPaused()) {\n\t\t\tthis.events.emit(EGameEvents.GamePaused, false, reason);\n\n\t\t\t// send events to jackpot\n\t\t\tswitch (reason) {\n\t\t\t\tcase \"blur\":\n\t\t\t\t\tthis.com.bridge.emitEvent(\"JACKPOT_RESUME\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"lockscreen\":\n\t\t\t\t\tthis.com.bridge.emitEvent(\"JACKPOT_HIDE_LOCKSCREEN\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"rules\":\n\t\t\t\tcase \"settings\":\n\t\t\t\tcase \"messagemanager\":\n\t\t\t\t\tif (!this.isPaused(\"rules\", \"settings\", \"messagemanager\")) {\n\t\t\t\t\t\tthis.com.bridge.emitEvent(\"JACKPOT_CONFIGURE\", { interactive: true });\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tTweenUtils.resumeAllTweens();\n\t\t\tticker.shared.start();\n\n\t\t\t// Unmute scratch sounds\n\t\t\tif (Scratch2.scratchSound) {\n\t\t\t\tScratch2.scratchSound.mute(false);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Pause tween animations\n\t */\n\tpublic onRulesOpen(): void {\n\t\tthis.pause(\"rules\");\n\n\t\tTweenUtils.resumeRulesTweens();\n\t\tif (Scratch2.scratchSound) {\n\t\t\tScratch2.scratchSound.mute(true);\n\t\t}\n\n\t\tthis.rulesVisible = true;\n\t\tthis.events.emit(EGameEvents.RulesOpen);\n\t}\n\n\t/**\n\t * Resume tween animations\n\t */\n\tpublic onRulesQuit(): void {\n\t\tTweenUtils.pauseRulesTweens();\n\t\tif (Scratch2.scratchSound) {\n\t\t\tScratch2.scratchSound.mute(false);\n\t\t}\n\n\t\tthis.unpause(\"rules\");\n\n\t\tthis.rulesVisible = false;\n\t\tthis.events.emit(EGameEvents.RulesQuit);\n\t}\n\n\t/**\n\t * Returns if the game sound is active (helper)\n\t */\n\tpublic get soundStatus(): boolean {\n\t\treturn this.vi.soundEnabled;\n\t}\n\n\t/**\n\t * Returns if the game is super jackpotized\n\t * (default: false)\n\t */\n\tpublic get hasSuperJackpot(): boolean {\n\t\t// TODO[epic=jackpot] change this\n\t\treturn true;\n\t}\n\n\t/**\n\t * Updates the purse\n\t * @param updateVi if should update the VI purse\n\t */\n\tpublic async getPurse(updateVi: boolean): Promise<IAmount> {\n\t\tconst updatePurse = (updatedAmount: IAmount) => {\n\t\t\tif (updateVi) {\n\t\t\t\tthis.vi.emitter.emit(\n\t\t\t\t\tEVisualIdentityAction.SetPurse,\n\t\t\t\t\tupdatedAmount ? new Amount(updatedAmount) : null\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tconst amount = await this.com.getPurse();\n\t\tupdatePurse(amount);\n\n\t\treturn amount;\n\t}\n\n\t/**\n\t * Initializes all game's components:\n\t * - Com\n\t * - i18n\n\t * - getGameConfiguration\n\t * @param done called once initialization is done (com, i18n, etc.)\n\t */\n\tpublic async init(done: () => void): Promise<void> {\n\t\tawait this.com.init();\n\n\t\tconst EVENTID_DIMENSIONS: string = \"DIMENSIONS\";\n\t\tconst EVENTID_DIMENSIONS_LEGACY: string = \"dimensions\";\n\t\tconst dimensions = {\n\t\t\twidth: this.settings.orientation === EOrientation.Portrait ? 480 : 800,\n\t\t\theight: this.settings.orientation === EOrientation.Portrait ? 640 : 600,\n\t\t};\n\t\tthis.com.bridge.emitEvent(EVENTID_DIMENSIONS, dimensions);\n\t\tthis.com.bridge.emitEvent(EVENTID_DIMENSIONS_LEGACY, dimensions);\n\n\t\tif (this.com.bridge.channel.setNotifier) {\n\t\t\tthis.com.bridge.channel.setNotifier(new Notifier(this));\n\t\t}\n\n\t\ttracker.init({ com: this.com, logger: Logger.getLogger() });\n\n\t\t// Init i18n\n\t\tthis.settings.language = this.gameConfig.selectedLocale;\n\n\t\ti18n.init({\n\t\t\tlng: this.gameConfig.selectedLocale,\n\t\t\tresources: {},\n\t\t});\n\n\t\ti18n.setDefaultNamespace(\"game\");\n\n\t\t// Init com i18n\n\t\tawait this.com.initI18n();\n\n\t\tdone();\n\t}\n\n\t/**\n\t * Starts the game.\n\t * @param view Specifies the first view to make appear.\n\t * @param done Optionnal callback called once start is done.\n\t * @returns A promise resolved when the game is loaded and started or void for backward compatibility.\n\t */\n\tpublic start(state: string, done?: () => void): Promise<void> | void {\n\t\treturn this._start(state, done);\n\t}\n\n\tprivate async _start(state: string, done?: () => void): Promise<void> {\n\t\t// Give event emitter to state.\n\t\tif (this.state) {\n\t\t\tthis.state.eventEmitter = this.events;\n\t\t}\n\n\t\tawait this._startVI();\n\n\t\t// When loading, we disable the lock screen.\n\t\t// The lock screen is only enabled when the game has been loaded.\n\t\t// To perform this action, just force resize\n\t\tthis.lockScreenEnabled = false;\n\t\tthis.resize(innerWidth, innerHeight, true);\n\n\t\t// Now add the canvas into the webpage\n\t\tthis.gameDiv.appendChild(this.application.view);\n\n\t\t// Update purse using the Communication module. Then, update the VI's purse\n\t\tawait this.getPurse(true);\n\n\t\t// Load all the game's assets!\n\t\tawait new Promise<void>((resolve) => {\n\t\t\tthis._loadAssets(\n\t\t\t\t() => {\n\t\t\t\t\tresolve();\n\t\t\t\t\t// Must call done there or the loading screen won't work.\n\t\t\t\t\t// Load process is unreliable.\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\tdone();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\t// Once assets loaded, start Visual Identity introduction\n\t\t\t\t\tthis.lockScreenEnabled = true;\n\n\t\t\t\t\t// Show the Visual Identity introduction once game's assets are loaded\n\t\t\t\t\t// Once animation finished, start the game!\n\t\t\t\t\tthis.vi.showIntroduction(async () => {\n\t\t\t\t\t\t// Show the ingame view of the Visual Identity first.\n\t\t\t\t\t\tthis.vi.showInGame();\n\n\t\t\t\t\t\t// Be sure game is resized to ensure transformations of the inGameView\n\t\t\t\t\t\t// of the Visual Identity. It is not deconnant.\n\t\t\t\t\t\tthis.resize(innerWidth, innerHeight);\n\n\t\t\t\t\t\t// Finally start the game\n\t\t\t\t\t\tawait super.start(state);\n\n\t\t\t\t\t\tthis.verifySymbolSpriteSignatures();\n\n\t\t\t\t\t\t// Notify ready and show in-game Visual Identity\n\t\t\t\t\t\tthis.vi.emit(EVisualIdentityAction.SetGameReady);\n\t\t\t\t\t});\n\n\t\t\t\t\t// Resize the back buffer and check\n\t\t\t\t\t// if we are in the right orientation\n\t\t\t\t\t// To perform this action, just force resize\n\t\t\t\t\tthis.resize(innerWidth, innerHeight, true);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\t// TODO[epic=jackpot] JACKPOT_CONFIGURE send lotteryGameName from locale\n\t\tthis.com.bridge.emitEvent(\"JACKPOT_CONFIGURE\", {\n\t\t\tlotteryGameName: i18n.t(\"gameName\", { returnEmptyString: true }),\n\t\t});\n\t}\n\n\tprotected verifySymbolSpriteSignatures() {\n\t\tlet authorizedSignatures = this.gameConfig.symbolSprites ?? [];\n\n\t\tconst wrongSignatures = authorizedSignatures.filter((s) => s.length !== 7 && s.length !== 64);\n\t\tif (wrongSignatures.length > 0) {\n\t\t\tthis.displayErrorPopin(this.com.t(\"no-network\", \"error\"));\n\t\t\tthrow new SymbolSpriteError(\n\t\t\t\t`Incorrect signatures: \"${wrongSignatures.join(\n\t\t\t\t\t\", \"\n\t\t\t\t)}\": signatures must be 7 or 64 characters long`\n\t\t\t);\n\t\t}\n\t\tconst symbolSpriteInstances = SymbolSprite.instances;\n\t\tconst currentSignatures = symbolSpriteInstances.map((symbolSprite) => symbolSprite.signature);\n\n\t\tconst unauthorizedSignatures = new Set(\n\t\t\tcurrentSignatures.filter((signature) => {\n\t\t\t\tfor (const authorizedSignature of authorizedSignatures) {\n\t\t\t\t\tconst signatureToCompare =\n\t\t\t\t\t\tauthorizedSignature.length === 7 ? signature.slice(0, 7) : signature;\n\t\t\t\t\tif (authorizedSignature === signatureToCompare) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t})\n\t\t);\n\t\tif (unauthorizedSignatures.size > 0) {\n\t\t\tthis.displayErrorPopin(this.com.t(\"no-network\", \"error\"));\n\t\t\tthrow new SymbolSpriteError(\n\t\t\t\t`Found symbolSprite signatures that were not specified in config.symbolSprites: \"${[\n\t\t\t\t\t...unauthorizedSignatures,\n\t\t\t\t].join(\", \")}\"`\n\t\t\t);\n\t\t}\n\t\tconst currentSignaturesToCompare = [\n\t\t\t...new Set([...currentSignatures, ...currentSignatures.map((s) => s.slice(0, 7))]),\n\t\t];\n\t\tconst signaturesNotUsed = new Set(\n\t\t\tauthorizedSignatures.filter((signature) => {\n\t\t\t\treturn !currentSignaturesToCompare.includes(signature);\n\t\t\t})\n\t\t);\n\t\tif (signaturesNotUsed.size > 0) {\n\t\t\tthis.displayErrorPopin(this.com.t(\"no-network\", \"error\"));\n\t\t\tthrow new SymbolSpriteError(\n\t\t\t\t`Signatures \"${[...signaturesNotUsed].join(\n\t\t\t\t\t\", \"\n\t\t\t\t)}\" were specified in config.symbolSprites but not used by any symbolSprite in the project`\n\t\t\t);\n\t\t}\n\t\tfor (const symbolSprite of symbolSpriteInstances) {\n\t\t\tsymbolSprite.seal();\n\t\t}\n\t}\n\n\tprotected displayErrorPopin(text: string): void {\n\t\tthis.com.messageManager\n\t\t\t.display({\n\t\t\t\tcode: undefined,\n\t\t\t\ttype: EMessageType.Immediate,\n\t\t\t\tpopup: {\n\t\t\t\t\tlevel: EPopinLevel.Error,\n\t\t\t\t\ttext,\n\t\t\t\t\tclosable: false,\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: this.com.t(\"close\", \"ui\"),\n\t\t\t\t\t\t\taction: PopinButtonAction.CloseGame,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t})\n\t\t\t.finally();\n\t}\n\n\tprivate async _startVI(): Promise<void> {\n\t\t// Set the base URL of all loaders to 'game/local/' (depends on the environment)\n\t\tconst baseUrl = this.gameConfig.frameworkPath;\n\n\t\t// Configure the visual identity loader by giving the base URL.\n\t\t// The base URL is available in game.conf.json then it can be customized by users\n\t\tconst viFolder = Tools.getFolder(this.gameConfig.modules.paths[\"@gdk/gamekit\"]);\n\t\tthis.vi.loader.baseUrl = `${baseUrl}${viFolder}/../assets/visualidentity/`;\n\n\t\t// Init the Visual Identity module. This will load all the required\n\t\t// assets and create the required views\n\t\tawait this.vi.init();\n\n\t\t// Setup illiko introduction. To skip introduction, just set skipIntro to true\n\t\tthis.vi.introductionView.skipIntro =\n\t\t\tthis.gameConfig.behavioursParameters[this.gameConfig.selectedBehaviour].viParameters\n\t\t\t\t.skipIntroduction ?? false;\n\n\t\t// Once done, settings are enabled by default. This must be done once the VI\n\t\t// has been initialized. Also, by default, the rules are disabled until the game\n\t\t// enters in the \"home\" view\n\t\tthis.vi.emitter.emit(EVisualIdentityAction.SettingsEnabled, true);\n\t\tthis.vi.emitter.emit(EVisualIdentityAction.RulesEnabled, false);\n\t\tthis.vi.emitter.emit(\n\t\t\tEVisualIdentityAction.SoundEnabled,\n\t\t\tthis.gameConfig.gameParameters.soundEnabled ?? true\n\t\t);\n\n\t\t// Just show the loading view (spinner + percentage)\n\t\tthis.vi.showLoadingView();\n\t}\n\n\t/**\n\t * Mute / demute all sounds in game. If sound state was already in the right state,\n\t * does nothing. If asked to unmute (muted == false) and sound was deactivated\n\t * from settings (this.vi.soundEnabled == false), does nothing (excepted if force == true).\n\t * If sound is actually changed, returns true, notifies com, and emit event\n\t * EVisualIdentityEvent.SoundStatusChanged\n\t *\n\t * @param value desired mute state\n\t * @param force: boolean: if true, force vi sound state to synchronized with given state\n\t * @return boolean: true is sound status changed\n\t */\n\tpublic mute(muted: boolean, force: boolean = false): boolean {\n\t\tif (this.muted === muted) {\n\t\t\treturn false;\n\t\t} else if (force) {\n\t\t\tthis._muted = muted;\n\t\t\tthis.vi.soundEnabled = true;\n\t\t}\n\n\t\tconst changed = this.tryToMute(muted);\n\n\t\tif (changed) {\n\t\t\tthis._muted = muted;\n\t\t\tthis.com.sendSoundStatus(!muted);\n\t\t\tthis.vi.emitter.emit(EVisualIdentityEvent.SoundStatusChanged);\n\t\t}\n\t}\n\n\t/**\n\t * Tries to disable/enable the sound in the applet. If the applet is already forced to be\n\t * muted, then nothing changes.\n\t * @param disabled defines wether or not the sound should be disabled.\n\t * @returns boolean: true if sound status was changed, false otherwise\n\t */\n\tpublic tryToMute(muted: boolean): boolean {\n\t\t// QUICKFIX: prevent stacking of sounds by howler,\n\t\t// erasing sound resume handlers filters sounds started when audio context was disabled\n\t\t// not really elegant since it could break things based on sound resume handlers\n\t\tif (!muted) {\n\t\t\tconst canceledSounds: string[] = [];\n\t\t\tfor (const howl of (Howler as any)._howls) {\n\t\t\t\tif (!howl._loop) {\n\t\t\t\t\tconst l = howl._onresume.length;\n\t\t\t\t\thowl._onresume = howl._onresume.filter(({ fn }) => fn.name !== \"playWebAudio\");\n\t\t\t\t\tif (howl._onresume.length < l) {\n\t\t\t\t\t\tcanceledSounds.push(howl._src);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (canceledSounds.length > 0) {\n\t\t\t\tconst canceledSoundNames = canceledSounds.map((s) => s.substr(s.lastIndexOf(\"/\") + 1));\n\t\t\t\tconsole.debug(\n\t\t\t\t\t`Sound actived: resume of these sounds was canceled` +\n\t\t\t\t\t\t` since they are not looping: ${canceledSoundNames.join(\", \")}`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (!muted && !this.vi.soundEnabled) {\n\t\t\treturn false;\n\t\t}\n\n\t\tHowler.mute(muted);\n\t\tthis.events.emit(EGameEvents.GameMuted, muted);\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Puts an interactive overlay over the game so all interaction are catched\n\t */\n\tpublic showInteractivityOverlay(): void {\n\t\tthis.stage.addChild(this._disableInteractivityOverlay);\n\t\tTweenMax.fromTo(\n\t\t\tthis._disableInteractivityOverlay,\n\t\t\t0.15,\n\t\t\t{ alpha: 0 },\n\t\t\t{ alpha: 1, ease: Power1.easeInOut }\n\t\t);\n\t}\n\n\t/**\n\t * Removes the interactive overlay\n\t */\n\tpublic removeInteractivityOverlay(): void {\n\t\tTweenMax.fromTo(\n\t\t\tthis._disableInteractivityOverlay,\n\t\t\t0.15,\n\t\t\t{ alpha: 1 },\n\t\t\t{\n\t\t\t\talpha: 0,\n\t\t\t\tease: Power1.easeInOut,\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tthis.stage.removeChild(this._disableInteractivityOverlay);\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * will return current game sounds state (muted or not)\n\t * @return true if the sound is muted.\n\t */\n\tpublic get muted(): boolean {\n\t\treturn (Howler as any).state !== \"running\" || this._muted;\n\t}\n\n\t/**\n\t * Returns the path of the assets folder according to the current theme in GameConf.\n\t */\n\tpublic getThemePath(): string {\n\t\tconst themeKey = this.gameConfig.selectedTheme;\n\t\tconst themePath = this.gameConfig.gameDescription.assets.themes[themeKey];\n\t\treturn `${this.gameConfig.gamePath}assets/${themePath}`;\n\t}\n\n\t/**\n\t * Return the game's infos. Should be overidden to add\n\t * more informations to log\n\t */\n\tprotected async getInfos(): Promise<any> {\n\t\tconst infos = await super.getInfos();\n\t\tinfos.envInfos.bridge = this.com.bridge.version;\n\t\tinfos.envInfos.renderMode = this.isCanvasRenderer ? \"Canvas\" : \"WebGL\";\n\t\tinfos.envInfos.renderSize = { width: this.renderer.width, height: this.renderer.height };\n\t\treturn infos;\n\t}\n\n\t/**\n\t * Get open game parameters\n\t */\n\tpublic getOpenGameParameters(): IOpenGameParameters {\n\t\treturn this.com.getOpenGameParameters();\n\t}\n\n\t/**\n\t * Resolves when done, with the current GameMode\n\t */\n\tpublic getGameMode(): Promise<EGameMode> {\n\t\treturn this.com.getGameMode();\n\t}\n\n\t/**\n\t * Loads the game assets\n\t * @param startCallback callback when starting the game once assets loaded\n\t * @param done callback when everything has been loaded and created\n\t */\n\tprivate async _loadAssets(startCallback: () => void, done: () => void): Promise<void> {\n\t\t// Track game is loaded\n\t\ttracker.track(\n\t\t\tnew GameLoaded({\n\t\t\t\ttechnicalName: this.gameConfig.lotteryGameCode,\n\t\t\t\tgameType: this.gameConfig.engine,\n\t\t\t\tlocale: this.gameConfig.selectedLocale,\n\t\t\t\tcurrency: this.gameConfig.stakes[0].currency,\n\t\t\t\ttheme: this.gameConfig.selectedTheme,\n\t\t\t})\n\t\t);\n\n\t\tthis.loader.onError = (file: string) => {\n\t\t\ttracker.track(new ErrorEvent(`Failed to load ${file}`));\n\t\t};\n\n\t\t// Now, just configure the loader of the game to have an empty\n\t\t// base URL\n\t\tthis.loader.baseUrl = \"\";\n\n\t\t// Add game locales\n\t\tconst expFolder =\n\t\t\tthis.gameConfig.frameworkPath +\n\t\t\tTools.getFolder(this.gameConfig.modules.paths[\"@gdk/gamekit\"]);\n\t\tthis.loader.add(`${expFolder}/../assets/game/${this.settings.language}.json`, \"game-i18n\");\n\n\t\t// Set the assets path of the game (game path + \"assets/\") and\n\t\t// call the main loader to load from the current Game Config File (game.conf.json)\n\t\tthis.loader.assetsPath = `${this.gameConfig.gamePath}assets/`;\n\t\tthis.loader.loadFrom(this.gameConfig, () => {\n\t\t\t// Merge game locales into the current ones\n\t\t\ti18n.addResourceBundle(\n\t\t\t\tthis.settings.language,\n\t\t\t\t\"game\",\n\t\t\t\tthis.loader.get(\"game-i18n\"),\n\t\t\t\ttrue,\n\t\t\t\tfalse\n\t\t\t);\n\n\t\t\t// Callback the user in order to add his/her own background(s)\n\t\t\t// view(s) etc.\n\t\t\tif (startCallback.length === 0) {\n\t\t\t\tstartCallback();\n\t\t\t}\n\n\t\t\treturn done();\n\t\t});\n\t}\n\n\tprivate _createOverlay(): void {\n\t\t// When updating the session becuase the browser was hidden, draw an overlay\n\t\tthis._disableInteractivityOverlay = new Graphics();\n\t\tthis._disableInteractivityOverlay.beginFill(0x0, 0.6);\n\t\tthis._disableInteractivityOverlay.drawRect(0, 0, 1, 1);\n\t\tthis._disableInteractivityOverlay.resize = new Resize(Resize.cover);\n\t\tthis._disableInteractivityOverlay.interactive = true;\n\t}\n}\n","import i18n from \"i18next\";\nimport type { IPrsTicketInfos } from \"@falcon/bridge/typings/prs\";\nimport type {\n\tIMtrModel,\n\tIMtrSession,\n\tIMtrBetRequest,\n\tIMtrBetResult,\n\tIService,\n\tIMtrReplaySession,\n\tIBetRequest,\n} from \"@falcon/bridge\";\nimport type { IAmount, IGameConf } from \"@gdk/core\";\nimport type { ApplicationOptions } from \"pixi.js\";\n\nimport { EPopinLevel, PopinButtonAction, EMessageType } from \"../../com\";\nimport { AbstractGame } from \"../abstractGame\";\nimport type { MotorsModel } from \"./model\";\nimport type { MotorsSession } from \"./session\";\n\n/**\n * Action game.\n * @template TModel Model typings.\n * @template TGameData Session typings.\n * @template TEventResponse \"evr\" typings.\n * @template TEventParameters Event parameters.\n * @template TMotorsSession override session typings.\n */\nexport class Action<\n\tTModel,\n\tTGameData,\n\tTEventResponse,\n\tTEventParameters,\n\tTMotorsSession extends MotorsSession<\n\t\tTGameData,\n\t\tTEventParameters,\n\t\tTEventResponse,\n\t\tTModel\n\t> = MotorsSession<TGameData, TEventParameters, TEventResponse, TModel>\n> extends AbstractGame {\n\t// Public members\n\tpublic model: MotorsModel<TModel>;\n\tpublic session: TMotorsSession;\n\n\tpublic selectedStake: IAmount;\n\n\t/**\n\t * Constructor\n\t * @param gameConfig: the game configuration (game.conf.json)\n\t * @param width: the canvas width\n\t * @param height: the canvas height\n\t * @param noWebGL: enable/disable WebGL (to force Canvas)\n\t * @param options: the Pixi.js applicaiton options\n\t */\n\tpublic constructor(\n\t\tgameConfig: IGameConf,\n\t\twidth: number,\n\t\theight: number,\n\t\tnoWebGL: boolean,\n\t\toptions: ApplicationOptions\n\t) {\n\t\t// Initialize\n\t\tsuper(gameConfig, width, height, noWebGL, options);\n\t\tthis.selectedStake =\n\t\t\tgameConfig.stakes[gameConfig.defaultStakeIndex ? gameConfig.defaultStakeIndex : 0];\n\t}\n\n\t/**\n\t * Returns the Motors model of the given service name (optional, default is taken from game config).\n\t * @param parameters: the request parameters (applicationId and service name)\n\t */\n\tpublic async getModel(parameters: IService = {}, demoMode?: boolean): Promise<IMtrModel<TModel>> {\n\t\treturn await this.com.getModel<TModel>(parameters, demoMode);\n\t}\n\n\t/**\n\t * Returns the Presto ticket information for the current player (token dependant).\n\t */\n\tpublic async getPrsTicketInfos(): Promise<IPrsTicketInfos> {\n\t\treturn await this.com.getPrsTicketInfos();\n\t}\n\n\t/**\n\t * Returns the Motors available sessions\n\t * @param parameters: the request parameters (applicationId and service name)\n\t */\n\tpublic getSession(\n\t\tparameters: IService = {},\n\t\tdemoMode: boolean = false\n\t): Promise<IMtrSession<TGameData, TEventParameters, TEventResponse>> {\n\t\treturn this.com.getMtrSession<TGameData, TEventParameters, TEventResponse>(\n\t\t\tparameters,\n\t\t\tundefined,\n\t\t\tdemoMode\n\t\t);\n\t}\n\n\t/**\n\t * Looks for session from bet it.\n\t * Returns a IMtrReplaySession if existing or undefined otherwise.\n\t * @param parameters\n\t */\n\tpublic getSessionFromBetId(\n\t\tparameters: IService = {}\n\t): Promise<IMtrReplaySession<TEventResponse, TEventParameters>> {\n\t\treturn this.com.getMtrSessionToReplay<TEventResponse, TEventParameters>(parameters);\n\t}\n\n\t/**\n\t * Starts a Motors session (bet)\n\t * @param parameters: the start session parameters\n\t */\n\tpublic async bet(\n\t\tparameters: IMtrBetRequest<TEventParameters>\n\t): Promise<IMtrBetResult<TEventResponse>> {\n\t\t// Bet\n\t\tconst bet = await this.com.createMtrBet<TEventResponse, TEventParameters>(parameters);\n\n\t\tif (bet.message) {\n\t\t\tthis.com.messageManager.push(bet.message);\n\t\t}\n\n\t\t// Update purse\n\t\tawait this.getPurse(true);\n\n\t\treturn bet;\n\t}\n\n\t/**\n\t * Has to be called before buying a ticket in real money\n\t * @returns promise\n\t * The lottery must resolve whenever it wants the player to continuer with his bet\n\t * The lottery must reject if ever it wants to cancel the player's bet process\n\t */\n\tpublic async preBet(betRequest: IBetRequest): Promise<void> {\n\t\treturn this.com.preBet(betRequest);\n\t}\n\n\t/**\n\t * Shows the continue game popup\n\t * @param done callback once the user closes the popup\n\t */\n\tpublic async showResumeGamePopup(): Promise<void> {\n\t\tawait this.com.messageManager.display({\n\t\t\tcode: \"MTR.RESUME\",\n\t\t\ttype: EMessageType.Immediate,\n\t\t\tpopup: {\n\t\t\t\tlevel: EPopinLevel.Info,\n\t\t\t\ttext: i18n.t(\"motors.resume.text\"),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: i18n.t(\"motors.resume.button\"),\n\t\t\t\t\t\taction: PopinButtonAction.ClosePopin,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Execute get context\n\t * @param parameters\n\t * @todo support gamif :)\n\t */\n\tpublic async getContext(parameters: any): Promise<any> {\n\t\tconst serviceName = parameters.serviceName || this.gameConfig.lotteryGameCode;\n\t\tconst context = await this.com.getContext<TModel>(serviceName);\n\n\t\treturn context;\n\t}\n}\n","export class MotorsModel<TModel> {\n\tpublic gameModelId: string;\n\tpublic gameName: string;\n\tpublic data: TModel;\n\n\t/**\n\t * Constructor\n\t * @param response: the response of the motors model request\n\t */\n\tpublic constructor(response: any) {\n\t\tthis.gameModelId = response.data.gmid;\n\t\tthis.gameName = response.data.gmn;\n\t\tthis.data = response.data.mdl;\n\t}\n}\n","import { EMtrSessionState } from \"@falcon/bridge\";\nimport type {\n\tIMtrBetResult,\n\tIMtrSession,\n\tIMtrReplaySession,\n\tIMtrSessionStep,\n} from \"@falcon/bridge\";\nimport type { IAmount } from \"@gdk/core\";\n\nimport { EMessageType, EPopinLevel, PopinButtonAction } from \"../../com\";\nimport type { Action } from \"./action\";\n\nexport enum ESessionMode {\n\tDefault = \"default\",\n\tResume = \"resume\",\n\tReplay = \"replay\",\n}\n\n/**\n * Motors Session.\n * @template TGameData Session typings.\n * @template TEventParameters \"prm\" typings.\n * @template TEventResponse \"evr\" typings.\n * @template TModel model definition.\n */\nexport class MotorsSession<TGameData, TEventParameters, TEventResponse, TModel> {\n\t/**\n\t * Demo mode.\n\t */\n\tpublic demo?: boolean;\n\t/**\n\t * Session id.\n\t */\n\tpublic id?: string = undefined;\n\t/**\n\t * Current session state.\n\t */\n\tpublic state?: string = undefined;\n\t/**\n\t * Session game data. Must be used ONLY for resuming game.\n\t * It will be undefined in replay mode.\n\t */\n\tpublic sessionData?: TGameData = undefined;\n\t/**\n\t * Bet amount.\n\t */\n\tpublic betAmount?: IAmount = undefined;\n\t/**\n\t * Won amount, defined only when the game is done or in replay mode.\n\t */\n\tpublic wonAmount?: IAmount = undefined;\n\t/**\n\t * Last bet/updatebet EVR.\n\t */\n\tpublic lastResponse?: TEventResponse = undefined;\n\t/**\n\t * Mtr session mode.\n\t */\n\tpublic mode?: ESessionMode = undefined;\n\t/**\n\t * Game model id.\n\t */\n\tpublic gmid?: number;\n\t/**\n\t *  Service name\n\t */\n\tpublic serviceName?: string;\n\t/**\n\t * Application id\n\t */\n\tpublic applicationId: string;\n\n\tprivate _game: Action<\n\t\tTModel,\n\t\tTGameData,\n\t\tTEventResponse,\n\t\tTEventParameters,\n\t\tMotorsSession<TGameData, TEventParameters, TEventResponse, TModel>\n\t>;\n\t/**\n\t * In case of a replay/resume, steps of the session.\n\t */\n\tprivate _steps?: Array<IMtrSessionStep<TEventParameters, TEventResponse>>;\n\t/**\n\t * In case of a replay/resume, parameters of the bet.\n\t */\n\tprivate _initialStepParameters?: TEventParameters;\n\n\t/**\n\t * Constructor.\n\t * @param payload mtrSession or mtrBetResult\n\t */\n\tpublic constructor(\n\t\tgame: Action<\n\t\t\tTModel,\n\t\t\tTGameData,\n\t\t\tTEventResponse,\n\t\t\tTEventParameters,\n\t\t\tMotorsSession<TGameData, TEventParameters, TEventResponse, TModel>\n\t\t>,\n\t\tpayload:\n\t\t\t| IMtrSession<TGameData, TEventParameters, TEventResponse>\n\t\t\t| IMtrBetResult<TEventResponse>\n\t\t\t| IMtrReplaySession<TEventResponse, TEventParameters>\n\t) {\n\t\tthis._game = game;\n\t\tif (\"res\" in payload.data) {\n\t\t\tthis._initFromBetRespone(payload as IMtrBetResult<TEventResponse>);\n\t\t} else if (\"gmd\" in payload.data) {\n\t\t\tthis._initFromSession(payload as IMtrSession<TGameData, TEventParameters, TEventResponse>);\n\t\t} else {\n\t\t\tthis._initFromReplaySession(payload as IMtrReplaySession<TEventResponse, TEventParameters>);\n\t\t}\n\t}\n\n\t/**\n\t * Executes a Motors action and update the session with the response.\n\t * @param event name of the event to trigger.\n\t * @param parameters parameters for the event.\n\t */\n\tpublic async updateBet(event: string, parameters?: TEventParameters): Promise<void> {\n\t\tif (this.mode === ESessionMode.Replay && this.hasReplaySteps()) {\n\t\t\tthis._updateFromBetResponse(this._getReplayStepAsBetResult());\n\t\t\treturn;\n\t\t}\n\n\t\t// Update\n\t\tconst response = await this._game.com.updateMtrBet<TEventResponse, TEventParameters>({\n\t\t\tserviceName: this.serviceName,\n\t\t\tapplicationId: this.applicationId,\n\t\t\tparameters: {\n\t\t\t\tprm: parameters,\n\t\t\t\tevn: event,\n\t\t\t\tsid: this.id,\n\t\t\t},\n\t\t\tdemo: this.demo,\n\t\t});\n\n\t\tif (response.message) {\n\t\t\tthis._game.com.messageManager.push(response.message);\n\t\t}\n\n\t\tthis._updateFromBetResponse(response);\n\t}\n\n\t/**\n\t * Check if session has replay steps.\n\t */\n\tpublic hasReplaySteps(): boolean {\n\t\treturn this._steps !== undefined;\n\t}\n\n\t/**\n\t * Usable on replay mode.\n\t * Returns next replay step as a betResult.\n\t */\n\tprivate _getReplayStepAsBetResult(): IMtrBetResult<TEventResponse> {\n\t\tif (!this._steps || !this._steps.length) {\n\t\t\tthrow new Error(\"No steps in the session.\");\n\t\t}\n\t\tconst step = this._steps.shift();\n\t\tconst result: IMtrBetResult<TEventResponse> = {\n\t\t\tapplicationId: this.applicationId,\n\t\t\tserviceName: this.serviceName,\n\t\t\tbetAmount: this.betAmount,\n\t\t\twonAmount: this.wonAmount,\n\t\t\treceiptId: \"\", // @todo is it important ?\n\t\t\tplatformBetId: \"\", // @todo is it important ?\n\t\t\tserverMessage: [],\n\t\t\tdata: {\n\t\t\t\tres: \"ok\",\n\t\t\t\tdata: {\n\t\t\t\t\tevr: step.res,\n\t\t\t\t\tst: step.st,\n\t\t\t\t\tgmid: this.gmid,\n\t\t\t\t\tid: this.id,\n\t\t\t\t},\n\t\t\t},\n\t\t\tdemo: false, // no replay for demo\n\t\t};\n\t\tif (!this._steps.length) {\n\t\t\tthis._steps = undefined;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Usable on replay mode.\n\t * Reurns initial action parameters.\n\t */\n\tpublic getInitialReplayParameters(): TEventParameters {\n\t\tif (!this._initialStepParameters) {\n\t\t\tthrow new Error(\"No steps in the session.\");\n\t\t}\n\t\treturn this._initialStepParameters;\n\t}\n\n\t/**\n\t * Usable on replay mode.\n\t * Returns next action parameters.\n\t */\n\tpublic getNextReplayStepParameters(): TEventParameters {\n\t\tif (!this._steps) {\n\t\t\tthis._game.com.messageManager.display({\n\t\t\t\tcode: \"MTR.REPLAY.RESOLVED\",\n\t\t\t\ttype: EMessageType.Immediate,\n\t\t\t\tpopup: {\n\t\t\t\t\tlevel: EPopinLevel.Error,\n\t\t\t\t\ttext: this._game.com.t(\"motors-replay-unfinished\", \"error\"),\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: this._game.com.t(\"close\", \"ui\") || \" Close\",\n\t\t\t\t\t\t\taction: PopinButtonAction.CloseGame,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\t\t\tthrow new Error(\"No steps in the session.\");\n\t\t}\n\t\treturn this._steps[0].par;\n\t}\n\n\t/**\n\t * Update state, last response and eventually wonAmount from BetResult.\n\t * @param betResult\n\t */\n\tprotected _updateFromBetResponse(betResult: IMtrBetResult<TEventResponse>): void {\n\t\tthis.state = betResult.data.data.st;\n\t\tif (betResult.wonAmount) {\n\t\t\tthis.wonAmount = betResult.wonAmount;\n\t\t}\n\t\tthis.lastResponse = betResult.data.data.evr;\n\t}\n\n\t/**\n\t * Init session data from BetResult.\n\t * @param betResult\n\t */\n\tprivate _initFromBetRespone(betResult: IMtrBetResult<TEventResponse>): void {\n\t\tthis.demo = betResult.demo;\n\t\tthis.id = betResult.data.data.id;\n\t\tthis.state = betResult.data.data.st;\n\t\tthis.betAmount = betResult.betAmount;\n\t\tif (betResult.wonAmount) {\n\t\t\tthis.wonAmount = betResult.wonAmount;\n\t\t}\n\t\tthis.lastResponse = betResult.data.data.evr;\n\t\tthis.mode = ESessionMode.Default;\n\t\tthis.gmid = betResult.data.data.gmid;\n\t\tthis.applicationId = betResult.applicationId;\n\t\tthis.serviceName = betResult.serviceName;\n\t}\n\n\t/**\n\t * Init session data from IMtrSession.\n\t * This method must be used ONLY for resuming game.\n\t * @param session\n\t */\n\tprivate _initFromSession(\n\t\tsession: IMtrSession<TGameData, TEventParameters, TEventResponse>\n\t): void {\n\t\tthis._initFromSessionOrReplaySession(session);\n\t\tthis.state = session.data.st;\n\t\tthis.sessionData = session.data.gmd;\n\t}\n\n\t/**\n\t * Init session data from IMtrReplaySession.\n\t * This method must be used ONLY for replaying or resuming a game.\n\t * @param session\n\t */\n\tprivate _initFromReplaySession(\n\t\tsession: IMtrReplaySession<TEventResponse, TEventParameters>\n\t): void {\n\t\tthis._initFromSessionOrReplaySession(session);\n\t\tif (session.data.steps && session.data.steps.length) {\n\t\t\tconst steps = session.data.steps.slice(1); // ignore first step (bet)\n\t\t\tif (steps.length) {\n\t\t\t\tthis._steps = steps;\n\t\t\t}\n\t\t\tthis._initialStepParameters = session.data.steps[0].par;\n\t\t\tthis.lastResponse = session.data.steps[0].res;\n\t\t\tthis.wonAmount = session.wonAmount;\n\t\t}\n\t}\n\n\tprivate _initFromSessionOrReplaySession(\n\t\tsession:\n\t\t\t| IMtrSession<TGameData, TEventParameters, TEventResponse>\n\t\t\t| IMtrReplaySession<TEventResponse, TEventParameters>\n\t): void {\n\t\tthis.demo = false; // no demo information on IMtrReplaySession so presume that demo = false\n\t\tthis.id = session.id;\n\t\tthis.betAmount = session.betAmount;\n\t\tthis.mode =\n\t\t\tsession.data.state === EMtrSessionState.InProgress\n\t\t\t\t? ESessionMode.Resume\n\t\t\t\t: ESessionMode.Replay;\n\t\tthis.gmid = session.data.gmid;\n\t\tthis.applicationId = session.applicationId;\n\t\tthis.serviceName = session.serviceName;\n\t}\n}\n","import { ContainerUtils, Docking } from \"@gdk/core-pixi\";\nimport { EOrientation } from \"@gdk/core\";\nimport { TimelineMax, TweenMax } from \"gsap\";\nimport { Point, utils } from \"pixi.js\";\nimport { EventEmitter } from \"events\";\nimport type { Container, interaction } from \"pixi.js\";\nimport type { Button } from \"@gdk/core-pixi\";\n\nimport { TweenUtils } from \"./tweenUtils\";\nimport type { AbstractGame } from \"./abstractGame\";\n\nexport interface ICarouselData {\n\t/**\n\t * The game\n\t */\n\tgame: AbstractGame;\n\n\t/**\n\t * The parent container of the carousel\n\t */\n\tcontainer: Container;\n\n\t/**\n\t * The previous arrow button\n\t */\n\tpreviousArrow?: Button;\n\n\t/**\n\t * The next arrow button\n\t */\n\tnextArrow?: Button;\n}\n\nexport interface ICarouselSettings {\n\t/**\n\t * Duration of animation\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * The offset between cards in px\n\t */\n\toffset?: number;\n\n\t/**\n\t * The orientation of the carousel\n\t */\n\torientation?: EOrientation;\n\n\t/**\n\t * The list of scales for cards\n\t */\n\tscales?: number[];\n\n\t/**\n\t * The fixed docking position for all cards (x axis for Orientation Landscape and y axis for Portrait orientation)\n\t */\n\tfixedDocking?: Point[];\n\n\t/**\n\t * The fixed docking if there is only 2 cards\n\t */\n\tfixedDocking2Cards?: Point[];\n\n\t/**\n\t * The max time during drag event can be active\n\t */\n\tmaxDragTime?: number;\n\n\t/**\n\t * The number of pixel required to be considered has a swipe\n\t */\n\tdragSensibility?: number;\n\n\t/**\n\t * If true, arrows won't be positionned automaticaly\n\t */\n\tuseCustomArrowsPositions?: boolean;\n}\n\nconst defaultCarouselSettings: ICarouselSettings = {\n\toffset: 0,\n\tmaxDragTime: 400,\n\tdragSensibility: 10,\n\tanimationDuration: 0.5,\n\tscales: [1, 0.75, 0.6, 0.5],\n\tfixedDocking: [new Point(0, 0), new Point(176, 128), new Point(300, 226), new Point(500, 324)],\n\tfixedDocking2Cards: [new Point(232, 232), new Point(-232, -232)],\n};\n\nexport class Carousel extends utils.EventEmitter {\n\t/* ATTRIBUTES */\n\n\t/**\n\t * The game\n\t */\n\tprotected game: AbstractGame;\n\n\t/**\n\t * The parent container\n\t */\n\tprotected container: Container;\n\n\t/**\n\t * List of cards\n\t */\n\tprotected cards: Container[];\n\n\t/**\n\t * Button for previous arrow\n\t */\n\tpublic previousArrow: Button;\n\n\t/**\n\t * Button for next arrow\n\t */\n\tpublic nextArrow: Button;\n\n\t/**\n\t * The active card\n\t */\n\tprotected activeCard: Container;\n\n\t/**\n\t * The previous card\n\t */\n\tprotected previousActiveCard: Container;\n\n\t/**\n\t * The settings of the carousel\n\t */\n\tprotected settings: ICarouselSettings;\n\n\t/**\n\t * The timestamp of the drag start\n\t */\n\tprotected dragStartTime: number = 0;\n\n\t/**\n\t * The mouse position when the drag has started\n\t */\n\tprotected dragStartPosition: Point = new Point();\n\n\t/**\n\t * Check if the player is currently dragging the carousel\n\t */\n\tpublic isDragging: boolean = false;\n\n\t/**\n\t * card sequence of z-order where you cycle from center to right, then left to center without wrong depth\n\t */\n\tpublic correspondingIndex: number[];\n\n\t/**\n\t * Check if the carousel is active\n\t */\n\tprotected isActive: boolean = false;\n\n\t/* LIFECYCLE */\n\n\t/**\n\t * @constructor\n\t * @param cards: List of cards containers\n\t * @param leftArrow: Button for Left Arrow\n\t * @param rightArrow: Button for Right Arrow\n\t */\n\tpublic constructor(data: ICarouselData, settings: ICarouselSettings = {}) {\n\t\tsuper();\n\n\t\tthis.game = data.game;\n\t\tthis.container = data.container;\n\t\tthis.previousArrow = data.previousArrow;\n\t\tthis.nextArrow = data.nextArrow;\n\n\t\t// cards ordered by childIndex\n\t\tconst visibleChildren: Container[] = (data.container.children as Container[]).filter(\n\t\t\t(card: Container) => card.visible\n\t\t);\n\n\t\t// cards childIndex, ordered by position from center to right then left to center\n\t\tthis.correspondingIndex = [];\n\t\tfor (let i = 0; i < visibleChildren.length; i++) {\n\t\t\tconst value = visibleChildren.length - 1 - i;\n\t\t\ti % 2 === 0 ? this.correspondingIndex.push(value) : this.correspondingIndex.unshift(value);\n\t\t}\n\t\tconst splicingNeeded = Math.ceil(visibleChildren.length / 2);\n\t\tfor (let i = 0; i < splicingNeeded; i++) {\n\t\t\tconst temp = this.correspondingIndex.pop();\n\t\t\tthis.correspondingIndex.splice(0, 0, temp);\n\t\t}\n\n\t\tthis.cards = [];\n\t\tfor (let i = 0; i < visibleChildren.length; i++) {\n\t\t\tthis.cards[i] = visibleChildren[this.correspondingIndex[i]];\n\t\t}\n\n\t\tthis.settings = {\n\t\t\t...defaultCarouselSettings,\n\t\t\torientation: this.game.settings.orientation,\n\t\t\t...settings,\n\t\t};\n\n\t\tif (this.previousArrow) {\n\t\t\tthis.previousArrow.on(\"pointertap\", () => {\n\t\t\t\tthis.previousCard();\n\t\t\t});\n\t\t}\n\n\t\tif (this.nextArrow) {\n\t\t\tthis.nextArrow.on(\"pointertap\", () => {\n\t\t\t\tthis.nextCard();\n\t\t\t});\n\t\t}\n\n\t\t// Init carousel\n\t\tthis.setButtonActive(this.isCarousel());\n\t\tthis.previousActiveCard = this.cards[0];\n\t\tthis.updateCardPositions(false);\n\n\t\t// Init drag\n\t\tthis.container.interactive = true;\n\t\tthis.container.on(\"pointerdown\", this.onDragStart.bind(this));\n\t\tthis.container.on(\"pointerup\", this.onDragStop.bind(this));\n\t\tthis.container.on(\"pointerupoutside\", this.onDragStop.bind(this));\n\n\t\t// Init scroll\n\t\tif (typeof window !== \"undefined\") {\n\t\t\twindow.addEventListener(\"wheel\", this.onScroll.bind(this));\n\t\t\twindow.addEventListener(\"mousewheel\", this.onScroll.bind(this));\n\t\t\twindow.addEventListener(\"DOMMouseScroll\", this.onScroll.bind(this));\n\t\t}\n\t}\n\n\t/* METHODS */\n\n\t/**\n\t * Get the maximum dimension depending of cards\n\t */\n\tprotected getCardDimension(): Point {\n\t\tlet width = 0;\n\t\tlet height = 0;\n\n\t\tfor (const card of this.cards) {\n\t\t\twidth = Math.max(width, card.width * (1 / card.scaleX));\n\t\t\theight = Math.max(height, card.height * (1 / card.scaleY));\n\t\t}\n\n\t\treturn new Point(width, height);\n\t}\n\n\t/**\n\t * Get the offset value between each cards relative to the container dimension\n\t */\n\tprotected getCardsOffset(): number {\n\t\tconst cardDimenion: Point = this.getCardDimension();\n\t\tconst containerDimension: Point = ContainerUtils.getContainerDimensions(\n\t\t\tthis.game.renderer,\n\t\t\tthis.container\n\t\t);\n\t\tconst cardOrientationSize: number =\n\t\t\t(this.settings.orientation === EOrientation.Landscape && cardDimenion.x) || cardDimenion.y;\n\t\tconst containerOrientationSize: number =\n\t\t\t(this.settings.orientation === EOrientation.Landscape && containerDimension.x) ||\n\t\t\tcontainerDimension.y;\n\n\t\tif (this.cards.length === 2) {\n\t\t\treturn Math.max(20, (containerOrientationSize - cardOrientationSize * 2) / 2);\n\t\t}\n\n\t\treturn Math.max(1, (containerOrientationSize - cardOrientationSize) / this.cards.length);\n\t}\n\n\t/**\n\t * Sort cards with children to prevent card to nlap other\n\t * @param reverseLastCard: True if you want that the right card will be the first drawed card\n\t */\n\tprotected sortCards(reverseLastCard: boolean = false): void {\n\t\tif (this.cards.length <= 2) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeCardIndex: number = this.cards.findIndex(\n\t\t\t(card: Container) => card === this.activeCard\n\t\t);\n\t\tconst nextCards = this.cards\n\t\t\t.slice(activeCardIndex)\n\t\t\t.concat(this.cards.slice(0, activeCardIndex));\n\t\tthis.cards = nextCards;\n\n\t\tconst odds: Container[] = [];\n\t\tconst evens: Container[] = [];\n\t\tconst separationIndex: number = Math.round(this.cards.length / 2);\n\t\tconst computedCards: Container[] = [\n\t\t\t...this.cards.slice(0, separationIndex),\n\t\t\t...this.cards.slice(separationIndex).reverse(),\n\t\t];\n\n\t\tfor (let i = 0; i < computedCards.length; i++) {\n\t\t\tif (i === 0) {\n\t\t\t\tcontinue;\n\t\t\t} else if (i % 2 === 0) {\n\t\t\t\tevens.push(computedCards[i]);\n\t\t\t} else {\n\t\t\t\todds.push(computedCards[i]);\n\t\t\t}\n\t\t}\n\n\t\tconst orders = [...evens, ...odds, computedCards[0]];\n\n\t\tif (reverseLastCard) {\n\t\t\torders.splice(0, 2, ...orders.slice(0, 2).reverse());\n\t\t}\n\n\t\torders.forEach((card: Container) => this.container.addChild(card));\n\t}\n\n\t/**\n\t * Convert an array of indices to the full array for each cards (useful to sort cards by peer)\n\t * @param array: The array to compute\n\t * @param isNegative: If true, the left part of the array will be negative\n\t * @returns The computed array\n\t */\n\tpublic computeArray(ar: number[], isNegative: boolean = false): number[] {\n\t\tconst computedArray = ar.slice();\n\n\t\t// shorten the base array size if needed\n\t\tconst sizeDiff = computedArray.length * 2 - 1 - this.cards.length;\n\t\tconst nbrValueToDelete = Math.floor(sizeDiff / 2);\n\t\tcomputedArray.splice(computedArray.length - nbrValueToDelete, nbrValueToDelete);\n\n\t\t// make the second part of the array with mirrored values\n\t\tlet reversedArray = computedArray.slice().reverse();\n\t\treversedArray.pop();\n\t\tif (isNegative) {\n\t\t\treversedArray = reversedArray.map((r) => (r = -r));\n\t\t}\n\n\t\t// even number of card mean the left side is shorter\n\t\tif (this.cards.length % 2 === 0) {\n\t\t\tcomputedArray.pop();\n\t\t}\n\n\t\treturn computedArray.concat(reversedArray);\n\t}\n\n\t/**\n\t * Get all card positions based on fixed docking positions\n\t * @returns\n\t */\n\tprotected getCardPositions(): number[] {\n\t\tif (this.cards.length <= 2 && Array.isArray(this.settings.fixedDocking2Cards)) {\n\t\t\treturn this.settings.fixedDocking2Cards.map((point: Point) =>\n\t\t\t\tthis.settings.orientation === EOrientation.Landscape ? point.x : point.y\n\t\t\t);\n\t\t}\n\n\t\tif (!Array.isArray(this.settings.fixedDocking)) {\n\t\t\tthrow new Error(\"[carousel] fixedDocking must not be an array of Point and not be empty\");\n\t\t}\n\n\t\treturn this.computeArray(\n\t\t\tthis.settings.fixedDocking.map((fixedDocking: Point) => {\n\t\t\t\treturn this.settings.orientation === EOrientation.Landscape\n\t\t\t\t\t? fixedDocking.x\n\t\t\t\t\t: fixedDocking.y;\n\t\t\t}),\n\t\t\ttrue\n\t\t);\n\t}\n\n\t/**\n\t * When scroll has been detected\n\t * @param e: The window event\n\t */\n\tprotected onScroll(e: Event): void {\n\t\tif (!this.container.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet delta: number = 0;\n\n\t\tif (!e) {\n\t\t\te = window.event;\n\t\t}\n\n\t\tif (event[\"wheelDelta\"]) {\n\t\t\t// IE/opera\n\t\t\tdelta = event[\"wheelDelta\"] / 120;\n\t\t} else if (event[\"detail\"]) {\n\t\t\t// mozilla\n\t\t\tdelta -= event[\"detail\"] / 3;\n\t\t}\n\n\t\tif (delta) {\n\t\t\tif (delta > 0) {\n\t\t\t\tthis.nextCard();\n\t\t\t} else {\n\t\t\t\tthis.previousCard();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @event\n\t * When the drag has started\n\t * @param e: The interaction event\n\t * @returns\n\t */\n\tprotected onDragStart(e: interaction.InteractionEvent): void {\n\t\tthis.isDragging = true;\n\t\tthis.dragStartTime = Date.now();\n\t\tthis.dragStartPosition = new Point(e.data.global.x, e.data.global.y);\n\t}\n\n\t/**\n\t * @event\n\t * When drag has stopped\n\t * @param e: The interaction event\n\t * @returns\n\t */\n\tprotected onDragStop(e: interaction.InteractionEvent): void {\n\t\tif (!this.isDragging) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst point: Point = new Point(e.data.global.x, e.data.global.y);\n\t\tconst diff: Point = new Point(\n\t\t\tpoint.x - this.dragStartPosition.x,\n\t\t\tpoint.y - this.dragStartPosition.y\n\t\t);\n\n\t\tif (\n\t\t\tthis.settings.orientation === EOrientation.Landscape &&\n\t\t\tMath.abs(diff.x) >= this.settings.dragSensibility\n\t\t) {\n\t\t\tif (point.x > this.dragStartPosition.x) {\n\t\t\t\tthis.previousCard();\n\t\t\t} else {\n\t\t\t\tthis.nextCard();\n\t\t\t}\n\t\t} else if (\n\t\t\tthis.settings.orientation === EOrientation.Portrait &&\n\t\t\tMath.abs(diff.y) >= this.settings.dragSensibility\n\t\t) {\n\t\t\tif (point.y > this.dragStartPosition.y) {\n\t\t\t\tthis.previousCard();\n\t\t\t} else {\n\t\t\t\tthis.nextCard();\n\t\t\t}\n\t\t}\n\n\t\tthis.isDragging = false;\n\t}\n\n\t/**\n\t * Update positions of arrows relative to the screen and orientation\n\t */\n\tprotected updateArrowsPositions(): void {\n\t\tconst isLandscape: boolean = this.settings.orientation === EOrientation.Landscape;\n\t\tconst rotation: number = (isLandscape ? 0 : 90) * (Math.PI / 180);\n\n\t\tif (this.previousArrow) {\n\t\t\tthis.previousArrow.rotation = rotation;\n\t\t\tthis.previousArrow.docking = isLandscape\n\t\t\t\t? new Docking(Docking.bottomLeft, 0, -40)\n\t\t\t\t: new Docking(Docking.bottomRight, 0, -102);\n\t\t}\n\n\t\tif (this.nextArrow) {\n\t\t\tthis.nextArrow.rotation = rotation;\n\t\t\tthis.nextArrow.docking = isLandscape\n\t\t\t\t? new Docking(Docking.bottomRight, 0, -40)\n\t\t\t\t: new Docking(Docking.bottomRight, 0, -40);\n\t\t}\n\t}\n\n\t/* PUBLIC */\n\n\t/**\n\t * Set a new card as active\n\t * @param nextCard: The next card to active\n\t * @param disableAnimation: True if animation should be disabled\n\t */\n\tpublic async setActiveCard(\n\t\tnextCard: Container,\n\t\tdisableAnimation: boolean = false\n\t): Promise<void> {\n\t\tif (!this.cards.find((card) => card === nextCard) || this.activeCard === nextCard) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.previousActiveCard = this.cards[0];\n\n\t\tconst index = this.cards.findIndex((c) => c === nextCard);\n\t\tfor (let i = 0; i < index; i++) {\n\t\t\tconst temp = this.cards.shift();\n\t\t\tthis.cards[this.cards.length] = temp;\n\t\t}\n\n\t\tconst isReverseRotation = (this.cards.length - index) % 2 === 1;\n\t\tawait this.updateCardPositions(disableAnimation, isReverseRotation);\n\t}\n\n\t/**\n\t * Update positions of cards\n\t * @param disableAnimation: If true, cards will be updated without animation\n\t * @param reverseRotation: True if the default rotation should be reversed for better animation\n\t */\n\tpublic async updateCardPositions(\n\t\tdisableAnimation: boolean = false,\n\t\treverseRotation: boolean = false\n\t): Promise<void> {\n\t\tconst timeline: TimelineMax = new TimelineMax();\n\t\tconst positions: number[] = this.getCardPositions();\n\t\tconst scales: number[] =\n\t\t\tthis.cards.length > 2\n\t\t\t\t? this.computeArray(this.settings.scales)\n\t\t\t\t: new Array(this.cards.length).fill(0.8);\n\n\t\tthis.activeCard = this.cards[0];\n\t\tthis.setButtonActive(false);\n\n\t\tif (this.container.worldVisible) {\n\t\t\tthis.emit(\"beforeChangeCard\", this.activeCard, this.previousActiveCard);\n\t\t}\n\n\t\tfor (let i = 0; i < this.cards.length; i++) {\n\t\t\tconst card = this.cards[i];\n\t\t\tconst scaleXY: number = scales[i];\n\t\t\tconst dockingX: number =\n\t\t\t\tthis.settings.orientation === EOrientation.Landscape ? positions[i] : card.docking.x;\n\t\t\tconst dockingY: number =\n\t\t\t\tthis.settings.orientation === EOrientation.Portrait ? positions[i] : card.docking.y;\n\n\t\t\t// reorder cards in the container hierarchy (without animation)\n\t\t\tthis.container.addChild(this.cards[this.correspondingIndex.findIndex((c) => c === i)]);\n\n\t\t\tif (disableAnimation) {\n\t\t\t\tcard.scaleXY = scaleXY;\n\t\t\t\tcard.docking.x = dockingX;\n\t\t\t\tcard.docking.y = dockingY;\n\t\t\t} else {\n\t\t\t\ttimeline.add(\n\t\t\t\t\tTweenMax.to(card.docking, this.settings.animationDuration, { x: dockingX, y: dockingY }),\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t\ttimeline.add(TweenMax.to(card, this.settings.animationDuration, { scaleXY }), 0);\n\t\t\t}\n\t\t}\n\n\t\t// put the card that is moving the most behind the others\n\t\tif (this.cards.length % 2 === 1) {\n\t\t\tif (reverseRotation) {\n\t\t\t\tthis.container.setChildIndex(\n\t\t\t\t\tthis.cards[this.correspondingIndex.findIndex((c) => c === 1)],\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (!reverseRotation) {\n\t\t\tconst farRightBackCard = Math.floor((this.cards.length - 1) / 2);\n\t\t\tthis.container.setChildIndex(this.cards[farRightBackCard], 0);\n\t\t}\n\n\t\tif (!disableAnimation) {\n\t\t\tawait TweenUtils.playTween(timeline);\n\t\t}\n\n\t\tthis.setButtonActive(this.isCarousel());\n\n\t\tif (this.container.worldVisible) {\n\t\t\tthis.emit(\"changeCard\", this.activeCard, this.previousActiveCard);\n\t\t}\n\n\t\tif (!this.settings.useCustomArrowsPositions) {\n\t\t\tthis.updateArrowsPositions();\n\t\t}\n\n\t\tthis.emit(\"cardPositionsUpdated\");\n\t}\n\n\t/**\n\t * Active or deactive buttons Left/Right arrow\n\t * @param active: True if buttons must be active\n\t */\n\tpublic setButtonActive(active: boolean = true): void {\n\t\tif (this.getCards().length <= 2) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.previousArrow) {\n\t\t\tthis.previousArrow.enabled = this.previousArrow.visible = active;\n\t\t}\n\n\t\tif (this.nextArrow) {\n\t\t\tthis.nextArrow.enabled = this.nextArrow.visible = active;\n\t\t}\n\t}\n\n\t/**\n\t * Switch to previous card\n\t * @param disableAnimation: True if the changement should be instant\n\t */\n\tpublic previousCard(disableAnimation: boolean = false): Promise<void> {\n\t\tif (!this.isCarousel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.previousActiveCard = this.cards[0];\n\t\tconst temp = this.cards.pop();\n\t\tthis.cards.splice(0, 0, temp);\n\t\tthis.updateCardPositions(disableAnimation, true);\n\t}\n\n\t/**\n\t * Switch to next card\n\t * @param disableAnimation: True if the changement shoud be instant\n\t */\n\tpublic nextCard(disableAnimation: boolean = false): Promise<void> {\n\t\tif (!this.isCarousel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.previousActiveCard = this.cards[0];\n\t\tconst temp = this.cards.shift();\n\t\tthis.cards[this.cards.length] = temp;\n\t\tthis.updateCardPositions(disableAnimation);\n\t}\n\n\t/**\n\t * Kill the carousel and remove all events\n\t */\n\tpublic kill(): void {\n\t\tif (typeof window !== \"undefined\") {\n\t\t\twindow.removeEventListener(\"wheel\", this.onScroll.bind(this));\n\t\t\twindow.removeEventListener(\"mousewheel\", this.onScroll.bind(this));\n\t\t\twindow.removeEventListener(\"DOMMouseScroll\", this.onScroll.bind(this));\n\t\t}\n\t}\n\n\t/**\n\t * Sets wether or not the carousel is active.\n\t * @param isActive defines wether or not the carousel is active.\n\t */\n\tpublic setActive(isActive: boolean): boolean {\n\t\treturn (this.isActive = isActive);\n\t}\n\n\t/* GETTERS */\n\n\t/**\n\t * Know if arrows should be active, in relation with the number of cards present in carousel\n\t */\n\tpublic isCarousel(): boolean {\n\t\treturn this.cards.length > 2;\n\t}\n\n\t/**\n\t * Get the active card\n\t * @returns\n\t */\n\tpublic getActiveCard(): Container {\n\t\treturn this.activeCard;\n\t}\n\n\t/**\n\t * Get list of cards\n\t * @returns\n\t */\n\tpublic getCards(): Container[] {\n\t\treturn this.cards;\n\t}\n\n\t/**\n\t * Check if the carousel is in simple mode (without wheel)\n\t * @returns True if the carousel is in simple mode\n\t */\n\tpublic isSimpleMode(): boolean {\n\t\treturn this.cards.length <= 2;\n\t}\n}\n","import i18n from \"i18next\";\nimport type { IEventReference } from \"@falcon/bridge/typings/platform\";\nimport type {\n\tIItgBetRequest,\n\tIItgBetResult,\n\tIItgTicket,\n\tIBetRequest,\n\tEGameMode,\n\tIUserInformation,\n} from \"@falcon/bridge\";\nimport type { IAmount, IGameConf } from \"@gdk/core\";\nimport type { ApplicationOptions } from \"pixi.js\";\n\nimport { EMessageType, EPopinLevel, PopinButtonAction } from \"../../com\";\nimport { AbstractGame } from \"../abstractGame\";\n\nexport class Express extends AbstractGame {\n\tpublic selectedStake: IAmount;\n\t/**\n\t * Constructor\n\t * @param gameConfig: the game configuration (game.conf.json)\n\t * @param width: the canvas width\n\t * @param height: the canvas height\n\t * @param noWebGL: enable/disable WebGL (to force Canvas)\n\t * @param options: the Pixi.js applicaiton options\n\t */\n\tpublic constructor(\n\t\tgameConfig: IGameConf,\n\t\twidth: number,\n\t\theight: number,\n\t\tnoWebGL: boolean,\n\t\toptions: ApplicationOptions\n\t) {\n\t\t// Initialize\n\t\tsuper(gameConfig, width, height, noWebGL, options);\n\n\t\tthis.selectedStake =\n\t\t\tgameConfig.stakes[gameConfig.defaultStakeIndex ? gameConfig.defaultStakeIndex : 0];\n\t}\n\n\t/**\n\t * Creates an ITG bet request.\n\t * @param betRequest: the bet request parameters.\n\t */\n\tpublic async bet(betRequest: IItgBetRequest): Promise<IItgTicket> {\n\t\tif (!betRequest.stake) {\n\t\t\tthrow new Error(\"Try to bet with parameters.stake undefined\");\n\t\t}\n\n\t\t// Bet\n\t\tconst betResponse = await this.com.createItgBet(betRequest);\n\n\t\t// Refresh purse\n\t\tawait this.getPurse(true);\n\n\t\treturn this._betResponseToTicketData(betRequest, betResponse);\n\t}\n\n\t/**\n\t * Shows the continue game popup\n\t */\n\tpublic async showResumeGamePopup(): Promise<void> {\n\t\treturn await this.com.messageManager.display({\n\t\t\tcode: \"ITG.RESUME\",\n\t\t\ttype: EMessageType.Immediate,\n\t\t\tpopup: {\n\t\t\t\tlevel: EPopinLevel.Info,\n\t\t\t\ttext: i18n.t(\"itg.resume.text\"),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: i18n.t(\"itg.resume.button\"),\n\t\t\t\t\t\taction: PopinButtonAction.ClosePopin,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Shows the continue game popup\n\t */\n\tpublic async showReplayStartPopup(): Promise<void> {\n\t\treturn await this.com.messageManager.display({\n\t\t\tcode: \"ITG.REPLAY\",\n\t\t\ttype: EMessageType.Immediate,\n\t\t\tpopup: {\n\t\t\t\tlevel: EPopinLevel.Info,\n\t\t\t\ttext: i18n.t(\"itg.replay.text\"),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: i18n.t(\"itg.replay.button\"),\n\t\t\t\t\t\taction: PopinButtonAction.ClosePopin,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Returns the current player's information.\n\t * null if the player is not authenticated\n\t */\n\tpublic async getUserInformation(): Promise<IUserInformation> {\n\t\treturn this.com.getUserInformation();\n\t}\n\n\t/**\n\t * Has to be called before buying a ticket\n\t * The event will be sent only if `handlePreBet` parameter is set to true in the behaviourParameters set of the gameConfig\n\t * @returns promise\n\t * The lottery must resolve whenever it wants the player to continue with his bet\n\t * The lottery must reject if ever it wants to cancel the player's bet process\n\t */\n\tpublic async preBet(betRequest: IBetRequest): Promise<void> {\n\t\tif (this.gameConfig.gameParameters.handlePreBet) {\n\t\t\treturn this.com.preBet(betRequest);\n\t\t} else {\n\t\t\t// default behaviour\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\n\t/**\n\t * This hook can be called at the end of the revelation (after the result)\n\t * The event will be sent only if `gameEndHook` parameter is set to true in the behaviourParameters set of the gameConfig\n\t * It notifies the lottery that the game revelation has ended.\n\t * Allows the lottery to present the player a custom message asking him if he wants to replay.\n\t * The lottery has the ability to launch directly a new bet with a given stake and mode or to go back to the home view of the game.\n\t * @returns promise\n\t * The lottery must resolve with a stake and a demoMode whenever it wants the game to automatically buy a new game\n\t * The lottery must resolve with undefined otherwise\n\t */\n\tpublic async gameEndHook(\n\t\tticket: IItgTicket\n\t): Promise<undefined | { stake: IAmount; demoMode: boolean }> {\n\t\tif (this.gameConfig.gameParameters.gameEndHook) {\n\t\t\treturn this.com.bridge.emitEvent(\"GAME_END_HOOK\", { ticket, stakes: this.gameConfig.stakes });\n\t\t} else {\n\t\t\t// default behaviour\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\t}\n\n\t/**\n\t * Notifies the lottery that there is an existing opened ticket to resume.\n\t * The event will be sent only if `resumeHook` parameter is set to true in the behaviourParameters set of the gameConfig\n\t * The lottery has the ability to present the player with the info and to wether accept or refuse the resuming.\n\t * Resfusing the resuming of the ticket can return to home or close the game for example, depending on the lottery guidelines.\n\t * @returns promise\n\t * The lottery must resolve `true`to go on with resuming the ticket\n\t * The lottery must resolve `false` otherwise.\n\t */\n\tpublic async resumeHook(ticket: IItgTicket): Promise<boolean> {\n\t\tif (this.gameConfig.gameParameters.resumeHook) {\n\t\t\treturn this.com.bridge.emitEvent(\"RESUME_HOOK\", ticket);\n\t\t} else {\n\t\t\t// default behaviour\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\t}\n\n\t/**\n\t * Request a new game mode\n\t *  @param options : one of the two EGameMode\n\t *  - if current game mode is already the one, it will do nothing\n\t *  - otherwise creates the dedicated IF session\n\t * Resolves when done, with the new current GameMode\n\t */\n\tpublic async updateGameMode(mode: EGameMode): Promise<string> {\n\t\treturn this.com.updateGameMode(mode);\n\t}\n\n\t/**\n\t * Returns the first existing ticket that haven't been claimed by the user.\n\t * @param serviceName the service name associated to the ticket.\n\t */\n\tpublic async getExistingTicket(serviceName: string, demo: boolean): Promise<IItgTicket> {\n\t\tconst response = await this.com.getItgTickets(serviceName, demo);\n\t\treturn response[0];\n\t}\n\n\t/**\n\t * Retrieve ticket to replay if any\n\t * returns null if no ticket to replay.\n\t */\n\tpublic async getTicketToReplay(demo: boolean): Promise<IItgTicket> {\n\t\treturn this.com.getTicketToReplay(demo);\n\t}\n\n\t/**\n\t * Updates the given ticket\n\t * @param betRequest: the bet request parameters.\n\t * @param ticketId the id of the ticket to update.\n\t * @param showError display an error on failed request\n\t */\n\tpublic async updateTicket(\n\t\tbetRequest: IItgBetRequest,\n\t\tticketId: number,\n\t\tshowError: boolean = true\n\t): Promise<IItgTicket> {\n\t\tconst betResponse = await this.com.updateItgTicket(betRequest, ticketId, showError);\n\t\treturn this._betResponseToTicketData(betRequest, betResponse);\n\t}\n\n\t/**\n\t * Claims an ITG ticket\n\t * @param betRequest: the bet request parameters.\n\t * @param ticketId the id of the ticket to claim.\n\t */\n\tpublic async claim(betRequest: IItgBetRequest, ticketId: number): Promise<IItgTicket> {\n\t\tconst betResponse = await this.com.claimItgBet(betRequest, ticketId);\n\n\t\tawait this.getPurse(true);\n\n\t\treturn this._betResponseToTicketData(betRequest, betResponse);\n\t}\n\n\tprivate _betResponseToTicketData(\n\t\tbetRequest: IItgBetRequest,\n\t\tbetResponse: IItgBetResult\n\t): IItgTicket {\n\t\tconst ticket: IItgTicket = betResponse.data;\n\t\tticket.betAmount = betRequest.stake;\n\t\tticket.wonAmount = betResponse.wonAmount;\n\t\tticket.receiptId = betResponse.receiptId;\n\t\tticket.platformBetId = betResponse.platformBetId;\n\t\tticket.demo = betResponse.demo;\n\n\t\tconst eventReference = (ticket as IItgTicket & IEventReference).eventReference;\n\n\t\tif (eventReference) {\n\t\t\tticket.prize = {\n\t\t\t\trank: eventReference.prizeRank,\n\t\t\t\ttype: eventReference.prizeType,\n\t\t\t\tdescription: eventReference.prizeDescription,\n\t\t\t};\n\t\t}\n\n\t\tif (betResponse.serverMessage) {\n\t\t\tconst ids = betResponse.serverMessage.map((e) => e.id).filter((id) => id !== \"NO_ACTION\");\n\t\t\tif (ids.length !== 0) {\n\t\t\t\tticket.action = ids[0];\n\t\t\t}\n\t\t}\n\n\t\treturn ticket;\n\t}\n\n\tpublic get betMode(): \"BET_AUTO_CLAIM\" | \"BET_MANUAL_CLAIM\" {\n\t\treturn (this.gameConfig.selectedBetMode || \"\").toLowerCase().indexOf(\"manual\") >= 0\n\t\t\t? \"BET_MANUAL_CLAIM\"\n\t\t\t: \"BET_AUTO_CLAIM\";\n\t}\n}\n","import { Amount, Logger } from \"@gdk/core\";\nimport type { IItgTicket, IItgPrize } from \"@falcon/bridge\";\n\nimport { TweenUtils } from \"../tweenUtils\";\nimport type { Express } from \"./express\";\n\nexport enum ETicketStatus {\n\tCLAIMED = \"CLAIMED\",\n\tOPENED = \"OPENED\",\n}\n\nexport enum ETicketMode {\n\tDEFAULT,\n\tRESUME,\n\tREPLAY,\n}\n\nexport enum EBetResponseAction {\n\tNO_ACTION = \"NO_ACTION\",\n\tSUSPENSION_TRIGGERED = \"SUSPENSION_TRIGGERED\",\n\tAUTOWITHDRAWAL_TRIGGERED = \"AUTOWITHDRAWAL_TRIGGERED\",\n}\n\nexport abstract class Ticket<T = {}, U extends Express = Express> {\n\tpublic readonly demo: boolean;\n\tpublic readonly stake: Amount;\n\tpublic readonly symbol: string;\n\tpublic readonly receiptId: string;\n\tpublic readonly ticketId: number;\n\tpublic readonly mode: ETicketMode;\n\tpublic readonly serviceName: string;\n\tpublic readonly platformBetId: string;\n\tpublic status: ETicketStatus;\n\tpublic wonAmount: Amount;\n\n\t/**\n\t * Flag from the lottery as SUSPENSION_TRIGGERED, AUTOWITHDRAWAL_TRIGGERED...\n\t */\n\tpublic action: EBetResponseAction;\n\t/**\n\t * RevelationData, has to be set to last data before updating the ticket\n\t */\n\tpublic revelationData: T;\n\t/**\n\t * The bet response object keeped reference.\n\t */\n\tpublic readonly ticket: IItgTicket;\n\n\tprivate _updateInProgress: boolean = false;\n\n\tprivate _updatePromise: Promise<void>;\n\n\t/**\n\t * Constructor\n\t * @param ticket an IItgTicket\n\t * @param demo wether or not the ticket is in demo mode.\n\t */\n\tpublic constructor(\n\t\tticket: IItgTicket,\n\t\tmode: ETicketMode = ETicketMode.DEFAULT,\n\t\tprotected _game: U\n\t) {\n\t\tthis.ticket = ticket;\n\t\tthis.serviceName = ticket.serviceName;\n\t\tthis.stake = new Amount(ticket.betAmount);\n\t\tthis.demo = ticket.demo;\n\t\tthis.wonAmount = ticket.wonAmount ? new Amount(ticket.wonAmount) : null;\n\t\tthis.symbol = ticket.symbol;\n\t\tthis.receiptId = ticket.receiptId;\n\t\tthis.platformBetId = ticket.platformBetId;\n\t\tthis.ticketId = ticket.id;\n\t\tthis.mode = mode;\n\n\t\t// parse symbol\n\t\tthis.parse();\n\n\t\t// check revelationDataValidity so that resume don't get stuck\n\t\tlet revelationData = ticket.revelationData;\n\t\tif (revelationData !== null) {\n\t\t\tlet invalidReason = \"areRevelationDataValid returned false\";\n\t\t\tlet revelationDataValid: boolean;\n\t\t\ttry {\n\t\t\t\trevelationDataValid = this.areRevelationDataValid(revelationData);\n\t\t\t} catch (e) {\n\t\t\t\tinvalidReason = `areRevelationDataValid error: ${e.message}`;\n\t\t\t\trevelationDataValid = false;\n\t\t\t}\n\n\t\t\tif (!revelationDataValid) {\n\t\t\t\tLogger.getLogger().error(\n\t\t\t\t\t`${invalidReason} with data: \\n\\n${JSON.stringify(revelationData)}`\n\t\t\t\t);\n\t\t\t\trevelationData = null;\n\t\t\t}\n\t\t}\n\t\tthis.revelationData = revelationData;\n\n\t\tif (ticket.action) {\n\t\t\tthis.action = ticket.action as EBetResponseAction;\n\t\t}\n\t\tthis.status = ticket.status as ETicketStatus;\n\t}\n\n\t/**\n\t * Claim ITG ticket\n\t */\n\tpublic async claim(): Promise<IItgTicket> {\n\t\t// if ticket is already claimed, don't call claim\n\t\tif (\n\t\t\tthis.status === ETicketStatus.CLAIMED &&\n\t\t\t(this._game.betMode === \"BET_MANUAL_CLAIM\" || this.mode === ETicketMode.REPLAY)\n\t\t) {\n\t\t\treturn this.ticket;\n\t\t}\n\n\t\tconst response = await this._game.claim(\n\t\t\t{\n\t\t\t\tapplicationId: \"ITG\",\n\t\t\t\tserviceName: this._game.gameConfig.lotteryGameCode,\n\t\t\t\tstake: {\n\t\t\t\t\tcurrency: this.stake.currency,\n\t\t\t\t\tvalue: this.stake.value,\n\t\t\t\t},\n\t\t\t\tdemo: this.demo,\n\t\t\t},\n\t\t\tthis.ticketId\n\t\t);\n\n\t\tthis.status = response.status as ETicketStatus;\n\t\tthis.wonAmount = response.wonAmount ? new Amount(response.wonAmount) : null;\n\t\tif (response.action) {\n\t\t\tthis.action = response.action as EBetResponseAction;\n\t\t}\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * Update ticket by sending revelation data to the server\n\t * @param showError display an error message on request failure (default: true)\n\t */\n\tpublic async update(showError: boolean = true): Promise<void> {\n\t\tif (this._updateInProgress || this.mode === ETicketMode.REPLAY) {\n\t\t\treturn this._updatePromise;\n\t\t}\n\t\tthis._updateInProgress = true;\n\t\tawait TweenUtils.wait(0.5);\n\t\tawait this._updateTicketNow(showError);\n\t}\n\n\tprivate async _updateTicketNow(showError: boolean = true): Promise<void> {\n\t\tthis._updateInProgress = false;\n\t\t// never update a claimed ticket\n\t\tif (this.status === ETicketStatus.CLAIMED) {\n\t\t\treturn;\n\t\t}\n\t\tawait this._game.updateTicket(\n\t\t\t{\n\t\t\t\tapplicationId: \"ITG\",\n\t\t\t\tdemo: this.ticket.demo,\n\t\t\t\tserviceName: this._game.gameConfig.lotteryGameCode,\n\t\t\t\tstake: {\n\t\t\t\t\tcurrency: this.stake.currency,\n\t\t\t\t\tvalue: this.stake.value,\n\t\t\t\t},\n\t\t\t\trevelationData: this.revelationData,\n\t\t\t},\n\t\t\tthis.ticketId,\n\t\t\tshowError\n\t\t);\n\t}\n\n\t/**\n\t * Check revalationData validity\n\t * Must be implemented in Ticket class in the game\n\t * Must return true if revelationData format is valid and handled, must return false otherwise\n\t * Parsed symbol data are available at this time\n\t * If not implemented in the game it will return false hence revelation data will be skipped\n\t * @param revelationData\n\t */\n\tprotected abstract areRevelationDataValid(revelationData: T): boolean;\n\n\t/**\n\t * Parse symbol\n\t * To be implemented in the game Ticket class\n\t */\n\tprotected abstract parse(): void;\n\n\t/**\n\t * Return the prize object of the ticket\n\t */\n\tpublic get prize(): IItgPrize {\n\t\treturn this.ticket.prize;\n\t}\n}\n","export enum EGameEvents {\n\tGameStart = \"gamestart\",\n\tGameEnd = \"gameend\",\n\tRulesOpen = \"rulesopen\",\n\tRulesQuit = \"rulesquit\",\n\tGamePaused = \"gamepaused\",\n\tGameMuted = \"gamemuted\",\n}\n","import { TweenMax } from \"gsap\";\n\nimport { EGameEvents } from \"./gameEvents\";\nimport { EVisualIdentityEvent } from \"../adaptativeVisualIdentity/events\";\nimport type { AbstractGame } from \"./abstractGame\";\n\nexport interface IInactivityOptions {\n\t/**\n\t * If true, the timer will restart after each call of \"onInactivity\" event\n\t */\n\tloop?: boolean;\n\n\t/**\n\t * Delay of the timer before calling \"onInactivity\" event\n\t */\n\tdelay?: number;\n\n\t/**\n\t * If true, the timer will be launched after instantiate\n\t */\n\tautoStart?: boolean;\n\n\t/**\n\t * Set a delay before each loop. If this attribute is not assigned, the delay between loops will be the default delay\n\t */\n\tloopDelay?: number;\n}\n\nconst defaultInactivityOptions = {\n\tdelay: 5,\n\tautoStart: true,\n};\n\nexport class Inactivity {\n\t/* ATTRIBUTES */\n\n\t/**\n\t * Set to true to call event every delay exceed\n\t */\n\tprotected loop: boolean = false;\n\n\t/**\n\t * The function called when delay has been exceeded\n\t */\n\tprotected onInactivity: () => Promise<void> | void;\n\n\t/**\n\t * The function called when inactivity has been resetted\n\t */\n\tprotected onEndInactivity: () => Promise<void> | void;\n\n\t/**\n\t * The timeout TweenMax to call the event with delay\n\t */\n\tprotected timeOut: TweenMax;\n\n\t/**\n\t * Check if the click is maintained\n\t */\n\tprotected isClickMaintained: boolean = false;\n\n\t/**\n\t * Check if settings is opened\n\t */\n\tprotected isSettingsOpened: boolean = false;\n\n\t/**\n\t * Check if rules are opened\n\t */\n\tprotected isRulesOpened: boolean = false;\n\n\t/**\n\t * The current game\n\t */\n\tprotected game: AbstractGame;\n\n\t/**\n\t * Check if it has been subscribed to event listener of the document\n\t */\n\tprotected subscribed: boolean = false;\n\n\t/**\n\t * Check if inactivity event has been called\n\t */\n\tprotected inactive: boolean = false;\n\n\t/**\n\t * Options of the inactivity\n\t */\n\tprotected options: IInactivityOptions = {};\n\n\t/* LIFECYCLE */\n\n\t/**\n\t * @constructor\n\t */\n\tpublic constructor(\n\t\tgame: AbstractGame,\n\t\tonInactivity: () => Promise<void> | void,\n\t\tonEndInactivity: () => Promise<void> | void,\n\t\toptions: IInactivityOptions = {}\n\t) {\n\t\tthis.game = game;\n\t\tthis.onInactivity = onInactivity;\n\t\tthis.onEndInactivity = onEndInactivity;\n\t\tthis.options = {\n\t\t\t...defaultInactivityOptions,\n\t\t\t...options,\n\t\t};\n\n\t\tObject.keys(options).forEach((key) => (this[key] = options[key]));\n\n\t\tif (this.options.autoStart) {\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\t/* METHODS */\n\n\t/**\n\t * Stop the TweenMax timeout\n\t */\n\tprotected stopTimeOut(): void {\n\t\tif (this.timeOut) {\n\t\t\tthis.timeOut.kill();\n\t\t}\n\t}\n\n\t/**\n\t * Start the TweenMax timeout\n\t */\n\tprotected startTimeOut(customDelay?: number): void {\n\t\tthis.stopTimeOut();\n\n\t\tthis.timeOut = TweenMax.delayedCall(\n\t\t\tcustomDelay && !isNaN(parseInt(customDelay.toString(), 10))\n\t\t\t\t? customDelay\n\t\t\t\t: this.options.delay,\n\t\t\tthis.onDelayExceeded\n\t\t);\n\t}\n\n\t/**\n\t * Event called to start the inactivity event\n\t */\n\tprotected onDelayExceeded = async (): Promise<void> => {\n\t\tthis.stopTimeOut();\n\n\t\tthis.inactive = true;\n\n\t\tif (this.onInactivity) {\n\t\t\tawait this.onInactivity();\n\t\t}\n\n\t\tif (this.loop) {\n\t\t\tthis.startTimeOut(this.options.loopDelay);\n\t\t}\n\t};\n\n\t/**\n\t * Event trigger when click is maintained\n\t */\n\tprotected onClickMaintained = async (): Promise<void> => {\n\t\tthis.isClickMaintained = true;\n\t\tawait this.pause();\n\t};\n\n\t/**\n\t * Event trigger when click is ended\n\t */\n\tprotected onClickEnd = async (): Promise<void> => {\n\t\tif (this.isClickMaintained && !this.isSettingsOpened && !this.isRulesOpened) {\n\t\t\tawait this.start();\n\t\t}\n\t};\n\n\t/**\n\t * Event trigger when pointer is moving\n\t */\n\tprotected onPointerMove = async (): Promise<void> => {\n\t\tif (!this.isClickMaintained && !this.isSettingsOpened && !this.isRulesOpened) {\n\t\t\tawait this.start();\n\t\t}\n\t};\n\n\t/**\n\t * Event trigger when settings are shown\n\t */\n\tprotected onShowSettings = async (): Promise<void> => {\n\t\tthis.isSettingsOpened = true;\n\t\tawait this.pause();\n\t};\n\n\t/**\n\t * Event trigger when rules are shown\n\t */\n\tprotected onShowRules = async (): Promise<void> => {\n\t\tthis.isRulesOpened = true;\n\t\tawait this.pause();\n\t};\n\n\t/**\n\t * Event trigger when settings are hide\n\t */\n\tprotected onHideSettings = async (): Promise<void> => {\n\t\tthis.isSettingsOpened = false;\n\n\t\tif (!this.isRulesOpened) {\n\t\t\tawait this.start();\n\t\t}\n\t};\n\n\t/**\n\t * Event trigger when settings are hide\n\t */\n\tprotected onHideRules = async (): Promise<void> => {\n\t\tthis.isRulesOpened = false;\n\t\tthis.isSettingsOpened = false;\n\n\t\tawait this.start();\n\t};\n\n\t/**\n\t * Event trigger when game is paused / unpaused\n\t */\n\tprotected onGamePaused = async (paused: boolean): Promise<void> => {\n\t\tif (paused) {\n\t\t\tthis.pause();\n\t\t} else {\n\t\t\tthis.start();\n\t\t}\n\t};\n\n\t/**\n\t * Subscribe to all document events\n\t */\n\tprotected subscribe(): void {\n\t\tif (!this.subscribed) {\n\t\t\tthis.subscribed = true;\n\n\t\t\tdocument.addEventListener(\"pointerdown\", this.onClickMaintained, false);\n\t\t\tdocument.addEventListener(\"touchstart\", this.onClickMaintained, false);\n\t\t\tdocument.addEventListener(\"pointerup\", this.onClickEnd, false);\n\t\t\tdocument.addEventListener(\"touchend\", this.onClickEnd, false);\n\t\t\tdocument.addEventListener(\"touchmove\", this.onPointerMove, false);\n\t\t\tdocument.addEventListener(\"mousemove\", this.onPointerMove, false);\n\t\t\tdocument.addEventListener(\"mouseend\", this.onPointerMove, false);\n\n\t\t\tthis.game.vi.emitter.on(EVisualIdentityEvent.ShowSettings, this.onShowSettings);\n\t\t\tthis.game.vi.emitter.on(EVisualIdentityEvent.ShowRules, this.onShowRules);\n\t\t\tthis.game.vi.emitter.on(EVisualIdentityEvent.ShowMainRules, this.onShowRules);\n\t\t\tthis.game.vi.emitter.on(EVisualIdentityEvent.HideSettings, this.onHideSettings);\n\t\t\tthis.game.events.on(EGameEvents.GamePaused, this.onGamePaused);\n\t\t\tthis.game.events.on(EGameEvents.RulesQuit, this.onHideRules);\n\t\t}\n\t}\n\n\t/**\n\t * Unsubscribe from all document events\n\t */\n\tprotected unsubscribe(): void {\n\t\tif (this.subscribed) {\n\t\t\tdocument.removeEventListener(\"pointerdown\", this.onClickMaintained, false);\n\t\t\tdocument.removeEventListener(\"touchstart\", this.onClickMaintained, false);\n\t\t\tdocument.removeEventListener(\"pointerup\", this.onClickEnd, false);\n\t\t\tdocument.removeEventListener(\"touchend\", this.onClickEnd, false);\n\t\t\tdocument.removeEventListener(\"touchmove\", this.onPointerMove, false);\n\t\t\tdocument.removeEventListener(\"mousemove\", this.onPointerMove, false);\n\t\t\tdocument.removeEventListener(\"mouseend\", this.onPointerMove, false);\n\t\t\tthis.subscribed = false;\n\n\t\t\tthis.game.vi.emitter.off(EVisualIdentityEvent.ShowSettings, this.onShowSettings);\n\t\t\tthis.game.vi.emitter.off(EVisualIdentityEvent.ShowRules, this.onShowRules);\n\t\t\tthis.game.vi.emitter.off(EVisualIdentityEvent.ShowMainRules, this.onShowRules);\n\t\t\tthis.game.vi.emitter.off(EVisualIdentityEvent.HideSettings, this.onHideSettings);\n\t\t\tthis.game.events.off(EGameEvents.GamePaused, this.onGamePaused);\n\t\t\tthis.game.events.off(EGameEvents.RulesQuit, this.onHideRules);\n\t\t}\n\t}\n\n\t/* PUBLIC */\n\n\t/**\n\t * Change the delay before calling the inactivity event\n\t * @param delay: The delay to change\n\t */\n\tpublic setDelay(delay: number): void {\n\t\tthis.options.delay = delay;\n\t\tthis.start();\n\t}\n\n\t/**\n\t * Start/Restart the timer\n\t */\n\tpublic start = async (): Promise<void> => {\n\t\tif (this.inactive) {\n\t\t\tawait this.onEndInactivity();\n\t\t}\n\n\t\tthis.isClickMaintained = false;\n\t\tthis.isSettingsOpened = false;\n\t\tthis.isRulesOpened = false;\n\t\tthis.inactive = false;\n\t\tthis.startTimeOut();\n\t\tthis.subscribe();\n\t};\n\n\tpublic pause = async (): Promise<void> => {\n\t\tif (this.inactive) {\n\t\t\tawait this.onEndInactivity();\n\t\t}\n\n\t\tthis.inactive = false;\n\t\tthis.stopTimeOut();\n\t};\n\n\t/**\n\t * Stop the current timer\n\t */\n\tpublic stop = async (): Promise<void> => {\n\t\tthis.unsubscribe();\n\t\tthis.stopTimeOut();\n\n\t\tif (this.onEndInactivity) {\n\t\t\tawait this.onEndInactivity();\n\t\t}\n\t};\n\n\t/* GETTERS */\n\n\t/**\n\t * True if inactivity event has been called\n\t */\n\tpublic isInactive(): boolean {\n\t\treturn this.inactive;\n\t}\n}\n","export { AbstractGame } from \"./abstractGame\";\nexport { EGameEvents } from \"./gameEvents\";\n\nexport { Express } from \"./express/express\";\nexport { Ticket, ETicketMode, ETicketStatus, EBetResponseAction } from \"./express/ticket\";\n\n// Motors\nexport { Action } from \"./action/action\";\nexport { MotorsModel } from \"./action/model\";\nexport { MotorsSession, ESessionMode } from \"./action/session\";\n\n// Multipass\nexport { Multipass } from \"./multipass/multipass\";\nexport { MultipassSession } from \"./multipass/session\";\nexport {\n\tMultipassNotifications,\n\tIMultipassNotification,\n\tEMultipassGameState,\n\tEMultipassNotificationType,\n} from \"./multipass/notifications\";\n\nexport { TweenUtils } from \"./tweenUtils\";\nexport * from \"./ui\";\nexport * from \"./wizz\";\n\nexport * from \"./inactivity\";\nexport * from \"./carousel\";\n","import { Graphics } from \"pixi.js\";\nimport { IAmount } from \"@gdk/core\";\nimport { Resize } from \"@gdk/core-pixi\";\nimport type {\n\tIService,\n\tIMtpRoomParamsResult,\n\tIMtpRoom,\n\tIMtpBetResult,\n\tIMtpEnterRoomRequest,\n\tIMtpBetRequest,\n\tIMtpSession,\n} from \"@falcon/bridge\";\nimport type { IGameConf } from \"@gdk/core\";\nimport type { ApplicationOptions } from \"pixi.js\";\n\nimport { AbstractGame } from \"../abstractGame\";\nimport type { MultipassSession } from \"./session\";\nimport type { MultipassNotifications } from \"./notifications\";\n\nexport class Multipass extends AbstractGame {\n\t// Public members\n\tpublic room: IMtpRoom = null;\n\tpublic session: MultipassSession<any> = null;\n\tpublic notifications: MultipassNotifications = null;\n\n\t// Protected members\n\tprotected wasHiddenOverlay: Graphics;\n\tprotected wasHidden: boolean = false;\n\n\t/**\n\t * Constructor\n\t * @param gameConfig: the game configuration (game.conf.json)\n\t * @param width: the canvas width\n\t * @param height: the canvas height\n\t * @param noWebGL: enable/disable WebGL (to force Canvas)\n\t * @param options: the Pixi.js applicaiton options\n\t */\n\tpublic constructor(\n\t\tgameConfig: IGameConf,\n\t\twidth: number,\n\t\theight: number,\n\t\tnoWebGL: boolean,\n\t\toptions: ApplicationOptions\n\t) {\n\t\t// Initialize\n\t\tsuper(gameConfig, width, height, noWebGL, options);\n\n\t\t// Events for visibility change. If was hidden, update from the session\n\t\tdocument.addEventListener(\"visibilitychange\", async () => {\n\t\t\tif (this.wasHidden && this.notifications && this.session) {\n\t\t\t\t// Mute notifications in order to update game session\n\t\t\t\t// and draw an overlay on top of the stage\n\t\t\t\tthis.stage.addChild(this.wasHiddenOverlay);\n\n\t\t\t\tconst notificationsWasMuted = this.notifications.muted;\n\t\t\t\tthis.notifications.muted = true;\n\n\t\t\t\tawait this.updateSession();\n\n\t\t\t\t// Then, unmute notifications and remove overlay\n\t\t\t\tthis.notifications.muted = notificationsWasMuted;\n\t\t\t\tthis.stage.removeChild(this.wasHiddenOverlay);\n\t\t\t}\n\n\t\t\tthis.wasHidden = document.visibilityState === \"hidden\";\n\t\t});\n\n\t\t// When updating the session becuase the browser was hidden, draw an overlay\n\t\tthis.wasHiddenOverlay = new Graphics();\n\t\tthis.wasHiddenOverlay.beginFill(0x0, 0.6);\n\t\tthis.wasHiddenOverlay.drawRect(0, 0, 1, 1);\n\t\tthis.wasHiddenOverlay.resize = new Resize(Resize.cover);\n\n\t\t// Override default events for visual identity which pauses the game on the user\n\t\t// opens the settings or wants to see the rules\n\t\tthis.vi.emitter.removeAllListeners(\"showsettings\");\n\t\tthis.vi.emitter.removeAllListeners(\"hidesettings\");\n\n\t\tthis.vi.emitter.removeAllListeners(\"showrules\");\n\t\tthis.vi.emitter.removeAllListeners(\"showmainrules\");\n\t}\n\n\t/**\n\t * To be implemented by the game: it asks to update the game session. This can be called automatically\n\t * by notifications when a notification has been lost so the game has to be re-synchronized\n\t * by calling \"updateSession\"\n\t */\n\tpublic updateSession(): void {\n\t\tthis.notifications.lastMessageId = this.session.lastPlayerNotificationId;\n\t\tthis.notifications.lastMessageBroadcastId = this.session.lastGameSessionNotificationId;\n\t}\n\n\t/**\n\t * Return the player's rooms\n\t * @param parameters: the get rooms parameters (values to send to multipass)\n\t * @param done: callback containing the player's rooms\n\t */\n\tpublic getRooms(parameters?: IService): Promise<IMtpRoom[]> {\n\t\tif (!parameters) {\n\t\t\tparameters = {\n\t\t\t\tapplicationId: this.gameConfig.engine,\n\t\t\t\tserviceName: this.gameConfig.lotteryGameCode,\n\t\t\t};\n\t\t}\n\n\t\treturn this.com.getMtpRooms(parameters);\n\t}\n\n\t/**\n\t * Enters the given room identified by its id\n\t * @param parameters: the enter room parameters (values to send to multipass\n\t * @param done: callback once the player entered the room\n\t */\n\tpublic async enterRoom(parameters: IMtpEnterRoomRequest): Promise<IMtpRoom> {\n\t\treturn this.com.enterMtpRoom(parameters);\n\t}\n\n\t/**\n\t * Gets the current session object of the given MTP game at the given roomId.\n\t * @param parameters: the parameters containing the service name.\n\t * @param roomId the id of the room containing the session to retrieve.\n\t */\n\tpublic async getSession<T>(parameters: IService, roomId: string): Promise<IMtpSession<T>> {\n\t\treturn this.com.getMtpSession<T>(parameters, roomId);\n\t}\n\n\t/**\n\t * Retrieve room parameters (min/max players, variant parameters etc.)\n\t * @param parameters: the request parameters (applicationId and service name with room id)\n\t * @param done: callback once request done\n\t */\n\tpublic getParameters<T>(parameters?: IService): Promise<IMtpRoomParamsResult<T>> {\n\t\tif (!parameters) {\n\t\t\tparameters = {\n\t\t\t\tapplicationId: this.gameConfig.engine,\n\t\t\t\tserviceName: this.gameConfig.lotteryGameCode,\n\t\t\t};\n\t\t}\n\n\t\treturn this.com.getMtpParameters<T>(parameters);\n\t}\n\n\t/**\n\t * Creates a bet\n\t * @param parameters: the bet request parameters\n\t * @param done: the callback when bet is done givng the bet response\n\t */\n\tpublic async bet(parameters: IMtpBetRequest): Promise<IMtpBetResult> {\n\t\t// Bet and refresh purse.\n\t\tconst bet = await this.com.createMtpBet(parameters);\n\t\tawait this.getPurse(true);\n\n\t\treturn bet;\n\t}\n\n\t/**\n\t * Enters to a room and bets according to the given bet informations.\n\t * @param options the options containing the room informations to enter and the bet informations.\n\t */\n\tpublic async enterAndBet(\n\t\tparameters: IMtpEnterRoomRequest & IMtpBetRequest\n\t): Promise<IMtpBetResult> {\n\t\t// Bet and refresh purse.\n\t\tconst bet = await this.com.enterMtpRoomAndBet(parameters);\n\t\tawait this.getPurse(true);\n\n\t\treturn bet;\n\t}\n\n\t/**\n\t * Excutes an action\n\t * @param parameters the execute parameters\n\t * @param done callback once request is done\n\t */\n\tpublic execute(parameters: IMtpBetRequest): Promise<IMtpBetResult> {\n\t\t// const applicationId = parameters.applicationId || this.gameConfig.gameType;\n\t\t// const serviceName = parameters.serviceName || this.gameConfig.stakes[0].serviceName;\n\n\t\t// // Set player id game session\n\t\t// parameters.data.playerGameSessionId = this.session.playerGameSessionId;\n\n\t\t// await this.com.execute({\n\t\t// \troomId: parameters.roomId || this.room.roomId,\n\t\t// \tsessionId: parameters.sessionId || this.session.id,\n\t\t// \tapplicationId,\n\t\t// \tserviceName,\n\t\t// \tparameters: parameters.data,\n\t\t// }, parameters.showError);\n\t\treturn this.com.updateMtpBet(parameters);\n\t}\n}\n","import type { PushChannel } from \"@falcon/push-client\";\n\nimport { Popin } from \"../../com/popin/popin\";\nimport { EPopinLevel, PopinButtonAction } from \"../../com/popin/definitions\";\nimport { EMessageType } from \"../../com/messageManager/definitions\";\nimport type { Multipass } from \"./multipass\";\n\nexport enum EMultipassGameState {\n\tPENDING = \"PENDING\",\n\tONGOING = \"ONGOING\",\n\tFINISHED = \"FINISHED\",\n}\n\nexport enum EMultipassNotificationType {\n\tSESSION_INITIALIZED = \"SESSION_INITIALIZED\",\n\tPLAYER_ENTER = \"PLAYER_ENTER\",\n\tPAYOUT = \"PAYOUT\",\n\tPLAYER_EXIT = \"PLAYER_EXIT\",\n\tSCRIPT = \"SCRIPT\",\n\tSESSION_CANCELLED = \"SESSION_CANCELLED\",\n\tSESSION_STOPPED = \"SESSION_STOPPED\",\n\tPLAYER_REMOVED = \"PLAYER_REMOVED\",\n\tTRANSACTION_EVENT = \"FALCON_TRANSACTION_EVENT\",\n}\n\nexport interface IMultipassNotification<T> {\n\tbroadcast: boolean;\n\tsequenceNumber?: number;\n\tgameState: EMultipassGameState;\n\troomId: string;\n\tsessionId: string;\n\ttime: number;\n\ttype: EMultipassNotificationType;\n\tcontent: T;\n}\n\nexport class MultipassNotifications {\n\t// Public members\n\tpublic game: Multipass;\n\tpublic channel: PushChannel = null;\n\n\tpublic lastMessageId: number = null;\n\tpublic lastMessageBroadcastId: number = null;\n\n\tpublic onMessage: (data: IMultipassNotification<any>) => void;\n\n\t// Private members\n\tprivate _muted: boolean = false;\n\tprivate _closed: boolean = true;\n\n\tprivate _timerId: number = null;\n\tprivate _timerBroadcastId: number = null;\n\n\tprivate _pendingNotifications: Array<IMultipassNotification<any>> = [];\n\tprivate _pendingNotificationsBroadcast: Array<IMultipassNotification<any>> = [];\n\n\tprivate _connectionPopin: Popin = null;\n\tprivate _connectionRetryCount: number = 0;\n\n\t// Static members\n\tpublic static tempo: number = 500;\n\n\t/**\n\t * Constructor\n\t * @param gameVariantName the game variant name to listen\n\t * @param roomId the room id running the session with the given game variant name\n\t */\n\tpublic constructor(game: Multipass, roomId?: string) {\n\t\t// Misc.\n\t\tthis.game = game;\n\n\t\t// Connect?\n\t\tif (roomId) {\n\t\t\tthis.createChannel(roomId);\n\t\t}\n\n\t\t// Connection popin\n\t\tthis._connectionPopin = new Popin(\n\t\t\t{\n\t\t\t\tlevel: EPopinLevel.Info,\n\t\t\t\ttext: this.game.com.t(\"sse_connection_try\", \"multiplayer\"),\n\t\t\t\tclosable: false,\n\t\t\t\tbuttons: [],\n\t\t\t},\n\t\t\tnull\n\t\t);\n\t}\n\n\t/**\n\t * Creates the notifications channel\n\t * @param roomId the room id running the session with the given game variant name\n\t */\n\tpublic async createChannel(roomId: string): Promise<void> {\n\t\t// this.source = new EventSource(`mtp/games/${gameVariantName}/rooms/${roomId}/notifications`);\n\t\t/*this.source = new EventSource(\"https://mtp-qa-01.lotsys.corp:9991/mtp/\" + roomId, {\n            withCredentials: true\n        });*/\n\n\t\t// Create channel\n\t\tthis.channel = await this.game.com.getNotificationsChannel({\n\t\t\ttransport: 2,\n\t\t\ttopic: {\n\t\t\t\ttype: \"mtp\",\n\t\t\t\tid: roomId,\n\t\t\t},\n\t\t});\n\n\t\t// Check disconnected\n\t\tthis.channel.addEventListener(\"disconnected\", async () => (this._closed = true));\n\n\t\t// Callback on receive a message\n\t\tthis.channel.addEventListener(\"message\", (e) => {\n\t\t\t// Parse message data\n\t\t\tif (!e.detail || !e.detail.content) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst data = e.detail.content as IMultipassNotification<any>;\n\t\t\tthis.dispatchNotification(data);\n\t\t});\n\n\t\t// Configure\n\t\tif (this._muted) {\n\t\t\tthis.channel.mute();\n\t\t}\n\n\t\tthis._closed = false;\n\t}\n\n\t/**\n\t * Starts the notifications by connecting to the server\n\t * @param retryCount the number of retries if connection failed\n\t */\n\tpublic async start(retryCount: number = 3): Promise<void> {\n\t\tif (!this.channel) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Show connection popin?\n\t\tif (this._connectionRetryCount > 0) {\n\t\t\tthis._connectionPopin.display();\n\t\t} else {\n\t\t\tthis._connectionPopin.close();\n\t\t}\n\n\t\ttry {\n\t\t\t// Connect\n\t\t\tawait this.channel.start();\n\n\t\t\tthis._connectionPopin.close();\n\t\t} catch (e) {\n\t\t\tretryCount--;\n\t\t\tthis._connectionRetryCount++;\n\n\t\t\tif (retryCount > 0) {\n\t\t\t\treturn await this.start(retryCount);\n\t\t\t}\n\n\t\t\tthis._connectionPopin.close();\n\t\t\tawait this.game.com.messageManager.display({\n\t\t\t\tcode: \"SSE.CONNECTION.FAILED\",\n\t\t\t\ttype: EMessageType.Immediate,\n\t\t\t\tpopup: {\n\t\t\t\t\tlevel: EPopinLevel.Error,\n\t\t\t\t\ttext: this.game.com.t(\"sse_connection_failed\", \"multiplayer\"),\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: this.game.com.t(\"close\", \"ui\") || \" Close\",\n\t\t\t\t\t\t\taction: PopinButtonAction.CloseGame,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: this.game.com.t(\"retry\", \"ui\"),\n\t\t\t\t\t\t\taction: PopinButtonAction.ClosePopin,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tawait this.start();\n\t\t}\n\t}\n\n\t/**\n\t * Closes the notifications by disconnecting from the server\n\t */\n\tpublic async close(): Promise<void> {\n\t\tif (this._closed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.channel) {\n\t\t\tawait this.channel.stop();\n\t\t}\n\t\tthis._closed = true;\n\t}\n\n\t/**\n\t * Returns if the notifications are muted or not\n\t */\n\tpublic get muted(): boolean {\n\t\treturn this._muted;\n\t}\n\n\t/**\n\t * Mutes the notifications\n\t */\n\tpublic set muted(muted: boolean) {\n\t\tthis._muted = muted;\n\t\tif (!this.channel) {\n\t\t\treturn;\n\t\t}\n\n\t\tmuted ? this.channel.mute() : this.channel.unmute();\n\t}\n\n\t/**\n\t * Dispatches the given data by checking the last message id etc.\n\t * @param data the data to dispatch\n\t */\n\tpublic dispatchNotification(data: IMultipassNotification<any>): void {\n\t\tif (data.sequenceNumber === undefined) {\n\t\t\treturn this.emitNotification(data);\n\t\t}\n\n\t\t// Setup first message Id\n\t\tif (this.lastMessageId === null && !data.broadcast) {\n\t\t\tthis.lastMessageId = data.sequenceNumber;\n\t\t}\n\t\tif (this.lastMessageBroadcastId === null && data.broadcast) {\n\t\t\tthis.lastMessageBroadcastId = data.sequenceNumber;\n\t\t}\n\n\t\t// If old notification, bypass notification\n\t\tif (data.broadcast && data.sequenceNumber <= this.lastMessageBroadcastId) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!data.broadcast && data.sequenceNumber <= this.lastMessageId) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine if there is a hole in notifications\n\t\tconst shouldWait =\n\t\t\t(data.broadcast && data.sequenceNumber - this.lastMessageBroadcastId >= 2) ||\n\t\t\t(!data.broadcast && data.sequenceNumber - this.lastMessageId >= 2);\n\n\t\tif (shouldWait) {\n\t\t\tthis._setupNotification(data);\n\n\t\t\t// Broadcast notifications\n\t\t\tif (this._pendingNotificationsBroadcast.length > 0) {\n\t\t\t\tthis._shiftNotifications(\n\t\t\t\t\tthis._pendingNotificationsBroadcast,\n\t\t\t\t\tthis.lastMessageBroadcastId,\n\t\t\t\t\t\"_timerBroadcastId\"\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Private notifications\n\t\t\tif (this._pendingNotifications.length > 0) {\n\t\t\t\tthis._shiftNotifications(\n\t\t\t\t\tthis._pendingNotifications,\n\t\t\t\t\tthis.lastMessageBroadcastId,\n\t\t\t\t\t\"_timerId\"\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Emit\n\t\tthis.emitNotification(data);\n\t}\n\n\t/**\n\t * Emits the given notification and updates the last message Id\n\t * for private messages and broadcasts\n\t * @param data the notification data\n\t */\n\tpublic emitNotification(data: IMultipassNotification<any>): void {\n\t\tif (this.onMessage) {\n\t\t\tif (data.type === EMultipassNotificationType.TRANSACTION_EVENT) {\n\t\t\t\tthis.game.com.populateNotifications(data.content);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (data.sessionId !== undefined && this.game.session.id !== data.sessionId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (data.sequenceNumber === undefined) {\n\t\t\t\treturn this.onMessage(data);\n\t\t\t}\n\n\t\t\t// Update last message Id\n\t\t\tif (data.broadcast) {\n\t\t\t\tthis.lastMessageBroadcastId = data.sequenceNumber;\n\t\t\t} else {\n\t\t\t\tthis.lastMessageId = data.sequenceNumber;\n\t\t\t}\n\n\t\t\tthis.onMessage(data);\n\t\t}\n\t}\n\n\t/**\n\t * Reset the notifications datas\n\t */\n\tpublic reset(): void {\n\t\tthis.lastMessageId = null;\n\t\tthis.lastMessageBroadcastId = null;\n\t}\n\n\t/**\n\t * Setups pending notifications (reset tempo, create tempo etc.)\n\t */\n\tprivate _setupNotification(notification: IMultipassNotification<any>): void {\n\t\t// Broadcast notification\n\t\tif (notification.broadcast) {\n\t\t\treturn this._setupPendingNotifications(\n\t\t\t\tthis._pendingNotificationsBroadcast,\n\t\t\t\tnotification,\n\t\t\t\t\"_timerBroadcastId\"\n\t\t\t);\n\t\t}\n\n\t\treturn this._setupPendingNotifications(this._pendingNotifications, notification, \"_timerId\");\n\t}\n\n\t/**\n\t * Setups the pending notifications by adding the given notification to the pending\n\t * list. If the timer wasn't created, the timer is created\n\t */\n\tprivate _setupPendingNotifications(\n\t\tnotifications: Array<IMultipassNotification<any>>,\n\t\tnotifiation: IMultipassNotification<any>,\n\t\ttimerKey: string\n\t): void {\n\t\tif (this[timerKey] === null) {\n\t\t\t// Create timer\n\t\t\tnotifications.splice(0, notifications.length - 1);\n\t\t\tnotifications.push(notifiation);\n\n\t\t\tthis[timerKey] = setTimeout(async () => {\n\t\t\t\t// Update game session\n\t\t\t\tawait this._updateSession();\n\t\t\t\tthis[timerKey] = null;\n\t\t\t}, MultipassNotifications.tempo);\n\t\t} else {\n\t\t\t// Add notification + sort\n\t\t\tnotifications.push(notifiation);\n\t\t\tnotifications.sort((a, b) => a.sequenceNumber - b.sequenceNumber);\n\t\t}\n\t}\n\n\t/**\n\t * Shifts all the pending notifications until we find a hole\n\t * in sequence number. If the count of pending notifications is equal\n\t * to 0, then the associated timer is cleared\n\t */\n\tprivate _shiftNotifications(\n\t\tpendingNotifications: Array<IMultipassNotification<any>>,\n\t\tlastMessageId: number,\n\t\ttimerKey: string\n\t): void {\n\t\t// Emit until we find a hole in sequence number\n\t\twhile (\n\t\t\tpendingNotifications.length &&\n\t\t\tpendingNotifications[0].sequenceNumber === lastMessageId + 1\n\t\t) {\n\t\t\tconst notification = pendingNotifications.shift();\n\t\t\tthis.emitNotification(notification);\n\t\t}\n\n\t\t// If empty, clear timeout to update session\n\t\tif (pendingNotifications.length === 0) {\n\t\t\tclearTimeout(this[timerKey]);\n\t\t}\n\t}\n\n\t// Updates the game session. This will mute the notifications\n\tprivate async _updateSession(): Promise<void> {\n\t\t// Mute notifications in order to update game session\n\t\tconst notificationsWasMuted = this.game.notifications.muted;\n\t\tthis.game.notifications.muted = true;\n\n\t\tawait this.game.updateSession();\n\n\t\t// Then, unmute notifications\n\t\tthis.game.notifications.muted = notificationsWasMuted;\n\t}\n}\n","import type { IMtpSession } from \"@falcon/bridge\";\nimport type { IMtpPlayer } from \"@falcon/bridge/typings/platform\";\n\nexport class MultipassSession<T> {\n\t// Public members\n\tpublic id: string;\n\tpublic roomId: string;\n\tpublic playerId: string;\n\tpublic playerGameSessionId: string;\n\tpublic lastPlayerNotificationId: number;\n\tpublic lastGameSessionNotificationId: number;\n\n\tpublic totalUserInRoom: number;\n\tpublic totalActivePlayerInRoom: number;\n\n\tpublic players: IMtpPlayer[] = [];\n\tpublic data: T = null;\n\n\tpublic publicData: any;\n\tpublic protectedData: any;\n\n\tpublic gameSessionState: string;\n\tpublic timestamp: number;\n\n\tpublic isInSession: boolean = false;\n\n\t/**\n\t * Constructor\n\t * @param response the \"getSession\" response JSON object.\n\t */\n\tpublic constructor(response?: any) {\n\t\tif (response) {\n\t\t\tthis.updateFrom(response);\n\t\t}\n\t}\n\n\t/**\n\t * Update the session from the given response\n\t * @param response the \"getSession\" response\n\t */\n\tpublic updateFrom(response: IMtpSession<T>): void {\n\t\tthis.id = response.id;\n\n\t\tconst sessionData = response.data;\n\t\tconst data = sessionData.data;\n\n\t\tthis.data = data.public;\n\t\tthis.players = data.players;\n\n\t\tthis.timestamp = sessionData.time;\n\n\t\tthis.playerGameSessionId = sessionData.playerGameSessionId;\n\t\tthis.lastPlayerNotificationId = sessionData.lastPlayerNotificationId;\n\t\tthis.lastGameSessionNotificationId = sessionData.lastGameSessionNotificationId;\n\t\tthis.playerId = sessionData.playerId;\n\n\t\tthis.totalUserInRoom = sessionData.totalUserInRoom;\n\t\tthis.totalActivePlayerInRoom = sessionData.totalActivePlayerInRoom;\n\t\tthis.roomId = sessionData.roomId;\n\n\t\tif (data.currentPlayer) {\n\t\t\tthis.publicData = data.currentPlayer.public;\n\t\t\tthis.protectedData = data.currentPlayer.protected;\n\t\t\tthis.isInSession = true;\n\t\t}\n\t}\n}\n","import { Amount } from \"@gdk/core\";\nimport { TweenMax } from \"gsap\";\nimport { ticker } from \"pixi.js\";\nimport type { INotifier, IPurseInformation } from \"@falcon/bridge\";\n\nimport { EVisualIdentityAction, EVisualIdentityEvent } from \"../../adaptativeVisualIdentity\";\nimport type { AbstractGame } from \"../abstractGame\";\n\nexport class Notifier implements INotifier {\n\tprivate _game: AbstractGame;\n\n\t/**\n\t * Constructor.\n\t * @param game defines the reference to the game itself. Used to dispatch notifications across targeted components.\n\t */\n\tpublic constructor(game: AbstractGame) {\n\t\tthis._game = game;\n\t}\n\n\t/**\n\t * Notifies the game that the purse information changed.\n\t * @param purseInformation defines the new purse information to display in the game.\n\t */\n\tpublic notifyPurseInformationChange(purseInformation?: IPurseInformation): void {\n\t\tif (purseInformation) {\n\t\t\tthis._game.vi.emit(\n\t\t\t\tEVisualIdentityAction.SetPurse,\n\t\t\t\tnew Amount(purseInformation.displayedAmount)\n\t\t\t);\n\t\t} else {\n\t\t\tthis._game.getPurse(true);\n\t\t}\n\t}\n\n\t/**\n\t * Notifies the game that the sound status changed.\n\t * @param soundEnabled defines the sound status.\n\t */\n\tpublic notifySoundStatus(soundEnabled?: boolean): void {\n\t\tthis._game.vi.emit(EVisualIdentityAction.SoundEnabled, soundEnabled ?? false);\n\t}\n\n\t/**\n\t * Notifies the game about pause/resume status.\n\t * @param isPaused defines the pause/resume status.\n\t * @param reason reason the game is paused for\n\t */\n\tpublic notifyPause(message: { isPaused: boolean; reason: string }): void {\n\t\tconst { isPaused, reason } = message;\n\n\t\tif (isPaused) {\n\t\t\tthis._game.pause(`notifier_${reason}`);\n\t\t} else {\n\t\t\tthis._game.unpause(`notifier_${reason}`);\n\t\t}\n\t}\n}\n","import { TweenMax } from \"gsap\";\nimport { Timeline } from \"@gdk/core-pixi\";\nimport { Howler } from \"howler\";\nimport type { Tween, TweenConfig, TimelineMax } from \"gsap\";\n\nexport class TweenUtils {\n\t/**\n\t * List of all paused tweens when calling TweenUtils.pauseAllTweens()\n\t */\n\tpublic static pausedTweens: Tween[] = [];\n\t/**\n\t * List of spine timelines\n\t */\n\tpublic static rulesTweens: Array<Tween | Timeline> = [];\n\n\tprivate static _forcedPause: boolean = false;\n\n\t/**\n\t * sets the TweenMax global time scale and apply that change to all Howler sounds speed rate.\n\t */\n\tpublic static set globalTimeScale(value: number) {\n\t\tHowler[`_howls`].forEach((howl) => {\n\t\t\thowl.rate(value);\n\t\t});\n\t\tTweenMax.globalTimeScale(value);\n\t}\n\n\t/**\n\t * get the TweenMax global time scale.\n\t */\n\tpublic static get globalTimeScale(): number {\n\t\treturn (TweenMax as any).globalTimeScale();\n\t}\n\n\t/**\n\t * Pauses all the active tweens\n\t * @param forcedPause whether or not the user forced the pause and will have to manually resume all\n\t */\n\tpublic static pauseAllTweens(forcedPause: boolean = true): void {\n\t\tif (this.pausedTweens.length !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._forcedPause = forcedPause;\n\n\t\tconst tweens = TweenMax.getAllTweens(true);\n\t\ttweens.forEach((tween) => {\n\t\t\t// Delayed calls can be determined if the animated target is the callback itself.\n\t\t\t// If the tween is a delayed call, pause it.\n\t\t\tconst isDelayedCall =\n\t\t\t\t((tween.vars as any).delay || 0) > 0 || tween.target === (tween.vars as any).onComplete;\n\n\t\t\tif (!tween.paused() && (tween.isActive() || isDelayedCall)) {\n\t\t\t\tthis.pausedTweens.push(tween);\n\t\t\t\ttween.pause();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Resumes all the given tweens (which was previously paused)\n\t * @param forcedResume whether or not the user forced the pause so should force resume to resume all tweens\n\t */\n\tpublic static resumeAllTweens(forcedResume: boolean = true): void {\n\t\tif (this._forcedPause && !forcedResume) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._forcedPause = false;\n\t\tthis.pausedTweens.forEach((tween) => tween.resume());\n\t\tthis.pausedTweens = [];\n\t}\n\n\t/**\n\t * Pauses all tweens of the rules view\n\t */\n\tpublic static pauseRulesTweens(): void {\n\t\tthis.rulesTweens.forEach((t) => {\n\t\t\tif (t instanceof Timeline) {\n\t\t\t\tt.timeline.pause();\n\t\t\t\tt.animations.forEach((a) => a.tween.pause());\n\t\t\t} else {\n\t\t\t\tt.pause();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Resumes all the tweens of the rules view\n\t */\n\tpublic static resumeRulesTweens(): void {\n\t\tthis.rulesTweens.forEach((t) => {\n\t\t\tif (t instanceof Timeline) {\n\t\t\t\tt.timeline.resume();\n\t\t\t\tt.animations.forEach((a) => a.tween.resume());\n\t\t\t} else {\n\t\t\t\tt.resume();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Waits for the given duration before the promise is resolved.\n\t * @param duration the time to wait in seconds.\n\t */\n\tpublic static wait(duration: number): Promise<void> {\n\t\treturn new Promise<void>((resolve) => TweenMax.delayedCall(duration, resolve));\n\t}\n\n\t/**\n\t * Static method for creating a TweenMax instance that animates to the specified destination values (from the current values).\n\t * @param args the TweenMax.to arguments.\n\t * @returns only the promise resolved when tween has been completed.\n\t */\n\tpublic static to(...args: Parameters<typeof TweenMax.to>): Promise<void> {\n\t\treturn new Promise<void>((resolve) => {\n\t\t\tlet onComplete: () => void = null;\n\t\t\tif (args[2].onComplete) {\n\t\t\t\tonComplete = args[2].onComplete;\n\t\t\t}\n\n\t\t\targs[2].onComplete = () => {\n\t\t\t\tif (onComplete) {\n\t\t\t\t\tonComplete();\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t};\n\t\t\tTweenMax.to.apply(global, args);\n\t\t});\n\t}\n\n\t/**\n\t * Static method for creating a TweenMax instance that allows you to define both the starting and ending\n\t * values (as opposed to to() and from() tweens which are based on the target's current values at one end or the other).\n\t * @param args the TweenMax.fromTo arguments.\n\t * @returns only the promise resolved when tween has been completed.\n\t */\n\tpublic static fromTo(...args: Parameters<typeof TweenMax.fromTo>): Promise<void> {\n\t\treturn new Promise<void>((resolve) => {\n\t\t\tlet onComplete: () => void = null;\n\t\t\tconst vars = args[3] as TweenConfig; // Due to bad types of Tween.d.ts :)\n\n\t\t\tif (vars.onComplete) {\n\t\t\t\tonComplete = vars.onComplete;\n\t\t\t}\n\t\t\tvars.onComplete = () => {\n\t\t\t\tif (onComplete) {\n\t\t\t\t\tonComplete();\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t};\n\t\t\tTweenMax.fromTo.apply(global, args);\n\t\t});\n\t}\n\n\t/**\n\t * Make a TweenMax / TimelineMax functions into a promise\n\t * @param anim: The anim data\n\t * @param includeDelay: Include delay when restarting the animation\n\t * @Return Promise which is resolved when TweenMax / TimelineMax animation is completed\n\t */\n\tpublic static playTween(\n\t\tanim: TimelineMax | TweenMax,\n\t\tincludeDelay: boolean = false\n\t): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tanim.eventCallback(\"onComplete\", resolve);\n\t\t\tanim.restart(includeDelay);\n\t\t});\n\t}\n}\n","import { TimelineMax, TweenMax } from \"gsap\";\nimport { Container } from \"pixi.js\";\nimport { Docking, SpineTimelineButton } from \"@gdk/core-pixi\";\nimport type { ICrossSell } from \"@gdk/core\";\nimport type { Button, SpineTimeline } from \"@gdk/core-pixi\";\n\nimport { Carousel } from \"../../carousel\";\nimport { TweenUtils } from \"../../tweenUtils\";\nimport type { ICarouselSettings } from \"../../carousel\";\nimport type { AbstractGame } from \"../../abstractGame\";\n\nexport interface ICrossSellOptions {\n\t// Animations names\n\tupAnimation?: string;\n\toutAnimation?: string;\n\toverAnimation?: string;\n\tdownAnimation?: string;\n\tenterAnimation?: string;\n\tidleLoopAnimation?: string;\n\tenterBackAnimation?: string;\n\tfrontToBackAnimation?: string;\n\tbackToFrontAnimation?: string;\n\tidleLoopBackAnimation?: string;\n\n\tmainCardName?: string;\n\tdefaultSpineTimelineButtonId?: string;\n}\n\nexport interface ICrossSellCarouselOptions {\n\tnextArrow?: Button;\n\tpreviousArrow?: Button;\n\n\tsettings?: ICarouselSettings;\n}\n\nexport class CrossSell extends Container {\n\t/* ATTRIBUTES */\n\n\t/**\n\t * List of all visible cards\n\t */\n\tpublic cards: SpineTimeline[];\n\n\t/**\n\t * The main card, corresponding to the current game\n\t */\n\tpublic mainCard: SpineTimeline;\n\n\t/**\n\t * The carousel\n\t */\n\tpublic carousel: Carousel;\n\n\t/**\n\t * The play button from the active container (used for carousel)\n\t */\n\tprotected playButton: Container;\n\n\t/**\n\t * The tweenMax used for the IdleWave animation\n\t */\n\tpublic tweenIdleWave: TweenMax;\n\n\t/**\n\t * Options applied to the cross sell instance\n\t */\n\tpublic options: ICrossSellOptions;\n\n\t/**\n\t * Force animation to be stopped\n\t */\n\tprivate _animationStopped: boolean = false;\n\n\t/**\n\t * Disable the carousel interactivity\n\t */\n\tprivate _carouselDisabled: boolean = false;\n\n\t/* LIFECYCLE */\n\n\t/**\n\t * @constructor\n\t * @param game - The reference to the game\n\t */\n\tpublic constructor(private game: AbstractGame, options: ICrossSellOptions = {}) {\n\t\tsuper();\n\n\t\tthis.options = {\n\t\t\t...options,\n\t\t\tmainCardName: options.mainCardName || \"mainCard\",\n\t\t\tdefaultSpineTimelineButtonId: options.defaultSpineTimelineButtonId || \"99_crosssell.json\",\n\n\t\t\tupAnimation: options.upAnimation || \"up\",\n\t\t\toutAnimation: options.outAnimation || \"out\",\n\t\t\toverAnimation: options.overAnimation || \"over\",\n\t\t\tdownAnimation: options.downAnimation || \"down\",\n\t\t\tenterAnimation: options.enterAnimation || \"enter\",\n\t\t\tidleLoopAnimation: options.idleLoopAnimation || \"idleLoop\",\n\t\t\tenterBackAnimation: options.enterBackAnimation || \"back_enter\",\n\t\t\tfrontToBackAnimation: options.frontToBackAnimation || \"front_to_back\",\n\t\t\tbackToFrontAnimation: options.backToFrontAnimation || \"back_to_front\",\n\t\t\tidleLoopBackAnimation: options.idleLoopBackAnimation || \"idleLoop_back\",\n\t\t};\n\t}\n\n\t/**\n\t * On Loaded\n\t */\n\tpublic onLoaded(): void {\n\t\tthis.cards = this.children.filter((child) => child.visible) as SpineTimeline[];\n\t\tthis.mainCard = this.getChildByName<SpineTimeline>(this.options.mainCardName);\n\t\tthis.playButton = this.mainCard.getSlotContainerByName(\"button\").getChildByName(\"playButton\");\n\t}\n\n\t/* METHODS */\n\n\t/**\n\t * Create a card in the card container\n\t * @param options - Options to pass to the card container\n\t */\n\tpublic createCard(option: ICrossSell): SpineTimelineButton {\n\t\tconst card: SpineTimelineButton = new SpineTimelineButton(\n\t\t\toption.spineTimelineButtonId || this.options.defaultSpineTimelineButtonId,\n\t\t\t{ default: {} }\n\t\t);\n\n\t\tif (option.skinName) {\n\t\t\tcard.setSkinByName(option.skinName);\n\t\t}\n\n\t\tcard.animationsNames.up = this.options.upAnimation;\n\t\tcard.animationsNames.out = this.options.outAnimation;\n\t\tcard.animationsNames.over = this.options.overAnimation;\n\t\tcard.animationsNames.down = this.options.downAnimation;\n\t\tcard.animationsNames.enter = this.options.enterAnimation;\n\t\tcard.animationsNames.idleLoop = this.options.idleLoopAnimation;\n\n\t\tcard.docking = new Docking(Docking.centerAll, 0, 0);\n\t\tthis.cards.push(card);\n\t\tthis.addChildAt(card, 0);\n\n\t\tcard.on(\"pointerover\", () => this.stopIdleWaveAnimation());\n\t\tcard.on(\"pointerout\", () => this.startTimeoutIdleWave());\n\n\t\treturn card;\n\t}\n\n\t/**\n\t * Initialize the carousel\n\t * @param options - Options of the carousel\n\t */\n\tpublic initializeCarousel(options: ICrossSellCarouselOptions = {}): void {\n\t\tthis.carousel = new Carousel(\n\t\t\t{\n\t\t\t\tgame: this.game,\n\t\t\t\tcontainer: this,\n\t\t\t\tnextArrow: options.nextArrow,\n\t\t\t\tpreviousArrow: options.previousArrow,\n\t\t\t},\n\t\t\toptions.settings\n\t\t);\n\n\t\tconst isSimpleMode: boolean = this.carousel.isSimpleMode();\n\n\t\tthis.carousel\n\t\t\t.getCards()\n\t\t\t.forEach((card: Container) => (card.interactive = isSimpleMode && card !== this.mainCard));\n\n\t\t// Events\n\t\tthis.carousel.on(\"beforeChangeCard\", (nextCard: SpineTimeline, previousCard: SpineTimeline) => {\n\t\t\tif (previousCard) {\n\t\t\t\tpreviousCard.interactive = false;\n\t\t\t\tif (previousCard === this.mainCard) {\n\t\t\t\t\tthis.playButton.interactive = false;\n\t\t\t\t}\n\t\t\t\tpreviousCard.playDirect(this.options.frontToBackAnimation);\n\t\t\t}\n\n\t\t\tthis.stopIdleWaveAnimation();\n\t\t\tnextCard.playDirect(this.options.backToFrontAnimation);\n\t\t});\n\n\t\tthis.carousel.on(\"changeCard\", (nextCard: SpineTimeline) => {\n\t\t\tnextCard.interactive = nextCard instanceof SpineTimelineButton && nextCard !== this.mainCard;\n\t\t\tthis.playButton.interactive = nextCard === this.mainCard;\n\t\t\tthis.startTimeoutIdleWave();\n\t\t});\n\n\t\tthis.carousel.on(\"cardPositionsUpdate\", () => {\n\t\t\tif (this.isCarouselDisabled()) {\n\t\t\t\tthis.disableCarousel();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Appear the cross sell\n\t */\n\tpublic async appear(): Promise<void> {\n\t\tconst arrows: Container[] = [this.carousel.previousArrow, this.carousel.nextArrow].filter(\n\t\t\t(container) => Boolean(container)\n\t\t);\n\t\tconst timeline: TimelineMax = new TimelineMax({ paused: true });\n\n\t\tthis.carousel.setActiveCard(this.mainCard, true);\n\n\t\tarrows.forEach((arrow: Container) => {\n\t\t\tarrow.alpha = 0;\n\t\t\tarrow.visible = false;\n\t\t\ttimeline.add(\n\t\t\t\tTweenMax.fromTo(\n\t\t\t\t\tarrow,\n\t\t\t\t\t0.7,\n\t\t\t\t\t{\n\t\t\t\t\t\talpha: 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\talpha: 1,\n\t\t\t\t\t\tonStart: () => (arrow.visible = true),\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\t0\n\t\t\t);\n\t\t});\n\n\t\tawait TweenUtils.wait(0.5);\n\n\t\tconst promises: Array<Promise<any>> = this.cards.map((card: SpineTimeline) => {\n\t\t\tconst isActive: boolean = this.carousel.isSimpleMode()\n\t\t\t\t? true\n\t\t\t\t: card === this.carousel.getActiveCard();\n\t\t\treturn card.playDirect(isActive ? \"enter\" : \"back_enter\");\n\t\t});\n\n\t\tthis.visible = true;\n\n\t\tif (this.carousel.getCards().length > 2) {\n\t\t\tpromises.push(TweenUtils.playTween(timeline));\n\t\t\tawait Promise.all(promises);\n\t\t}\n\n\t\tthis.interactive = true;\n\t\tthis.enableCarousel();\n\t\tthis.startTimeoutIdleWave();\n\t}\n\n\t/**\n\t * Disappear animation of the cross sell\n\t */\n\tpublic disappear(): void {\n\t\tthis.visible = false;\n\t\tthis.stopIdleWaveAnimation();\n\t}\n\n\t/**\n\t * Disable carousel interactivity\n\t */\n\tpublic disableCarousel(): void {\n\t\tthis._carouselDisabled = true;\n\t\tthis.interactive = false;\n\t\tthis.carousel.isDragging = false;\n\t\tthis.carousel.setButtonActive(false);\n\t\tthis.carousel.getCards().forEach((card) => {\n\t\t\tcard.interactive = false;\n\t\t});\n\n\t\tthis.stopIdleWaveAnimation();\n\t}\n\n\t/**\n\t * Enable the carousel\n\t */\n\tpublic enableCarousel(): void {\n\t\tthis._carouselDisabled = false;\n\t\tthis.interactive = true;\n\t\tthis.carousel.setButtonActive(true);\n\n\t\tif (this.carousel.getCards().length === 2) {\n\t\t\tthis.carousel.getCards().forEach((card) => {\n\t\t\t\tcard.interactive = true;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Stop the IdleWave animation of the main card\n\t */\n\tpublic stopIdleWaveAnimation(): void {\n\t\tif (this.tweenIdleWave) {\n\t\t\tthis.tweenIdleWave.kill();\n\t\t}\n\n\t\tthis._animationStopped = true;\n\t}\n\n\t/**\n\t * Create a timer to restart the idle wave animation\n\t */\n\tpublic startTimeoutIdleWave(): void {\n\t\tthis.stopIdleWaveAnimation();\n\n\t\tthis.tweenIdleWave = TweenMax.fromTo(\n\t\t\tthis,\n\t\t\t2,\n\t\t\t{ idleWaveTiming: 0 },\n\t\t\t{\n\t\t\t\trepeat: -1,\n\t\t\t\tidleWaveTiming: 2,\n\t\t\t\tonRepeat: this.playIdleWaveAnimation,\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Create a wave animation base on the \"idleLoop\" animation of all cards\n\t */\n\tpublic playIdleWaveAnimation = async (): Promise<void> => {\n\t\tlet animationIsStopped: boolean = (this._animationStopped = false);\n\t\tconst isSimpleMode: boolean = this.carousel.isSimpleMode();\n\t\tconst waitTimings: number[] = this.carousel.computeArray([0, 0.5, 1]);\n\t\tconst activeCard: Container = this.carousel.getActiveCard();\n\t\tconst orderCards: SpineTimeline[] = this.carousel.getCards() as SpineTimeline[];\n\t\tconst cardAnimation = async (card: SpineTimeline, animation: string, wait: number = 0) => {\n\t\t\tif (wait > 0) {\n\t\t\t\tawait TweenUtils.wait(wait);\n\t\t\t}\n\n\t\t\tanimationIsStopped = this._animationStopped || animationIsStopped;\n\n\t\t\treturn !animationIsStopped && card.playDirect(animation);\n\t\t};\n\n\t\tawait Promise.all(\n\t\t\torderCards.map((card: SpineTimeline, i: number) => {\n\t\t\t\tcardAnimation(\n\t\t\t\t\tcard,\n\t\t\t\t\tcard === activeCard || isSimpleMode\n\t\t\t\t\t\t? this.options.idleLoopAnimation\n\t\t\t\t\t\t: this.options.idleLoopBackAnimation,\n\t\t\t\t\twaitTimings[i]\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t};\n\n\t/* GETTERS */\n\n\t/**\n\t * Returns true if the carousel should be disabled\n\t */\n\tpublic isCarouselDisabled(): boolean {\n\t\treturn this._carouselDisabled;\n\t}\n}\n","import { Container } from \"pixi.js\";\nimport { Linear, TweenMax } from \"gsap\";\nimport * as i18n from \"i18next\";\nimport type { TextField } from \"@gdk/core-pixi\";\n\nexport class Timer extends Container {\n\t/**\n\t * timer text with the countdown\n\t */\n\tpublic timerText: TextField = null;\n\n\t/**\n\t * \"game canceled after\" text\n\t */\n\tpublic txt: TextField = null;\n\n\t/**\n\t * \"let's go!\" text\n\t */\n\tpublic txtGo: TextField = null;\n\t/**\n\t * current left time\n\t */\n\tprotected time: number;\n\n\t/**\n\t * the time tween\n\t */\n\tprotected tween: TweenMax;\n\n\t/**\n\t * the time promise\n\t */\n\tprotected tweenPromise: Promise<void>;\n\n\t/**\n\t * The i18n key\n\t */\n\tprivate _key: string;\n\n\t/**\n\t * the timer start time\n\t */\n\tprivate _startTime: number;\n\n\t/**\n\t * Set the starting time in seconds\n\t * @param time in seconds\n\t */\n\tpublic set startTime(time: number) {\n\t\tthis._startTime = time;\n\t\tthis.timerText.visible = true;\n\t\tthis.timerText.text = Math.floor(time).toString();\n\t}\n\n\t/**\n\t * Set the formating string key (count var used for time display)\n\t * @param key the i18n key\n\t */\n\tpublic set key(key: string) {\n\t\tthis._key = key;\n\t}\n\n\t/**\n\t * Start the timer\n\t * @param time, optional, set the start time in seconds\n\t */\n\tpublic async start(time?: number): Promise<void> {\n\t\tif (time) {\n\t\t\tthis.startTime = time;\n\t\t}\n\n\t\tthis.reset();\n\t\tthis.timerText.visible = true;\n\n\t\tthis.time = this._startTime;\n\n\t\tthis.tweenPromise = new Promise<void>((solve) => {\n\t\t\tthis.tween = TweenMax.to(this, time, {\n\t\t\t\ttime: 0,\n\t\t\t\tease: Linear.easeNone,\n\t\t\t\tonUpdate: () => {\n\t\t\t\t\tif (this._key) {\n\t\t\t\t\t\tthis.timerText.text = i18n.t(this._key, { count: Math.floor(this.time) });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.timerText.text = Math.floor(this.time).toString(10);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonComplete: solve,\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Reset the timer to the startTime without start\n\t */\n\tpublic reset(): void {\n\t\tthis.startTime = this._startTime;\n\n\t\tif (this.tween) {\n\t\t\tthis.tween.kill();\n\t\t}\n\t}\n\n\t/**\n\t * Pause the timer\n\t */\n\tpublic pause(): void {\n\t\tthis.tween.pause();\n\t}\n\n\t/**\n\t * Unpause the timer\n\t */\n\tpublic async unpause(): Promise<void> {\n\t\tthis.tween.play();\n\t\tawait this.tweenPromise;\n\t}\n}\n","import { Container, Sprite } from \"pixi.js\";\nimport { Button, TextArea, EAlign, Docking } from \"@gdk/core-pixi\";\nimport type { IButtonStyle, IStyles } from \"@gdk/core-pixi\";\n\n/**\n * Home text style, represents a text in the home component\n */\nexport interface IHomeTextStyle {\n\ttext?: string;\n\tstyles: IStyles;\n}\n\n/**\n * Home button style, represents a the style of the play button\n */\nexport interface IHomeButtonStyle {\n\tstyle: IButtonStyle;\n\ttext?: IHomeTextStyle;\n}\n\n/**\n * Represents the overall style of the home component\n */\nexport interface IHomeStyle {\n\tplayButton: Button | IHomeButtonStyle;\n\tgameName: string | Container | IHomeTextStyle;\n\tclaim: string | Container | IHomeTextStyle;\n}\n\nexport class Home extends Container {\n\t// Public members\n\tpublic playButton: Button;\n\tpublic gameName: TextArea | Sprite | Container;\n\tpublic claim: TextArea | Sprite | Container;\n\n\t/**\n\t * Constructor\n\t * @param config The home style\n\t */\n\tpublic constructor(config: IHomeStyle) {\n\t\t// PIXI.Container\n\t\tsuper();\n\n\t\t// Game name\n\t\tif (typeof config.gameName === \"string\") {\n\t\t\t// We should build the sprite\n\t\t\tthis.gameName = Sprite.fromFrame(config.gameName);\n\t\t\tthis.gameName.pivot.x = (this.gameName as Sprite).texture.width / 2;\n\t\t\tthis.gameName.pivot.y = (this.gameName as Sprite).texture.height / 2;\n\t\t\tthis.gameName.docking = new Docking(Docking.centerAll);\n\t\t} else if (config.gameName instanceof Container) {\n\t\t\t// It is a sprite\n\t\t\tthis.gameName = config.gameName;\n\t\t} else {\n\t\t\t// Should be a textfield\n\t\t\tthis.gameName = new TextArea(config.gameName.text || \"\", config.gameName.styles, {\n\t\t\t\talign: EAlign.Center,\n\t\t\t});\n\t\t\tthis.gameName.docking = new Docking(Docking.centerAll);\n\t\t}\n\n\t\tthis.addChild(this.gameName);\n\n\t\t// Claim\n\t\tif (typeof config.claim === \"string\") {\n\t\t\t// We should build the sprite\n\t\t\tthis.claim = Sprite.fromFrame(config.claim);\n\t\t\tthis.claim.docking = new Docking(Docking.centerAll);\n\t\t} else if (config.claim instanceof Container) {\n\t\t\t// It is a sprite\n\t\t\tthis.claim = config.claim;\n\t\t} else {\n\t\t\t// Should be a textfield\n\t\t\tthis.claim = new TextArea(config.claim.text || \"\", config.claim.styles, {\n\t\t\t\talign: EAlign.Center,\n\t\t\t});\n\t\t\tthis.claim.docking = new Docking(Docking.centerAll);\n\t\t}\n\n\t\tthis.addChild(this.claim);\n\n\t\t// Button\n\t\tif (config.playButton instanceof Button) {\n\t\t\tthis.playButton = config.playButton;\n\t\t} else {\n\t\t\tthis.playButton = new Button(\n\t\t\t\tconfig.playButton.style,\n\t\t\t\tconfig.playButton.text.styles,\n\t\t\t\tconfig.playButton.text.text\n\t\t\t);\n\t\t\tthis.playButton.docking = new Docking(Docking.centerAll);\n\t\t}\n\t\t// Because of tracking, the play button must always have the same name, so we force the name\n\t\tthis.playButton.setName(\"play\");\n\n\t\tthis.addChild(this.playButton);\n\n\t\t// Placing elements\n\t\tthis.gameName.docking.y = -this.claim.height / 2 - this.gameName.height / 2 - 35;\n\t\tthis.playButton.docking.y =\n\t\t\tthis.claim.height / 2 + this.playButton.background.texture.height / 2 + 35;\n\t}\n}\n","export * from \"./rules\";\nexport * from \"./home/home\";\nexport * from \"./result\";\nexport * from \"./game/timer\";\nexport * from \"./crossSell/crossSell\";\n","import { Container, Point } from \"pixi.js\";\nimport {\n\tTextArea,\n\tDocking,\n\tSpineTimeline,\n\tDockingBounds,\n\tEAlign,\n\tESpineTimelineEvent,\n} from \"@gdk/core-pixi\";\nimport { Loader } from \"@gdk/core\";\nimport { TweenMax, TimelineMax, Cubic, Linear } from \"gsap\";\nimport { Howl } from \"howler\";\nimport type { IStyles, TextField } from \"@gdk/core-pixi\";\n\nimport { ResultStage } from \"./resultStage\";\nimport { EResultBoxEvents } from \"./resultBox\";\nimport { EVisualIdentityAction } from \"../../../adaptativeVisualIdentity\";\nimport { IPurse } from \"../../wizz\";\nimport type { ResultBox } from \"./resultBox\";\nimport type { ICoinPosition, IPurses } from \"../../wizz\";\nimport type { AbstractGame } from \"../../abstractGame\";\n\nexport interface IAmountCoinWizzThreshold {\n\tamount: number;\n}\n\nexport interface IAmountCoinWizzSounds {\n\tloser?: Howl | string;\n\twinner?: Howl | string;\n\tincrementation?: Howl | string;\n}\n\nexport interface IAmountCoinWizzAnimations {\n\tloser?: SpineTimeline | string;\n\twinner?: SpineTimeline | string;\n\tcoin?: SpineTimeline | string;\n}\n\nexport interface ITextResultEndGame {\n\tmainText: string;\n\tsubText1: string;\n}\n\nexport interface IAmountCoinWizzStyle {\n\tgame: AbstractGame;\n\tamountStyle: IStyles;\n\thasCoinsAnimation: boolean;\n\tanimationSpine?: IAmountCoinWizzAnimations;\n\tsounds?: IAmountCoinWizzSounds;\n\tloserDuration?: number;\n\twinnerDuration?: number;\n}\n\nexport class AmountCoinWizzStage extends ResultStage {\n\t// Public members\n\tpublic mainText: Container | TextArea;\n\tpublic subText1: Container | TextArea;\n\n\tpublic config: IAmountCoinWizzStyle;\n\n\tprivate _loseSound: Howl;\n\tprivate _winSound: Howl;\n\tprivate _incrementationSound: Howl;\n\tprivate _winAnimation: SpineTimeline;\n\tprivate _coinAnimation: SpineTimeline;\n\tprivate _coins: SpineTimeline[];\n\tprivate _lostAnimation: SpineTimeline;\n\tprivate _amount: TextField;\n\tprivate coinsContainer: Container;\n\tprivate purse: Container;\n\n\tprivate static coinsPosition: ICoinPosition[] = [\n\t\t{ x: 67, y: -223, startTime: 0.01, rotation: 0.6 },\n\t\t{ x: 180, y: -128, startTime: 0.2, rotation: 2.3 },\n\t\t{ x: 199, y: -3, startTime: 0.8, rotation: 3.25 },\n\t\t{ x: 195, y: 181, startTime: 0.4, rotation: 0.35 },\n\t\t{ x: 89, y: 247, startTime: 1.4, rotation: 1.8 },\n\t\t{ x: -77, y: 254, startTime: 1, rotation: 0.45 },\n\t\t{ x: -185, y: 162, startTime: 1.6, rotation: -2 },\n\t\t{ x: -208, y: 26, startTime: 1.2, rotation: -3.6 },\n\t\t{ x: -187, y: -109, startTime: 0.6, rotation: 1.4 },\n\t\t{ x: -102, y: -215, startTime: 1.4, rotation: 0.8 },\n\t];\n\n\t/**\n\t * Constructor\n\t */\n\tpublic constructor(config: IAmountCoinWizzStyle) {\n\t\tsuper();\n\n\t\tthis._amount = new TextArea(\"+100\", config.amountStyle);\n\t\tthis._amount.keepCanvasReference = true; // Performances, keep canvas reference to avoid re-creating a canvas each update.\n\t\tthis._amount.docking = new Docking(Docking.centerAll);\n\t\tthis._amount.wordWrap = true;\n\t\tthis._amount.align = EAlign.Center;\n\t\tthis._amount.width = 240;\n\t\tthis._amount.docking.x = -15;\n\t\tthis._amount.docking.y = 292;\n\t\tthis._amount.scaleXY = 1;\n\n\t\t// Sounds\n\t\tconfig.sounds = config.sounds || {};\n\n\t\tif (typeof config.sounds.loser === \"string\") {\n\t\t\tthis._loseSound = Loader.get<Howl>(config.sounds.loser);\n\t\t} else if (config.sounds.loser instanceof Howl) {\n\t\t\tthis._loseSound = config.sounds.loser;\n\t\t}\n\n\t\tif (typeof config.sounds.winner === \"string\") {\n\t\t\tthis._winSound = Loader.get<Howl>(config.sounds.winner);\n\t\t} else if (config.sounds.winner instanceof Howl) {\n\t\t\tthis._winSound = config.sounds.winner;\n\t\t}\n\n\t\tif (typeof config.sounds.incrementation === \"string\") {\n\t\t\tthis._incrementationSound = Loader.get<Howl>(config.sounds.incrementation);\n\t\t} else if (config.sounds.incrementation instanceof Howl) {\n\t\t\tthis._incrementationSound = config.sounds.incrementation;\n\t\t}\n\n\t\tconfig.winnerDuration = config.winnerDuration || 6;\n\t\tconfig.loserDuration = config.loserDuration || 4;\n\n\t\t// animations\n\t\tconfig.animationSpine = config.animationSpine || {};\n\n\t\t// winning Animation\n\t\tif (config.animationSpine.winner instanceof SpineTimeline) {\n\t\t\tthis._winAnimation = config.animationSpine.winner as SpineTimeline;\n\t\t} else {\n\t\t\t// instanciate a new spineTimeline\n\t\t\tif (typeof config.animationSpine.winner === \"string\") {\n\t\t\t\tthis._winAnimation = new SpineTimeline(config.animationSpine.winner);\n\t\t\t} else {\n\t\t\t\tthis._winAnimation = new SpineTimeline(\"result_win.json\");\n\t\t\t}\n\n\t\t\tthis._winAnimation.docking = new Docking(Docking.centerAll);\n\t\t\tthis._winAnimation.docking.x = -38;\n\t\t\tthis._winAnimation.docking.y = -140;\n\t\t\tthis._winAnimation.pivot.x = 651;\n\t\t\tthis._winAnimation.pivot.y = 614;\n\t\t}\n\t\tthis._winAnimation.visible = false;\n\t\tthis.addChild(this._winAnimation);\n\n\t\t// lost animation\n\t\tif (config.animationSpine.loser instanceof SpineTimeline) {\n\t\t\tthis._lostAnimation = config.animationSpine.loser as SpineTimeline;\n\t\t} else {\n\t\t\t// instanciate a new spineTimeline\n\t\t\tif (typeof config.animationSpine.loser === \"string\") {\n\t\t\t\tthis._lostAnimation = new SpineTimeline(config.animationSpine.loser);\n\t\t\t} else {\n\t\t\t\tthis._lostAnimation = new SpineTimeline(\"result_lost.json\");\n\t\t\t}\n\n\t\t\tthis._lostAnimation.docking = new Docking(Docking.centerAll);\n\t\t\tthis._lostAnimation.docking.x = 0;\n\t\t\tthis._lostAnimation.docking.y = 0;\n\t\t\tthis._lostAnimation.pivot.x = 288;\n\t\t\tthis._lostAnimation.pivot.y = 288;\n\t\t\tthis._lostAnimation.scaleXY = 1.1;\n\t\t}\n\t\tthis._lostAnimation.visible = false;\n\t\tthis.addChild(this._lostAnimation);\n\n\t\tthis.addChild(this._amount);\n\n\t\t// coin animation\n\t\tif (config.hasCoinsAnimation) {\n\t\t\tlet mustSetCoins = true;\n\n\t\t\tif (config.animationSpine.coin instanceof SpineTimeline) {\n\t\t\t\tthis._coinAnimation = config.animationSpine.coin as SpineTimeline;\n\t\t\t\tmustSetCoins = false;\n\t\t\t} else if (typeof config.animationSpine.coin === \"string\") {\n\t\t\t\tthis._coinAnimation = new SpineTimeline(config.animationSpine.coin);\n\t\t\t} else {\n\t\t\t\t// standard animation\n\t\t\t\tthis._coinAnimation = new SpineTimeline(\"result_win_coin.json\");\n\t\t\t}\n\n\t\t\tif (mustSetCoins) {\n\t\t\t\t// a new SpineTimeline was created, must set it\n\t\t\t\tthis._coinAnimation.docking = new Docking(Docking.centerAll);\n\t\t\t\tthis._coinAnimation.pivot.x = this._coinAnimation.width / 2;\n\t\t\t\tthis._coinAnimation.pivot.y = this._coinAnimation.height / 2;\n\t\t\t\tthis._coinAnimation.docking.x = 0;\n\t\t\t\tthis._coinAnimation.docking.y = 0;\n\t\t\t}\n\n\t\t\tthis.coinsContainer = new Container();\n\t\t\tthis.coinsContainer.dockingBounds = new DockingBounds(576, 1024);\n\t\t\tthis.coinsContainer.docking = new Docking(Docking.centerAll);\n\t\t\tthis.coinsContainer.docking.x = 0;\n\t\t\tthis.coinsContainer.docking.y = 0;\n\n\t\t\tthis._coins = [];\n\t\t\tfor (let i = 0; i < 10; i++) {\n\t\t\t\tthis._coins[i] = this._coinAnimation.clone() as SpineTimeline;\n\t\t\t\tthis.coinsContainer.addChild(this._coins[i]);\n\t\t\t}\n\n\t\t\tthis.addChild(this.coinsContainer);\n\t\t}\n\n\t\t// Misc.\n\t\tconfig.game.vi.emitter.emit(\n\t\t\tEVisualIdentityAction.WizzGetPursesContainers,\n\t\t\t(containers: IPurses) => {\n\t\t\t\tthis.purse = containers.standard;\n\t\t\t}\n\t\t);\n\t\tthis.config = config;\n\t\tthis.dockAsPoint = true;\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * On show the result box\n\t * @param box the result box reference\n\t * @param done the callback to call when stage animation done\n\t */\n\tpublic onShow(box: ResultBox, done: (stop: boolean) => void): void {\n\t\tif (box.amount.value === 0) {\n\t\t\t// Looser\n\n\t\t\tthis._winAnimation.visible = false;\n\t\t\tthis._lostAnimation.visible = false;\n\t\t\tthis.coinsContainer.visible = false;\n\t\t\tthis._amount.visible = false;\n\t\t\tthis._amount.docking.x = -13;\n\t\t\tthis._amount.docking.y = 209;\n\n\t\t\t// texts\n\t\t\tthis._amount.text = \"0\";\n\n\t\t\t// sounds\n\t\t\tif (this._loseSound) {\n\t\t\t\tthis._loseSound.play();\n\t\t\t}\n\n\t\t\t// animations\n\t\t\t(async () => {\n\t\t\t\tthis._lostAnimation.on(ESpineTimelineEvent.Start, () => {\n\t\t\t\t\tthis._lostAnimation.visible = true;\n\t\t\t\t\tthis._amount.visible = true;\n\t\t\t\t});\n\t\t\t\tawait this._lostAnimation.playDirect(\"enter\");\n\t\t\t\tawait this._lostAnimation.playDirect(\"idle\");\n\t\t\t\tthis._amount.visible = false;\n\t\t\t\tthis._lostAnimation.visible = false;\n\t\t\t})();\n\t\t} else {\n\t\t\t// Winner\n\n\t\t\t// @TODO\n\t\t\tthis._winAnimation.visible = true;\n\t\t\tthis._lostAnimation.visible = false;\n\t\t\tthis.coinsContainer.visible = true;\n\t\t\tthis._amount.docking.x = -15;\n\t\t\tthis._amount.docking.y = 292;\n\n\t\t\t// texts\n\t\t\tthis._amount.text = `+ ${box.amount.value}`;\n\n\t\t\t// sounds\n\t\t\tif (this._winSound) {\n\t\t\t\tthis._winSound.play();\n\t\t\t}\n\n\t\t\t// animations\n\t\t\t// coins animations\n\t\t\tif (this.config.hasCoinsAnimation) {\n\t\t\t\t// set coins to default\n\t\t\t\tfor (let i = 0; i < this._coins.length; i++) {\n\t\t\t\t\tconst element = this._coins[i];\n\t\t\t\t\telement.docking.x = AmountCoinWizzStage.coinsPosition[i].x;\n\t\t\t\t\telement.docking.y = AmountCoinWizzStage.coinsPosition[i].y;\n\t\t\t\t\telement.playDirect(\"coin\", true);\n\t\t\t\t\telement.play();\n\t\t\t\t\telement.timeScale = 0;\n\t\t\t\t\telement.rotation = AmountCoinWizzStage.coinsPosition[i].rotation;\n\t\t\t\t\telement.seek(AmountCoinWizzStage.coinsPosition[i].startTime);\n\t\t\t\t\telement.seek(AmountCoinWizzStage.coinsPosition[i].startTime);\n\t\t\t\t\telement.seek(AmountCoinWizzStage.coinsPosition[i].startTime);\n\t\t\t\t\telement.seek(AmountCoinWizzStage.coinsPosition[i].startTime);\n\t\t\t\t\telement.scaleXY = 1;\n\t\t\t\t\telement.visible = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// phase one\n\t\t\tthis._winAnimation.visible = true;\n\t\t\tthis._winAnimation.playDirect(\"enter\");\n\t\t\tthis.scaleXY = 0;\n\t\t\tconst firstTween: TimelineMax = new TimelineMax();\n\t\t\tfirstTween.to(this, 0.5, { scaleXY: 1.1 }, 0);\n\t\t\tfirstTween.to(\n\t\t\t\tthis,\n\t\t\t\t0.1,\n\t\t\t\t{\n\t\t\t\t\tscaleXY: 1,\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\tbox.emit(EResultBoxEvents.StageHasEntered, this);\n\t\t\t\t\t\t// phase two\n\t\t\t\t\t\tconst secondTween: TimelineMax = new TimelineMax();\n\t\t\t\t\t\tsecondTween.to(this, 3.5, {}, 0);\n\t\t\t\t\t\tif (this.config.hasCoinsAnimation) {\n\t\t\t\t\t\t\tconst coinFinalPos: Point = this.coinsContainer.toLocal(\n\t\t\t\t\t\t\t\tnew Point(this.purse.dockingBounds.width + 15, 50),\n\t\t\t\t\t\t\t\tthis.purse,\n\t\t\t\t\t\t\t\tnew Point(0, 0),\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tfor (let i = 0; i < this._coins.length; i++) {\n\t\t\t\t\t\t\t\tconst element = this._coins[i];\n\t\t\t\t\t\t\t\t// turning coin animation\n\t\t\t\t\t\t\t\tconst timeCoin = { float: AmountCoinWizzStage.coinsPosition[i].startTime };\n\t\t\t\t\t\t\t\tconst endTime =\n\t\t\t\t\t\t\t\t\tMath.ceil(AmountCoinWizzStage.coinsPosition[i].startTime / (1.605 + 0.48)) *\n\t\t\t\t\t\t\t\t\t\t1.605 +\n\t\t\t\t\t\t\t\t\t0.48;\n\t\t\t\t\t\t\t\tsecondTween.to(\n\t\t\t\t\t\t\t\t\ttimeCoin,\n\t\t\t\t\t\t\t\t\t1.75,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfloat: endTime,\n\t\t\t\t\t\t\t\t\t\tonUpdate: () => {\n\t\t\t\t\t\t\t\t\t\t\telement.seek(timeCoin.float);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\t\t\t\t\t\telement.seek(1.605 + 0.48);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tease: Linear.easeNone,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t// movement/rotation coin animation\n\t\t\t\t\t\t\t\tsecondTween.to(\n\t\t\t\t\t\t\t\t\telement.docking,\n\t\t\t\t\t\t\t\t\t1.65 + (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tx: coinFinalPos.x - element.x + element.docking.x,\n\t\t\t\t\t\t\t\t\t\tdelay: (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t\tease: Cubic.easeIn,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsecondTween.to(\n\t\t\t\t\t\t\t\t\telement.docking,\n\t\t\t\t\t\t\t\t\t1.7 + (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ty: coinFinalPos.y - element.y + element.docking.y,\n\t\t\t\t\t\t\t\t\t\tdelay: (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t\tease: Cubic.easeIn,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsecondTween.to(\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\t1.7 + (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trotation: 0,\n\t\t\t\t\t\t\t\t\t\tscaleXY: 0.5,\n\t\t\t\t\t\t\t\t\t\tdelay: (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t\tease: Linear.easeNone,\n\t\t\t\t\t\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\t\t\t\t\t\telement.visible = false;\n\t\t\t\t\t\t\t\t\t\t\tif (this._incrementationSound) {\n\t\t\t\t\t\t\t\t\t\t\t\tthis._incrementationSound.play();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsecondTween.play();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t0.5\n\t\t\t);\n\t\t\tfirstTween.play();\n\t\t}\n\n\t\t// set the overall time of the animation\n\t\tconst duration: number =\n\t\t\tbox.amount.value === 0 ? this.config.loserDuration : this.config.winnerDuration;\n\t\tTweenMax.to(this, duration, {\n\t\t\tonComplete: () => {\n\t\t\t\tbox.emit(EResultBoxEvents.StageWillExit, this);\n\t\t\t\tdone(true);\n\t\t\t},\n\t\t});\n\t}\n}\n","import { Sprite, Container, Point } from \"pixi.js\";\nimport {\n\tTextArea,\n\tDocking,\n\tSpineTimeline,\n\tDockingBounds,\n\tEAlign,\n\tESpineTimelineEvent,\n} from \"@gdk/core-pixi\";\nimport { Loader, Numeral } from \"@gdk/core\";\nimport { TweenMax, TimelineMax, Cubic, Power0, Linear, Back, Expo } from \"gsap\";\nimport { Howl } from \"howler\";\nimport type { IStyles, TextField } from \"@gdk/core-pixi\";\n\nimport { ResultStage } from \"./resultStage\";\nimport { EResultBoxEvents } from \"./resultBox\";\nimport { EVisualIdentityAction } from \"../../../adaptativeVisualIdentity\";\nimport type { ResultBox } from \"./resultBox\";\nimport type { AbstractGame } from \"../../abstractGame\";\nimport type { IPurses } from \"../../wizz\";\n\nexport interface IAmountCurrencyWizzThreshold {\n\tamount: number;\n}\n\nexport interface IAmountCurrencyWizzSounds {\n\tloser?: Howl | string;\n\twinner?: Howl | string;\n\tincrement?: Howl | string;\n}\n\nexport interface IAmountCurrencyWizzAnimations {\n\tloser?: SpineTimeline | string;\n\trollingFX?: SpineTimeline | string;\n}\n\nexport interface IAmountCurrencyWizzSprites {\n\twinTextSprite?: Sprite | string;\n\tcurrencyBackSprite?: Sprite | string;\n\tcurrencyMovingSprite?: Sprite | string;\n}\n\nexport interface ITextResultEndGame {\n\tmainText: string;\n\tsubText1: string;\n}\n\nexport interface IAmountCurrencyWizzStyle {\n\tgame: AbstractGame;\n\tamountStyle: IStyles;\n\tamountStrokeStyle: IStyles;\n\thasCoinsAnimation: boolean;\n\tanimationSpine?: IAmountCurrencyWizzAnimations;\n\tsounds?: IAmountCurrencyWizzSounds;\n\tsprites?: IAmountCurrencyWizzSprites;\n\tminimumFractionDigits: number;\n}\n\nexport class AmountCurrencyWizzStage extends ResultStage {\n\t// Public members\n\tpublic mainText: Container | TextArea;\n\tpublic subText1: Container | TextArea;\n\n\tpublic config: IAmountCurrencyWizzStyle;\n\n\t// sounds\n\tprivate _loseSound: Howl;\n\tprivate _winSound: Howl;\n\tprivate _incrementSound: Howl;\n\t// spineTimelines\n\tprivate _rollingFX: SpineTimeline;\n\tprivate _lostAnimation: SpineTimeline;\n\t// sprites\n\tprivate _referenceCoin: Sprite;\n\tprivate _movingCoins: Sprite[];\n\tprivate _referenceBackgroundCoin: Sprite;\n\tprivate _backgroundCoins: Sprite[];\n\tprivate _sparkles: Sprite[];\n\tprivate _fxRayon: Sprite;\n\tprivate _winText: Sprite;\n\tprivate _amount: TextField;\n\tprivate _amountStroke: TextField;\n\tprivate _coinsContainer: Container;\n\t// containers\n\tprivate sparkles: Container;\n\tprivate resultWin: Container;\n\tprivate purse: Container;\n\n\tprivate static coinsPosition: Array<{\n\t\tx: number;\n\t\ty: number;\n\t\tstartTime: number;\n\t\trotation: number;\n\t}> = [\n\t\t{ x: 67, y: -223, startTime: 0.01, rotation: 0.6 },\n\t\t{ x: 180, y: -128, startTime: 0.2, rotation: 2.3 },\n\t\t{ x: 199, y: -3, startTime: 0.8, rotation: 3.25 },\n\t\t{ x: 195, y: 181, startTime: 0.4, rotation: 0.35 },\n\t\t{ x: 89, y: 247, startTime: 1.4, rotation: 1.8 },\n\t\t{ x: -77, y: 254, startTime: 1, rotation: 0.45 },\n\t\t{ x: -185, y: 162, startTime: 1.6, rotation: -2 },\n\t\t{ x: -208, y: 26, startTime: 1.2, rotation: -3.6 },\n\t\t{ x: -187, y: -109, startTime: 0.6, rotation: 1.4 },\n\t\t{ x: -102, y: -215, startTime: 1.4, rotation: 0.8 },\n\t];\n\n\tprivate static sparkleRotation: number[] = [4, 2.9, 2, 0.64, 0, -0.93, 1.2, 4.5];\n\n\tprivate static backgroundCoinsPosition: Array<{\n\t\tx: number;\n\t\ty: number;\n\t\tangle: number;\n\t\tforce: number;\n\t\tstartRotation: number;\n\t\trotationForce: number;\n\t\tstartScale: number;\n\t\tscaleForce: number;\n\t}> = [\n\t\t{\n\t\t\tx: -95,\n\t\t\ty: -10,\n\t\t\tangle: 1.74,\n\t\t\tforce: 9,\n\t\t\tstartRotation: -0.7,\n\t\t\trotationForce: -0.08,\n\t\t\tstartScale: 0.4,\n\t\t\tscaleForce: 0.1,\n\t\t},\n\t\t{\n\t\t\tx: -30,\n\t\t\ty: -40,\n\t\t\tangle: 2.62,\n\t\t\tforce: 14,\n\t\t\tstartRotation: 0,\n\t\t\trotationForce: -0.2,\n\t\t\tstartScale: 0.4,\n\t\t\tscaleForce: 0.1,\n\t\t},\n\t\t{\n\t\t\tx: 38,\n\t\t\ty: -45,\n\t\t\tangle: 3.48,\n\t\t\tforce: 14,\n\t\t\tstartRotation: 0.5,\n\t\t\trotationForce: -0.1,\n\t\t\tstartScale: 0.4,\n\t\t\tscaleForce: 0.1,\n\t\t},\n\t\t{\n\t\t\tx: 80,\n\t\t\ty: 0,\n\t\t\tangle: 4.36,\n\t\t\tforce: 14,\n\t\t\tstartRotation: 0.3,\n\t\t\trotationForce: 0.05,\n\t\t\tstartScale: 0.4,\n\t\t\tscaleForce: 0.1,\n\t\t},\n\t];\n\tprivate static numberPerRayon: number = 6;\n\n\t/**\n\t * Constructor\n\t */\n\tpublic constructor(config: IAmountCurrencyWizzStyle) {\n\t\tsuper();\n\n\t\t// texts\n\t\tthis._amount = new TextArea(\"\", config.amountStyle);\n\t\tthis._amount.keepCanvasReference = true; // Performances, keep canvas reference to avoid re-creating a canvas each update.\n\t\tthis._amount.docking = new Docking(Docking.centerAll);\n\t\tthis._amount.wordWrap = true;\n\t\tthis._amount.docking.cancelPivot = true;\n\t\tthis._amount.align = EAlign.Center;\n\t\tthis._amount.width = 500;\n\t\tthis._amount.docking.x = 0;\n\t\tthis._amount.docking.y = 0;\n\t\tthis._amount.scaleXY = 1;\n\n\t\tthis._amountStroke = new TextArea(\"\", config.amountStrokeStyle);\n\t\tthis._amountStroke.keepCanvasReference = true; // Performances, keep canvas reference to avoid re-creating a canvas each update.\n\t\tthis._amountStroke.docking = new Docking(Docking.centerAll);\n\t\tthis._amountStroke.wordWrap = true;\n\t\tthis._amountStroke.docking.cancelPivot = true;\n\t\tthis._amountStroke.align = EAlign.Center;\n\t\tthis._amountStroke.width = 500;\n\t\tthis._amountStroke.docking.x = 0;\n\t\tthis._amountStroke.docking.y = 0;\n\t\tthis._amountStroke.scaleXY = 1;\n\n\t\t// Sounds\n\t\tconfig.sounds = config.sounds || {};\n\n\t\tif (typeof config.sounds.loser === \"string\") {\n\t\t\tthis._loseSound = Loader.get<Howl>(config.sounds.loser);\n\t\t} else if (config.sounds.loser instanceof Howl) {\n\t\t\tthis._loseSound = config.sounds.loser;\n\t\t}\n\n\t\tif (typeof config.sounds.winner === \"string\") {\n\t\t\tthis._winSound = Loader.get<Howl>(config.sounds.winner);\n\t\t} else if (config.sounds.winner instanceof Howl) {\n\t\t\tthis._winSound = config.sounds.winner;\n\t\t}\n\n\t\tif (typeof config.sounds.increment === \"string\") {\n\t\t\tthis._incrementSound = Loader.get<Howl>(config.sounds.increment);\n\t\t} else if (config.sounds.increment instanceof Howl) {\n\t\t\tthis._incrementSound = config.sounds.increment;\n\t\t}\n\n\t\t// animations\n\t\tconfig.animationSpine = config.animationSpine || {};\n\n\t\t// rollingFX Animation\n\t\tif (config.animationSpine.rollingFX instanceof SpineTimeline) {\n\t\t\tthis._rollingFX = config.animationSpine.rollingFX as SpineTimeline;\n\t\t} else {\n\t\t\tif (typeof config.animationSpine.rollingFX === \"string\") {\n\t\t\t\tthis._rollingFX = new SpineTimeline(config.animationSpine.rollingFX);\n\t\t\t} else {\n\t\t\t\tthis._rollingFX = new SpineTimeline(\"rollingFX.json\");\n\t\t\t}\n\t\t\tthis._rollingFX.docking = new Docking(Docking.centerAll);\n\t\t\tthis._rollingFX.docking.x = 0;\n\t\t\tthis._rollingFX.docking.y = 100;\n\t\t\tthis._rollingFX.pivot.x = 620;\n\t\t\tthis._rollingFX.pivot.y = 580;\n\t\t\tthis._rollingFX.scaleXY = 0.5;\n\t\t}\n\t\tthis._rollingFX.timeScale = 3;\n\t\tthis._rollingFX.visible = false;\n\n\t\t// lost animation\n\t\tif (config.animationSpine.loser instanceof SpineTimeline) {\n\t\t\tthis._lostAnimation = config.animationSpine.loser as SpineTimeline;\n\t\t} else {\n\t\t\tif (typeof config.animationSpine.loser === \"string\") {\n\t\t\t\tthis._lostAnimation = new SpineTimeline(config.animationSpine.loser);\n\t\t\t} else {\n\t\t\t\tthis._lostAnimation = new SpineTimeline(\"result_lost.json\");\n\t\t\t}\n\t\t\tthis._lostAnimation.docking = new Docking(Docking.centerAll);\n\t\t\tthis._lostAnimation.docking.x = 0;\n\t\t\tthis._lostAnimation.docking.y = 100;\n\t\t\tthis._lostAnimation.pivot.x = 280;\n\t\t\tthis._lostAnimation.pivot.y = 260;\n\t\t\tthis._lostAnimation.scaleXY = 0.95;\n\t\t}\n\t\tthis._lostAnimation.visible = false;\n\n\t\t// sprites\n\t\tconfig.sprites = config.sprites || {};\n\n\t\t// backgroundCoin sprite\n\t\tif (config.sprites.currencyBackSprite instanceof Sprite) {\n\t\t\tthis._referenceBackgroundCoin = config.sprites.currencyBackSprite as Sprite;\n\t\t} else {\n\t\t\tif (typeof config.sprites.currencyBackSprite === \"string\") {\n\t\t\t\tthis._referenceBackgroundCoin = Sprite.fromImage(config.sprites.currencyBackSprite);\n\t\t\t} else {\n\t\t\t\tthis._referenceBackgroundCoin = Sprite.fromImage(\"fx_euro_big.png\");\n\t\t\t}\n\t\t\tthis._referenceBackgroundCoin.docking = new Docking(Docking.centerAll);\n\t\t\tthis._referenceBackgroundCoin.docking.x = 0;\n\t\t\tthis._referenceBackgroundCoin.docking.y = 0;\n\t\t\tthis._referenceBackgroundCoin.pivot.x = 18;\n\t\t\tthis._referenceBackgroundCoin.pivot.y = 46;\n\t\t\tthis._referenceBackgroundCoin.scaleXY = 0.38;\n\t\t}\n\n\t\t// moving coin sprite\n\t\tif (config.sprites.currencyMovingSprite instanceof Sprite) {\n\t\t\tthis._referenceCoin = config.sprites.currencyMovingSprite as Sprite;\n\t\t} else {\n\t\t\tif (typeof config.sprites.currencyMovingSprite === \"string\") {\n\t\t\t\tthis._referenceCoin = Sprite.fromImage(config.sprites.currencyMovingSprite);\n\t\t\t} else {\n\t\t\t\tthis._referenceCoin = Sprite.fromImage(\"fx_euro_00.png\");\n\t\t\t}\n\t\t\tthis._referenceCoin.docking = new Docking(Docking.centerAll);\n\t\t\tthis._referenceCoin.docking.x = 0;\n\t\t\tthis._referenceCoin.docking.y = 0;\n\t\t\tthis._referenceCoin.pivot.x = 40;\n\t\t\tthis._referenceCoin.pivot.y = 40;\n\t\t\tthis._referenceCoin.scaleXY = 1.3;\n\t\t\tthis._referenceCoin.visible = false;\n\t\t}\n\n\t\t// sparkles sprite\n\t\tconst sparkleReference = Sprite.fromImage(\"result_fx_sparkles.png\");\n\t\tsparkleReference.docking = new Docking(Docking.centerAll);\n\t\tsparkleReference.docking.x = 0;\n\t\tsparkleReference.docking.y = 0;\n\t\tsparkleReference.pivot.x = 24;\n\t\tsparkleReference.pivot.y = 76;\n\n\t\t// sparkles container\n\t\tthis.sparkles = new Container();\n\t\tthis.sparkles.dockingBounds = new DockingBounds(256, 512);\n\t\tthis.sparkles.docking = new Docking(Docking.centerAll);\n\t\tthis.sparkles.docking.cancelPivot = true;\n\t\tthis.sparkles.docking.x = 0;\n\t\tthis.sparkles.docking.y = 32;\n\t\tthis.sparkles.pivot.x = 128;\n\t\tthis.sparkles.pivot.y = 256;\n\t\tthis._sparkles = [];\n\t\tfor (let i = 0; i < 8; i++) {\n\t\t\tthis._sparkles[i] = sparkleReference.clone() as Sprite;\n\t\t\tthis._sparkles[i].rotation = AmountCurrencyWizzStage.sparkleRotation[i];\n\t\t\tthis.sparkles.addChild(this._sparkles[i]);\n\t\t}\n\n\t\t// resultWin container\n\t\tthis.resultWin = new Container();\n\t\tthis.resultWin.dockingBounds = new DockingBounds(256, 512);\n\t\tthis.resultWin.docking = new Docking(Docking.centerAll);\n\t\tthis.resultWin.docking.cancelPivot = true;\n\t\tthis.resultWin.docking.x = 0;\n\t\tthis.resultWin.docking.y = 50;\n\t\tthis.resultWin.pivot.x = 128;\n\t\tthis.resultWin.pivot.y = 256;\n\t\tthis._fxRayon = Sprite.fromFrame(\"result_fx_rayons.png\");\n\t\tthis._fxRayon.docking = new Docking(Docking.centerAll);\n\t\tthis._fxRayon.width = 512;\n\t\tthis._fxRayon.height = 512;\n\t\tthis._fxRayon.pivot.x = 256;\n\t\tthis._fxRayon.pivot.y = 256;\n\t\tthis.resultWin.addChild(this._fxRayon);\n\t\tconst resultTXT = Sprite.fromFrame(\"result_txt_win.png\");\n\t\tresultTXT.docking = new Docking(Docking.centerAll);\n\t\tresultTXT.docking.cancelPivot = true;\n\t\tresultTXT.width = 461;\n\t\tresultTXT.height = 122;\n\t\tresultTXT.docking.y = -300;\n\t\tresultTXT.scaleXY = 0.8;\n\t\tresultTXT.pivot.x = 94;\n\t\tresultTXT.pivot.y = 58;\n\t\tthis.resultWin.addChild(resultTXT);\n\t\t// background coins\n\t\tthis._backgroundCoins = [];\n\t\tconst totalBackgroundCoins =\n\t\t\tAmountCurrencyWizzStage.numberPerRayon *\n\t\t\tAmountCurrencyWizzStage.backgroundCoinsPosition.length;\n\t\tfor (let i = 0; i < totalBackgroundCoins; i++) {\n\t\t\tconst elem = (this._backgroundCoins[i] = this._referenceBackgroundCoin.clone() as Sprite);\n\t\t\tconst rayonNumber = Math.floor(i / AmountCurrencyWizzStage.numberPerRayon);\n\t\t\tconst rayon = AmountCurrencyWizzStage.backgroundCoinsPosition[rayonNumber];\n\t\t\tconst placeInRayon = i - rayonNumber * AmountCurrencyWizzStage.numberPerRayon;\n\n\t\t\telem.docking.x = rayon.x + Math.cos(rayon.angle + Math.PI / 2) * rayon.force * placeInRayon;\n\t\t\telem.docking.y = rayon.y + Math.sin(rayon.angle + Math.PI / 2) * rayon.force * placeInRayon;\n\t\t\telem.rotation = rayon.startRotation + rayon.rotationForce * placeInRayon;\n\t\t\telem.scaleXY = rayon.startScale + rayon.scaleForce * placeInRayon;\n\t\t\tthis.resultWin.addChild(this._backgroundCoins[i]);\n\t\t}\n\n\t\t// coins container\n\t\tthis._coinsContainer = new Container();\n\t\tthis._coinsContainer.dockingBounds = new DockingBounds(576, 1024);\n\t\tthis._coinsContainer.docking = new Docking(Docking.centerAll);\n\t\tthis._coinsContainer.docking.x = 0;\n\t\tthis._coinsContainer.docking.y = 50;\n\t\tthis._movingCoins = [];\n\t\tfor (let i = 0; i < 10; i++) {\n\t\t\tthis._movingCoins[i] = this._referenceCoin.clone() as Sprite;\n\t\t\tthis._coinsContainer.addChild(this._movingCoins[i]);\n\t\t}\n\n\t\tconfig.game.vi.emitter.emit(\n\t\t\tEVisualIdentityAction.WizzGetPursesContainers,\n\t\t\t(containers: IPurses) => {\n\t\t\t\tthis.purse = containers.standard;\n\t\t\t}\n\t\t);\n\n\t\tthis.addChild(this._rollingFX);\n\t\tthis.addChild(this.sparkles);\n\t\tthis.addChild(this.resultWin);\n\t\tthis.addChild(this._lostAnimation);\n\t\tthis.addChild(this._coinsContainer);\n\t\tthis.resultWin.addChild(this._amountStroke);\n\t\tthis.resultWin.addChild(this._amount);\n\n\t\t// Misc.\n\t\tthis.config = config;\n\t\tthis.dockAsPoint = true;\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * On show the result box\n\t * @param box the result box reference\n\t * @param done the callback to call when stage animation done\n\t */\n\tpublic onShow(box: ResultBox, done: (stop: boolean) => void): void {\n\t\tif (box.amount.value === 0) {\n\t\t\t// Looser\n\t\t\tthis.scaleXY = 1;\n\t\t\tthis._rollingFX.visible = false;\n\t\t\tthis.sparkles.visible = false;\n\t\t\tthis.resultWin.visible = false;\n\t\t\tthis._amount.visible = false;\n\t\t\tthis._amountStroke.visible = false;\n\t\t\tthis._lostAnimation.visible = false;\n\n\t\t\t// sounds\n\t\t\tif (this._loseSound) {\n\t\t\t\tthis._loseSound.play();\n\t\t\t}\n\n\t\t\t// animations\n\t\t\t(async () => {\n\t\t\t\tthis._lostAnimation.on(ESpineTimelineEvent.Start, () => {\n\t\t\t\t\tthis._lostAnimation.visible = true;\n\t\t\t\t});\n\t\t\t\tawait this._lostAnimation.playDirect(\"enter\");\n\t\t\t\tawait this._lostAnimation.playDirect(\"idle\", true);\n\t\t\t})();\n\t\t} else {\n\t\t\t// Winner\n\t\t\tthis.scaleXY = 0;\n\t\t\tthis._rollingFX.visible = true;\n\t\t\tthis.sparkles.visible = true;\n\t\t\tthis.resultWin.visible = true;\n\t\t\tthis._amount.visible = true;\n\t\t\tthis._amountStroke.visible = true;\n\t\t\tthis._lostAnimation.visible = false;\n\n\t\t\t// texts\n\t\t\tthis._amount.text = Numeral.currency(box.amount, {\n\t\t\t\tminimumFractionDigits: this.config.minimumFractionDigits,\n\t\t\t});\n\t\t\tthis._amountStroke.text = Numeral.currency(box.amount, {\n\t\t\t\tminimumFractionDigits: this.config.minimumFractionDigits,\n\t\t\t});\n\n\t\t\t// sounds\n\t\t\tif (this._winSound) {\n\t\t\t\tthis._winSound.play();\n\t\t\t}\n\n\t\t\t// reset animations\n\t\t\t// reset coins animations\n\t\t\tif (this.config.hasCoinsAnimation) {\n\t\t\t\t// set coins to default\n\t\t\t\tfor (let i = 0; i < this._movingCoins.length; i++) {\n\t\t\t\t\tconst element = this._movingCoins[i];\n\t\t\t\t\telement.docking.x = AmountCurrencyWizzStage.coinsPosition[i].x;\n\t\t\t\t\telement.docking.y = AmountCurrencyWizzStage.coinsPosition[i].y;\n\t\t\t\t\telement.rotation = AmountCurrencyWizzStage.coinsPosition[i].rotation;\n\t\t\t\t\telement.scaleXY = 1;\n\t\t\t\t\telement.visible = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// reset background coins animation\n\t\t\tconst totalBackgroundCoins =\n\t\t\t\tAmountCurrencyWizzStage.numberPerRayon *\n\t\t\t\tAmountCurrencyWizzStage.backgroundCoinsPosition.length;\n\t\t\tfor (let i = 0; i < totalBackgroundCoins; i++) {\n\t\t\t\tconst elem = this._backgroundCoins[i];\n\t\t\t\tconst rayonNumber = Math.floor(i / AmountCurrencyWizzStage.numberPerRayon);\n\t\t\t\tconst rayon = AmountCurrencyWizzStage.backgroundCoinsPosition[rayonNumber];\n\n\t\t\t\telem.docking.x = rayon.x;\n\t\t\t\telem.docking.y = rayon.y;\n\t\t\t\telem.rotation = rayon.startRotation;\n\t\t\t}\n\n\t\t\t// animations\n\t\t\t// phase one\n\t\t\tthis._rollingFX.playDirect(\"enter\", true);\n\t\t\tconst firstTween: TimelineMax = new TimelineMax();\n\t\t\t// size up\n\t\t\tfirstTween.to(this, 0.5, { scaleXY: 1.1, ease: Back.easeOut }, 0);\n\t\t\tfirstTween.to(\n\t\t\t\tthis,\n\t\t\t\t0.1,\n\t\t\t\t{\n\t\t\t\t\tscaleXY: 1,\n\t\t\t\t\tease: Back.easeOut,\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\tbox.emit(EResultBoxEvents.StageHasEntered, this);\n\t\t\t\t\t\t// phase two\n\t\t\t\t\t\tif (this.config.hasCoinsAnimation) {\n\t\t\t\t\t\t\tconst movingCoinTween: TimelineMax = new TimelineMax();\n\t\t\t\t\t\t\t// find the coins destination\n\t\t\t\t\t\t\tconst coinFinalPos: Point = this._coinsContainer.toLocal(\n\t\t\t\t\t\t\t\tnew Point(this.purse.dockingBounds.width - 20, 0),\n\t\t\t\t\t\t\t\tthis.purse,\n\t\t\t\t\t\t\t\tnew Point(0, 0),\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tfor (let i = 0; i < this._movingCoins.length; i++) {\n\t\t\t\t\t\t\t\tconst element = this._movingCoins[i];\n\t\t\t\t\t\t\t\t// movement/rotation coin animation\n\t\t\t\t\t\t\t\tmovingCoinTween.to(\n\t\t\t\t\t\t\t\t\telement.docking,\n\t\t\t\t\t\t\t\t\t1.65 + (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tx: coinFinalPos.x - element.x + element.docking.x,\n\t\t\t\t\t\t\t\t\t\tdelay: (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t\tease: Cubic.easeIn,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmovingCoinTween.to(\n\t\t\t\t\t\t\t\t\telement.docking,\n\t\t\t\t\t\t\t\t\t1.7 + (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ty: coinFinalPos.y - element.y + element.docking.y,\n\t\t\t\t\t\t\t\t\t\tdelay: (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t\tease: Cubic.easeIn,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmovingCoinTween.to(\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\t1.65 + (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t{ scaleXY: 0.5, delay: (i % 3) * 0.1, ease: Expo.easeIn },\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmovingCoinTween.to(\n\t\t\t\t\t\t\t\t\tmovingCoinTween,\n\t\t\t\t\t\t\t\t\t1.65 + (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t{ timeScale: 0.8, delay: (i % 3) * 0.1, ease: Expo.easeIn },\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmovingCoinTween.to(\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\t1.7 + (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trotation: 0,\n\t\t\t\t\t\t\t\t\t\tscaleXY: 0.5,\n\t\t\t\t\t\t\t\t\t\tdelay: (i % 3) * 0.1,\n\t\t\t\t\t\t\t\t\t\tease: Linear.easeNone,\n\t\t\t\t\t\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\t\t\t\t\t\telement.visible = false;\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmovingCoinTween.play();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t0.5\n\t\t\t);\n\n\t\t\t// fxRayons rotating\n\t\t\tfirstTween.to(this._fxRayon, 20, { rotation: Math.PI * 2 });\n\n\t\t\t// background coins\n\t\t\tfor (let i = 0; i < totalBackgroundCoins; i++) {\n\t\t\t\tconst elem = this._backgroundCoins[i];\n\t\t\t\tconst rayonNumber = Math.floor(i / AmountCurrencyWizzStage.numberPerRayon);\n\t\t\t\tconst rayon = AmountCurrencyWizzStage.backgroundCoinsPosition[rayonNumber];\n\t\t\t\tconst placeInRayon = i - rayonNumber * AmountCurrencyWizzStage.numberPerRayon;\n\n\t\t\t\tconst delayNumber = AmountCurrencyWizzStage.numberPerRayon - placeInRayon;\n\t\t\t\tconst finalX = rayon.x + Math.cos(rayon.angle + Math.PI / 2) * rayon.force * placeInRayon;\n\t\t\t\tconst finalY = rayon.y + Math.sin(rayon.angle + Math.PI / 2) * rayon.force * placeInRayon;\n\t\t\t\tfirstTween.to(\n\t\t\t\t\telem.docking,\n\t\t\t\t\t0.6,\n\t\t\t\t\t{ delay: delayNumber * 0.1, x: finalX, y: finalY, ease: Back.easeOut },\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t\telem.rotation = rayon.startRotation + rayon.rotationForce * placeInRayon;\n\t\t\t}\n\t\t\tfirstTween.play();\n\n\t\t\tthis.sparkles.visible = true;\n\t\t\tthis._sparkles.forEach((elem) => {\n\t\t\t\telem.scaleXY = 1;\n\t\t\t\telem.alpha = 1;\n\t\t\t\telem.docking.x = elem.docking.y = 0;\n\t\t\t\tTweenMax.to(elem, 1, { scaleX: 2, scaleY: 8, delay: 0.1, ease: Power0.easeNone });\n\t\t\t\tTweenMax.to(elem.docking, 1, {\n\t\t\t\t\tdelay: 0.1,\n\t\t\t\t\tease: Power0.easeNone,\n\t\t\t\t\tx: 1000 * Math.cos(elem.rotation + Math.PI / 2),\n\t\t\t\t\ty: 1000 * Math.sin(elem.rotation + Math.PI / 2),\n\t\t\t\t});\n\t\t\t\tTweenMax.to(elem, 0.2, { alpha: 0, delay: 0.9 });\n\t\t\t});\n\t\t}\n\n\t\t// set the overall time of the animation\n\t\tTweenMax.to(this, 6, {\n\t\t\tonComplete: () => {\n\t\t\t\tbox.emit(EResultBoxEvents.StageWillExit, this);\n\t\t\t\tdone(true);\n\t\t\t},\n\t\t});\n\t}\n}\n","import { Sprite, Container } from \"pixi.js\";\nimport { TextArea, Docking } from \"@gdk/core-pixi\";\nimport { Loader, Numeral, Amount } from \"@gdk/core\";\nimport { TweenMax, Back } from \"gsap\";\nimport { Howl } from \"howler\";\nimport type { IStyles } from \"@gdk/core-pixi\";\n\nimport { ResultStage } from \"./resultStage\";\nimport { EResultBoxEvents } from \"./resultBox\";\nimport { TweenUtils } from \"../../\";\nimport type { ResultBox } from \"./resultBox\";\n\nexport interface IAmountResultThreshold {\n\traysCount: number;\n\tamount: number;\n}\n\nexport interface IThresholdConfig {\n\tamount: number;\n\tduration?: number;\n\tanimated?: boolean;\n}\n\nexport interface IAmountResultStyle {\n\tsmallRaySprite: string;\n\tbigRaySprite: string;\n\tmiddleSprite: string;\n\tamountStyle: IStyles;\n\tamountDisappears?: boolean;\n\tamountVerticalMargin?: number;\n\traysPerThreshold: number;\n\tthresholds: Array<number | IThresholdConfig>;\n\n\tappearTime?: number;\n\tstayTime?: number;\n\tdisappearTime?: number;\n\n\tsounds?: {\n\t\tincrementation?: Howl | string;\n\t};\n\tminimumFractionDigits?: number;\n}\n\nexport class AmountResultStage extends ResultStage {\n\t// Public members\n\tpublic rays: Sprite[] = [];\n\tpublic raysContainer: Container;\n\tpublic fastRaysContainer: Container;\n\tpublic middleSprite: Container;\n\tpublic amount: TextArea;\n\n\tpublic config: IAmountResultStyle;\n\n\t// Protected members\n\tprotected currentAmount: number = 0;\n\n\t// Private members\n\tprivate _totalRaysCount: number = 0;\n\tprivate _averageRaysCount: number = 0;\n\tprivate _incrementationSound: Howl;\n\tprivate _animatedThresholds: Array<number | IThresholdConfig>;\n\t/**\n\t * Constructor\n\t */\n\tpublic constructor(config: IAmountResultStyle) {\n\t\tsuper();\n\n\t\t// Create rays\n\t\tthis._animatedThresholds = config.thresholds.filter(\n\t\t\t(t) => typeof t === \"number\" || t.animated !== false\n\t\t);\n\t\tthis._totalRaysCount = config.raysPerThreshold * this._animatedThresholds.length;\n\t\tthis._averageRaysCount = config.raysPerThreshold * (this._animatedThresholds.length - 1);\n\n\t\tfor (let i = 0; i < this._totalRaysCount; i++) {\n\t\t\t// Add bigger rays when exceeding the average thresholds\n\t\t\tconst big = i >= this._averageRaysCount;\n\t\t\tconst rayToUse = big ? config.bigRaySprite : config.smallRaySprite;\n\n\t\t\tlet ray: Sprite = null;\n\t\t\tray = Sprite.fromFrame(rayToUse);\n\t\t\tray.pivot.y = ray.texture.height;\n\t\t\tray.pivot.x = ray.texture.width / 2;\n\n\t\t\tthis.rays.push(ray);\n\t\t}\n\n\t\tthis.raysContainer = new Container();\n\t\tthis.raysContainer.dockAsPoint = true;\n\t\tthis.raysContainer.docking = new Docking(Docking.centerAll);\n\t\tthis.raysContainer.pivot.x = this.raysContainer.width / 2;\n\t\tthis.raysContainer.pivot.y = this.raysContainer.height / 2;\n\t\tthis.addChild(this.raysContainer);\n\n\t\tthis.fastRaysContainer = new Container();\n\t\tthis.fastRaysContainer.dockAsPoint = true;\n\t\tthis.fastRaysContainer.docking = new Docking(Docking.centerAll);\n\t\tthis.fastRaysContainer.pivot.x = this.fastRaysContainer.width / 2;\n\t\tthis.fastRaysContainer.pivot.y = this.fastRaysContainer.height / 2;\n\t\tthis.addChild(this.fastRaysContainer);\n\n\t\t// Middle sprite\n\t\tthis.middleSprite = Sprite.fromFrame(config.middleSprite);\n\t\tthis.middleSprite.docking = new Docking(Docking.centerAll);\n\t\tthis.middleSprite.pivot.x = (this.middleSprite as Sprite).texture.width / 2;\n\t\tthis.middleSprite.pivot.y = (this.middleSprite as Sprite).texture.height / 2;\n\n\t\t// Main text\n\t\tthis.amount = new TextArea(\"\", config.amountStyle);\n\t\tthis.amount.docking = new Docking(Docking.centerAll);\n\n\t\t// Sound\n\t\tconfig.sounds = config.sounds || {};\n\n\t\tif (typeof config.sounds.incrementation === \"string\") {\n\t\t\tthis._incrementationSound = Loader.get<Howl>(config.sounds.incrementation);\n\t\t} else if (config.sounds.incrementation instanceof Howl) {\n\t\t\tthis._incrementationSound = config.sounds.incrementation;\n\t\t}\n\n\t\t// Misc.\n\t\tthis.config = config;\n\n\t\tthis.dockAsPoint = true;\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * On show the result box\n\t * @param box the result box reference\n\t * @param done the callback to call when stage animation done\n\t */\n\tpublic onShow(box: ResultBox, done: (stop: boolean) => void): void {\n\t\t// find matching threshold\n\t\tlet threshold: IThresholdConfig = { amount: 0 };\n\t\tfor (const _threshold of this.config.thresholds) {\n\t\t\tconst amount = _threshold instanceof Object ? _threshold.amount : _threshold;\n\t\t\tif (box.amount.value > amount) {\n\t\t\t\tthreshold = _threshold instanceof Object ? _threshold : { amount: _threshold };\n\t\t\t}\n\t\t}\n\n\t\tif (threshold.animated !== false) {\n\t\t\tthis.showAnimated(box, done);\n\t\t} else {\n\t\t\tthis.showStatic(box, threshold, done);\n\t\t}\n\t}\n\n\tprotected showStatic(\n\t\tbox: ResultBox,\n\t\tthreshold: IThresholdConfig,\n\t\tdone: (stop: boolean) => void\n\t): void {\n\t\tthis.amount.visible = false;\n\t\tthis.amount.text = Numeral.currency(box.amount, {\n\t\t\tminimumFractionDigits: this.config.minimumFractionDigits ?? 2,\n\t\t});\n\n\t\tthis.amount.scaleXY = 1;\n\t\tthis.amount.docking.y = 75 + (this.config.amountVerticalMargin ?? 0);\n\t\tthis.amount.visible = true;\n\t\tthis.scaleXY = 1;\n\n\t\tthis.removeChild(this.middleSprite);\n\t\tthis.addChild(this.amount);\n\n\t\tconst duration = threshold.duration ?? 3;\n\n\t\tTweenUtils.wait(duration).then(() => {\n\t\t\tdone(false);\n\t\t});\n\t}\n\n\tprotected showAnimated(box: ResultBox, done: (stop: boolean) => void): void {\n\t\tif (this._incrementationSound) {\n\t\t\tthis._incrementationSound.play();\n\t\t}\n\n\t\t// Get threshold\n\t\tlet thresholdIndex = 0;\n\t\tlet currentThresholdIndex = thresholdIndex;\n\t\tlet currentThreshold = this._animatedThresholds[currentThresholdIndex];\n\n\t\t// Get indexes of rays per thersholds\n\t\tconst raysPerThreshold = this.config.raysPerThreshold;\n\t\tlet startThresholdIndex = currentThresholdIndex * raysPerThreshold;\n\t\tlet endThresholdIndex = (currentThresholdIndex + 1) * raysPerThreshold;\n\n\t\t// Set animations's duration\n\t\tlet appearTime = this.config.appearTime || 2;\n\t\tlet stayTime = this.config.stayTime || 1;\n\t\tlet disappearTime = this.config.disappearTime || 1;\n\n\t\tlet totalTime = -1;\n\t\tthis._animatedThresholds.forEach((t, index) => {\n\t\t\tconst amount = t instanceof Object ? t.amount : t;\n\t\t\tif (box.amount.value > amount) {\n\t\t\t\tthresholdIndex = index;\n\t\t\t\tappearTime = 2 + 2 * index;\n\t\t\t\tif (t instanceof Object && \"duration\" in t) {\n\t\t\t\t\ttotalTime = t.duration;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (totalTime > 0) {\n\t\t\tappearTime = totalTime - disappearTime - stayTime;\n\t\t\tif (appearTime < 3) {\n\t\t\t\tappearTime = 3;\n\t\t\t\tconst actualTotalTime = appearTime + stayTime + disappearTime;\n\t\t\t\tconst c = totalTime / actualTotalTime;\n\t\t\t\tstayTime *= c;\n\t\t\t\tdisappearTime *= c;\n\t\t\t\tappearTime *= c;\n\t\t\t}\n\t\t} else {\n\t\t\tconst actualTotalTime = appearTime + stayTime + disappearTime;\n\t\t\ttotalTime = actualTotalTime;\n\t\t}\n\n\t\tthis.amount.docking.y = this.config.amountVerticalMargin ?? 0;\n\n\t\t// Add children\n\t\tthis.middleSprite.scaleXY = 1;\n\t\tthis.amount.scaleXY = 1;\n\t\tthis.raysContainer.scaleXY = 0;\n\t\tthis.fastRaysContainer.scaleXY = 0;\n\t\tthis.raysContainer.rotation = 0;\n\t\tthis.fastRaysContainer.rotation = 0;\n\n\t\tthis.addChild(this.raysContainer);\n\t\tthis.addChild(this.fastRaysContainer);\n\t\tthis.addChild(this.middleSprite);\n\t\tthis.addChild(box.particleSystem);\n\t\tthis.addChild(this.amount);\n\n\t\t// Animate current amount (this)\n\t\tthis.currentAmount = 0;\n\n\t\tTweenMax.to(this, appearTime, {\n\t\t\tcurrentAmount: box.amount.value,\n\t\t\tonStart: () => {\n\t\t\t\t// Performances, keep canvas reference to avoid re-creating a canvas each update.\n\t\t\t\tthis.amount.keepCanvasReference = true;\n\t\t\t},\n\t\t\tonComplete: () => {\n\t\t\t\tthis.amount.keepCanvasReference = false;\n\t\t\t},\n\t\t\tonUpdate: () => {\n\t\t\t\tthis.amount.text = Numeral.currency(\n\t\t\t\t\tnew Amount({ value: this.currentAmount, currency: box.amount.currency }),\n\t\t\t\t\t{ minimumFractionDigits: this.config.minimumFractionDigits ?? 2 }\n\t\t\t\t);\n\n\t\t\t\tthis.amount.pivot.x = this.amount.width / 2;\n\t\t\t\tthis.amount.pivot.y = this.amount.height / 2;\n\n\t\t\t\tconst currentThresholdAmount =\n\t\t\t\t\tcurrentThreshold instanceof Object ? currentThreshold.amount : currentThreshold;\n\n\t\t\t\t// Add rays if current amount superior to curren threshold\n\t\t\t\tif (\n\t\t\t\t\t(currentThreshold && this.currentAmount >= currentThresholdAmount) ||\n\t\t\t\t\tcurrentThresholdIndex === 0\n\t\t\t\t) {\n\t\t\t\t\tfor (let i = startThresholdIndex; i < endThresholdIndex; i++) {\n\t\t\t\t\t\ti < this._averageRaysCount\n\t\t\t\t\t\t\t? this.fastRaysContainer.addChild(this.rays[i])\n\t\t\t\t\t\t\t: this.raysContainer.addChild(this.rays[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let i = 0; i < endThresholdIndex; i++) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(startThresholdIndex < this._averageRaysCount &&\n\t\t\t\t\t\t\t\ti < this._averageRaysCount &&\n\t\t\t\t\t\t\t\ti % (endThresholdIndex / startThresholdIndex) > 0) ||\n\t\t\t\t\t\t\ti >= this._averageRaysCount\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.rays[i].scaleXY = 0;\n\t\t\t\t\t\t\tTweenMax.to(this.rays[i], 1, {\n\t\t\t\t\t\t\t\tscaleXY: 1,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentThreshold = this._animatedThresholds[++currentThresholdIndex];\n\t\t\t\t\tstartThresholdIndex = currentThresholdIndex * raysPerThreshold;\n\t\t\t\t\tendThresholdIndex = (currentThresholdIndex + 1) * raysPerThreshold;\n\n\t\t\t\t\tlet raysRotationDelta = (Math.PI * 2) / this.fastRaysContainer.children.length;\n\t\t\t\t\tlet rotation = 0;\n\t\t\t\t\tthis.fastRaysContainer.children.forEach((child) => {\n\t\t\t\t\t\tchild.rotation = rotation;\n\t\t\t\t\t\trotation += raysRotationDelta;\n\t\t\t\t\t});\n\n\t\t\t\t\traysRotationDelta = (Math.PI * 2) / this.raysContainer.children.length;\n\t\t\t\t\trotation = 0;\n\t\t\t\t\tthis.raysContainer.children.forEach((child) => {\n\t\t\t\t\t\tchild.rotation = rotation;\n\t\t\t\t\t\trotation += raysRotationDelta;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\t// Animate \"this\" scale\n\t\tthis.scaleXY = 0;\n\n\t\tTweenMax.to(this, appearTime, {\n\t\t\tscaleXY: 1,\n\t\t\tonComplete: () => {\n\t\t\t\tbox.emit(EResultBoxEvents.StageHasEntered, this);\n\t\t\t\tbox.startParticleSystem();\n\t\t\t\tTweenMax.to(box.particleSystem, 0.5, {\n\t\t\t\t\tscaleXY: 1,\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\n\t\tTweenMax.to(this.raysContainer, appearTime, {\n\t\t\tscaleXY: 1,\n\t\t});\n\n\t\tTweenMax.to(this.fastRaysContainer, appearTime, {\n\t\t\tscaleXY: 1,\n\t\t});\n\n\t\tTweenMax.to(this.raysContainer, totalTime, {\n\t\t\trotation: Math.PI * 3,\n\t\t});\n\n\t\tTweenMax.to(this.fastRaysContainer, totalTime, {\n\t\t\trotation: Math.PI * 6,\n\t\t});\n\n\t\t// Animate middle sprite\n\t\tthis.middleSprite.rotation = 0;\n\n\t\tTweenMax.to(this.middleSprite, totalTime, {\n\t\t\tease: Back.easeInOut.config(1.7),\n\t\t\trotation: -Math.PI * 6,\n\t\t});\n\n\t\tconst disappearingComponents = [this.raysContainer, this.fastRaysContainer, this.middleSprite];\n\n\t\tif (this.config.amountDisappears) {\n\t\t\tdisappearingComponents.push(this.amount);\n\t\t}\n\n\t\t// Once done, animate ScaleXY from 1 to 0 of \"this\"\n\t\tTweenMax.to(disappearingComponents, disappearTime, {\n\t\t\tease: Back.easeIn.config(1.7),\n\t\t\tscaleXY: 0,\n\t\t\tdelay: appearTime + stayTime,\n\t\t\tonStart: () => {\n\t\t\t\tbox.emit(EResultBoxEvents.StageWillExit, this);\n\t\t\t},\n\t\t\tonComplete: () => {\n\t\t\t\tthis.removeChild(box.particleSystem);\n\n\t\t\t\tfor (let i = this.raysContainer.children.length - 1; i >= 0; i--) {\n\t\t\t\t\tthis.raysContainer.removeChild(this.raysContainer.children[i]);\n\t\t\t\t}\n\t\t\t\tfor (let i = this.fastRaysContainer.children.length - 1; i >= 0; i--) {\n\t\t\t\t\tthis.fastRaysContainer.removeChild(this.fastRaysContainer.children[i]);\n\t\t\t\t}\n\n\t\t\t\tdone(box.amount.value <= 0);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Hide the stage\n\t * @param progressive: If true, stage is hidden in 0.3s, otherwise in 0s.\n\t */\n\tpublic onHide(progressive: boolean): Promise<void> {\n\t\tif (this.config.amountDisappears === false) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\treturn super.onHide(progressive);\n\t}\n\n\t/**\n\t * Hide the stage immediatly\n\t */\n\tpublic hide(): void {\n\t\tsuper.hide();\n\t\tthis.amount.text = \"\";\n\t}\n}\n","export { ResultBox, IDefaultResultBoxStyle, EResultBoxEvents } from \"./resultBox\";\nexport { ResultStage } from \"./resultStage\";\nexport { ScratchStage, IScratchResultStyle } from \"./scratchStage\";\n\nexport {\n\tTextResultStage,\n\tITextResultStyle,\n\tITextResultLooser,\n\tITextResultSounds,\n\tITextResultThreshold,\n} from \"./textResultStage\";\nexport { AmountResultStage, IAmountResultStyle } from \"./amountResultStage\";\n","import { TweenMax } from \"gsap\";\nimport { Container, particles, Sprite } from \"pixi.js\";\nimport * as i18n from \"i18next\";\nimport { Docking, DockingBounds, ContainerExporter, ContainerImporter } from \"@gdk/core-pixi\";\nimport { Amount, Tools } from \"@gdk/core\";\nimport type { IStyles, SpineTimeline, TextField, IProjectContainer } from \"@gdk/core-pixi\";\nimport type { IAmount } from \"@gdk/core\";\nimport type { Howl } from \"howler\";\n\nimport { TextResultStage } from \"./textResultStage\";\nimport { AmountResultStage } from \"./amountResultStage\";\nimport type { IScratchResultStyle } from \"./scratchStage\";\nimport { ScratchStage } from \"./scratchStage\";\nimport type { IAmountCoinWizzStyle } from \"./amountCoinWizzStage\";\nimport { AmountCoinWizzStage } from \"./amountCoinWizzStage\";\nimport type { IAmountCurrencyWizzStyle } from \"./amountCurrencyWizzStage\";\nimport { AmountCurrencyWizzStage } from \"./amountCurrencyWizzStage\";\nimport type { ISpineStageStyle } from \"./spineStage\";\nimport { SpineStage } from \"./spineStage\";\nimport type { AbstractGame } from \"../../abstractGame\";\nimport type { IAmountResultStyle } from \"./amountResultStage\";\nimport type { ITextResultStyle } from \"./textResultStage\";\n\nexport enum EResultBoxEvents {\n\tStageAppear = \"StageAppear\",\n\tStageDisappear = \"StageDisappear\",\n\tStageHasEntered = \"StageHasEntered\",\n\tStageWillExit = \"StageWillExit\",\n}\n\nexport interface IDefaultResultBoxStyle {\n\ttextStyles: {\n\t\tmainTextWinner: Sprite | IStyles;\n\t\tsubText1Winner: Sprite | IStyles;\n\n\t\tmainTextLooser: Sprite | IStyles;\n\t\tsubText1Looser: Sprite | IStyles;\n\t\tsubText2Looser: Sprite | IStyles;\n\t};\n\twinAmountTextStyle: IStyles;\n\tdisappears?: boolean;\n\tamountDisappears?: boolean;\n\tamountVerticalMargin?: number;\n\tthresholds?: Array<{\n\t\tmainText?: string;\n\t\tsubText?: string;\n\t\tduration?: number;\n\t\tanimated?: boolean;\n\t\tmultiplier?: number;\n\t}>;\n\tthresholdsTexts?: Array<\n\t\tPartial<{\n\t\t\tmainText: string;\n\t\t\tsubText: string;\n\t\t}>\n\t>;\n\tlooserTexts?: Partial<{\n\t\tmainText: string;\n\t\tsubText1: string;\n\t\tsubText2: string;\n\t}>;\n\tsounds?: {\n\t\tloser?: string | Howl;\n\t\twinner?: string | Howl;\n\t\tincrementation?: string | Howl;\n\t};\n\tbackgroundScratch?: {\n\t\tloser?: string;\n\t\twinner?: string;\n\t};\n\tparticleSystems?: IParticleSystemStyle;\n\tminimumFractionDigits?: number;\n\tlooserDuration?: number;\n}\n\ninterface IParticleSystemStyle {\n\tcount: number;\n\tsprites?: string[];\n\talpha: boolean;\n\tposition: boolean;\n\tscale: boolean;\n}\n\nexport interface IWizzResultBoxStyle {\n\tgame: AbstractGame;\n\twinAmountTextStyle: IStyles;\n\tsounds?: {\n\t\tloser?: string | Howl;\n\t\twinner?: string | Howl;\n\t\tincrementation?: string | Howl;\n\t};\n\thasCoinsAnimation?: boolean;\n\tanimationSpine?: {\n\t\tassetIDWinner?: string;\n\t\tassetIDLoser?: string;\n\t\tassetIDCoins?: string;\n\t};\n\tminimumFractionDigits?: number;\n\tloserDuration?: number;\n\twinnerDuration?: number;\n}\n\nexport interface IWizzCurrencyResultBoxStyle {\n\tgame: AbstractGame;\n\twinAmountTextStyle: IStyles;\n\twinAmountStrokeTextStyle: IStyles;\n\tsounds?: {\n\t\tloser?: string | Howl;\n\t\twinner?: string | Howl;\n\t\tincrementation?: string | Howl;\n\t};\n\thasCoinsAnimation?: boolean;\n\tanimationSpine?: {\n\t\tassetIDLoser?: string | SpineTimeline;\n\t\tassetIDRollingFX?: string | SpineTimeline;\n\t};\n\tsprites?: {\n\t\tcurrencyBackSprite?: Sprite;\n\t\tcurrencyMovingSprite?: Sprite;\n\t\twinTextSprite?: Sprite;\n\t};\n\tminimumFractionDigits?: number;\n}\n\nexport interface IDefaultSpineResultBoxStyle {\n\tthresholdsTexts: Array<{\n\t\tmainText: string;\n\t\tsubText: string;\n\t}>;\n\n\tlooserTexts: {\n\t\tmainText: string;\n\t\tsubText: string;\n\t};\n\n\twinMainText?: TextField;\n\twinSubText?: TextField;\n\twinAmountText?: TextField;\n\n\tloseMainText?: TextField;\n\tloseSubText?: TextField;\n\n\tthresholdsWinAmount?: number[];\n\n\twinSpineTimeline: SpineTimeline;\n\tloseSpineTimeline: SpineTimeline;\n\n\twinEnterAnimationName?: string;\n\twinExitAnimationName?: string;\n\n\tloseEnterAnimationName?: string;\n\tloseExitAnimationName?: string;\n\n\twinnerDuration?: number;\n\tloserDuration?: number;\n}\n\nexport interface IProjectResulBox extends IProjectContainer {\n\tresultBox: {\n\t\tparticleSystems?: IParticleSystemStyle;\n\t\tstages: {\n\t\t\ttype: string;\n\t\t\tconfig:\n\t\t\t\t| IAmountCoinWizzStyle\n\t\t\t\t| IAmountCurrencyWizzStyle\n\t\t\t\t| IAmountResultStyle\n\t\t\t\t| IScratchResultStyle\n\t\t\t\t| ISpineStageStyle\n\t\t\t\t| ITextResultStyle;\n\t\t}[];\n\t};\n}\n\nexport type Stage =\n\t| AmountCoinWizzStage\n\t| AmountCurrencyWizzStage\n\t| AmountResultStage\n\t| ScratchStage\n\t| SpineStage\n\t| TextResultStage;\n\nexport class ResultBox extends Container {\n\t// Public members\n\tpublic particleSystem: particles.ParticleContainer = null;\n\n\tprotected particleSystemConfig: IParticleSystemStyle;\n\tpublic onNext: (stage: Stage) => void;\n\n\t// Protected members\n\tprotected _amount: IAmount = null;\n\tprotected _stages: Stage[] = [];\n\n\tprotected _currentStage: Stage = null;\n\tprotected particleTweens: TweenMax[] = [];\n\n\t/**\n\t * Constructor\n\t * @param config the result box config (style)\n\t */\n\tpublic constructor() {\n\t\t// PIXI.Container\n\t\tsuper();\n\n\t\t// Misc.\n\t\tthis.docking = new Docking(Docking.centerAll);\n\t\tthis.dockingBounds = new DockingBounds(1, 1); // A point\n\t}\n\n\t/**\n\t * Returns the available stages (only get)\n\t */\n\tpublic get stages(): Stage[] {\n\t\treturn this._stages;\n\t}\n\n\t/**\n\t * Returns the current amount won by the player\n\t */\n\tpublic get amount(): IAmount {\n\t\treturn this._amount;\n\t}\n\n\t/**\n\t * Animates the result box (automatically send the\n\t * matching tracking event)\n\t */\n\tpublic animate(amount: IAmount, done: () => void): void {\n\t\tthis._currentStage = this.stages[0];\n\t\tthis._amount = amount;\n\n\t\tfor (const stage of this.stages) {\n\t\t\tstage.hide();\n\t\t}\n\n\t\tthis.next(() => {\n\t\t\tif (this.particleSystem) {\n\t\t\t\tthis.removeChild(this.particleSystem);\n\t\t\t}\n\n\t\t\tthis._amount = null;\n\t\t\tdone();\n\t\t});\n\t}\n\n\t/**\n\t * Goes to the next stage\n\t */\n\tpublic next(done?: () => void): void {\n\t\tconst index = this._stages.indexOf(this._currentStage);\n\n\t\tthis._currentStage.visible = true;\n\t\tthis.emit(EResultBoxEvents.StageAppear, this._currentStage);\n\n\t\tthis._currentStage.onShow(this, (stop: boolean, hide: boolean = true) => {\n\t\t\tif (hide) {\n\t\t\t\tconst progressive = index === this._stages.length - 1;\n\t\t\t\tfor (const stage of this.stages) {\n\t\t\t\t\tstage.onHide(progressive);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.emit(EResultBoxEvents.StageDisappear, this._currentStage);\n\n\t\t\tif (index + 1 >= this._stages.length || stop) {\n\t\t\t\tthis._currentStage = this._stages[0];\n\t\t\t\tdone();\n\t\t\t} else {\n\t\t\t\tthis._currentStage = this._stages[index + 1];\n\t\t\t\tthis.next(done);\n\t\t\t}\n\t\t});\n\n\t\tif (this.onNext) {\n\t\t\tthis.onNext(this._currentStage);\n\t\t}\n\t}\n\n\t/**\n\t * Add a stage to the result box\n\t * @param stage the stage to add\n\t */\n\tpublic addStage(stage: Stage, index?: number): void {\n\t\tif (!this._currentStage) {\n\t\t\tthis._currentStage = stage;\n\t\t}\n\n\t\tif (index === undefined) {\n\t\t\tthis._stages.push(stage);\n\t\t} else {\n\t\t\tthis._stages.splice(index, 0, stage);\n\t\t}\n\n\t\tthis.addChild(stage);\n\t}\n\n\t/**\n\t * Removes a stage from the result box\n\t * @param stage the stage reference to remove\n\t */\n\tpublic removeStage(stage: Stage): void {\n\t\tthis.removeChild(stage);\n\n\t\tconst index = this._stages.indexOf(stage);\n\t\tif (index !== -1) {\n\t\t\tthis._stages.splice(index, 1);\n\t\t}\n\t}\n\n\t/**\n\t * Creates particles globally applied on the result box\n\t */\n\tpublic createParticles(\n\t\tsize: number = 100,\n\t\tparticleSprites: string[],\n\t\tproperties: particles.ParticleContainerProperties\n\t): void {\n\t\tthis.particleSystem = new particles.ParticleContainer(size, properties);\n\t\tthis.particleSystem.docking = new Docking(Docking.centerAll);\n\n\t\t// Add particles\n\t\tfor (let i = 0; i < size - 1; i++) {\n\t\t\tconst index = (Math.random() * particleSprites.length) >> 0;\n\t\t\tconst p = Sprite.fromFrame(particleSprites[index]);\n\t\t\tthis.particleSystem.addChild(p);\n\t\t}\n\n\t\tthis.particleSystemConfig = {\n\t\t\tcount: size,\n\t\t\tsprites: particleSprites,\n\t\t\talpha: properties.alpha,\n\t\t\tscale: properties.scale,\n\t\t\tposition: properties.position,\n\t\t};\n\t}\n\n\t/**\n\t * Starts the particle system\n\t */\n\tpublic startParticleSystem(deltaTime: number = 37): void {\n\t\tthis.particleSystem.visible = true;\n\n\t\tthis.particleTweens.forEach((t) => t.kill());\n\t\tthis.particleTweens = [];\n\n\t\t// Start animations\n\t\tthis.particleSystem.children.forEach((p: Sprite, index: number) => {\n\t\t\tp.scaleXY = 0.5;\n\t\t\tp.x = p.y = p.alpha = 0;\n\n\t\t\tconst cos = Math.cos(Math.PI * 2 * Math.random());\n\t\t\tconst sin = Math.sin(Math.PI * 2 * Math.random());\n\n\t\t\tconst tween = TweenMax.to(p, 1, {\n\t\t\t\tdelay: (deltaTime * index) / 1000,\n\t\t\t\tx: screen.width * cos,\n\t\t\t\ty: screen.height * sin,\n\t\t\t\tscaleXY: 1 + Math.random(),\n\t\t\t\tonStart: () => {\n\t\t\t\t\tp.alpha = 1;\n\n\t\t\t\t\ttween.updateTo({\n\t\t\t\t\t\talpha: 0,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.particleTweens.push(tween);\n\t\t});\n\t}\n\n\t/**\n\t * Returns a result box following the wizz guidelines for game giving coins\n\t */\n\tpublic static createCoinWizz(\n\t\tconfig: IWizzResultBoxStyle,\n\t\tstake: IAmount = Amount.fromNumber(100)\n\t): ResultBox {\n\t\tconst result = new ResultBox();\n\n\t\tresult.addStage(\n\t\t\tnew AmountCoinWizzStage({\n\t\t\t\tgame: config.game,\n\t\t\t\tamountStyle: config.winAmountTextStyle,\n\t\t\t\thasCoinsAnimation: config.hasCoinsAnimation || true,\n\t\t\t\tsounds: {\n\t\t\t\t\tloser: (config.sounds && config.sounds.loser) || null,\n\t\t\t\t\twinner: (config.sounds && config.sounds.winner) || null,\n\t\t\t\t\tincrementation: (config.sounds && config.sounds.incrementation) || null,\n\t\t\t\t},\n\t\t\t\tanimationSpine: {\n\t\t\t\t\tloser: (config.animationSpine && config.animationSpine.assetIDLoser) || null,\n\t\t\t\t\twinner: (config.animationSpine && config.animationSpine.assetIDWinner) || null,\n\t\t\t\t\tcoin: (config.animationSpine && config.animationSpine.assetIDCoins) || null,\n\t\t\t\t},\n\t\t\t\tloserDuration: config.loserDuration,\n\t\t\t\twinnerDuration: config.winnerDuration,\n\t\t\t})\n\t\t);\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a result box following the wizz guidelines for game giving true currency\n\t */\n\tpublic static createCurrencyWizz(\n\t\tconfig: IWizzCurrencyResultBoxStyle,\n\t\tstake: IAmount = Amount.fromNumber(100)\n\t): ResultBox {\n\t\tconst result = new ResultBox();\n\n\t\tresult.addStage(\n\t\t\tnew AmountCurrencyWizzStage({\n\t\t\t\tgame: config.game,\n\t\t\t\tamountStyle: config.winAmountTextStyle,\n\t\t\t\tamountStrokeStyle: config.winAmountStrokeTextStyle,\n\t\t\t\thasCoinsAnimation: config.hasCoinsAnimation || true,\n\t\t\t\tsounds: {\n\t\t\t\t\tloser: (config.sounds && config.sounds.loser) || null,\n\t\t\t\t\twinner: (config.sounds && config.sounds.winner) || null,\n\t\t\t\t},\n\t\t\t\tanimationSpine: {\n\t\t\t\t\tloser: (config.animationSpine && config.animationSpine.assetIDLoser) || null,\n\t\t\t\t\trollingFX: (config.animationSpine && config.animationSpine.assetIDRollingFX) || null,\n\t\t\t\t},\n\t\t\t\tsprites: {\n\t\t\t\t\twinTextSprite: (config.sprites && config.sprites.winTextSprite) || null,\n\t\t\t\t\tcurrencyBackSprite: (config.sprites && config.sprites.currencyBackSprite) || null,\n\t\t\t\t\tcurrencyMovingSprite: (config.sprites && config.sprites.currencyMovingSprite) || null,\n\t\t\t\t},\n\t\t\t\tminimumFractionDigits: config.minimumFractionDigits,\n\t\t\t})\n\t\t);\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a default result box following the Illiko guidelines\n\t */\n\tpublic static createDefault(\n\t\tconfig: IDefaultResultBoxStyle,\n\t\tstake: IAmount = Amount.fromNumber(100)\n\t): ResultBox {\n\t\tconst result = new ResultBox();\n\n\t\t// Particle systems\n\t\tconfig.particleSystems = config.particleSystems || {\n\t\t\tcount: 200,\n\t\t\talpha: true,\n\t\t\tposition: true,\n\t\t\tscale: true,\n\t\t\tsprites: [\"sp_particule_00.png\", \"sp_particule_01.png\", \"sp_particule_02.png\"],\n\t\t};\n\n\t\tresult.createParticles(\n\t\t\tconfig.particleSystems.count,\n\t\t\tconfig.particleSystems.sprites ?? [\n\t\t\t\t\"sp_particule_00.png\",\n\t\t\t\t\"sp_particule_01.png\",\n\t\t\t\t\"sp_particule_02.png\",\n\t\t\t],\n\t\t\t{\n\t\t\t\talpha: config.particleSystems.alpha,\n\t\t\t\tposition: config.particleSystems.position,\n\t\t\t\tscale: config.particleSystems.scale,\n\t\t\t}\n\t\t);\n\n\t\tconst thresholdsTexts = config.thresholdsTexts ?? [];\n\t\tconst looserTexts = config.looserTexts ?? {};\n\n\t\tconst textResultConfig: ITextResultStyle = {\n\t\t\tmainTextWinner: config.textStyles.mainTextWinner,\n\t\t\tsubText1Winner: config.textStyles.subText1Winner,\n\t\t\tmainTextLooser: config.textStyles.mainTextLooser,\n\t\t\tsubText1Looser: config.textStyles.subText1Looser,\n\t\t\tsubText2Looser: config.textStyles.subText2Looser,\n\t\t\twinningThresholds: [\n\t\t\t\t{\n\t\t\t\t\tamount: Number(stake.value),\n\t\t\t\t\tmainText: thresholdsTexts[0]?.mainText ?? i18n.t(\"result.winner1\"),\n\t\t\t\t\tsubText1: thresholdsTexts[0]?.subText ?? i18n.t(\"result.winnerSubText\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tamount: 10 * stake.value,\n\t\t\t\t\tmainText: thresholdsTexts[1]?.mainText ?? i18n.t(\"result.winner2\"),\n\t\t\t\t\tsubText1: thresholdsTexts[1]?.subText ?? i18n.t(\"result.winnerSubText\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tamount: 49 * stake.value,\n\t\t\t\t\tmainText: thresholdsTexts[2]?.mainText ?? i18n.t(\"result.winner3\"),\n\t\t\t\t\tsubText1: thresholdsTexts[2]?.subText ?? i18n.t(\"result.winnerSubText\"),\n\t\t\t\t},\n\t\t\t],\n\t\t\tlooserTexts: {\n\t\t\t\tdisappears: config.amountDisappears ?? true,\n\t\t\t\tmainText: looserTexts.mainText ?? i18n.t(\"result.looser1\"),\n\t\t\t\tsubText1: looserTexts.subText1 ?? i18n.t(\"result.looser2\"),\n\t\t\t\tsubText2: looserTexts.subText2 ?? i18n.t(\"result.looser3\"),\n\t\t\t},\n\t\t\tsounds: {\n\t\t\t\tloser: (config.sounds && config.sounds.loser) || null,\n\t\t\t\twinner: (config.sounds && config.sounds.winner) || null,\n\t\t\t},\n\t\t\tlooserDuration: config.looserDuration ?? 3,\n\t\t};\n\n\t\tconst amountResultConfig: IAmountResultStyle = {\n\t\t\tamountDisappears: config.amountDisappears ?? true,\n\t\t\tamountVerticalMargin: config.amountVerticalMargin,\n\t\t\tsmallRaySprite: \"sp_layon_s.png\",\n\t\t\tbigRaySprite: \"sp_layon_b.png\",\n\t\t\tmiddleSprite: \"sp_effect_win.png\",\n\t\t\tamountStyle: config.winAmountTextStyle,\n\t\t\traysPerThreshold: 6,\n\t\t\tthresholds: [Number(stake.value), 10 * stake.value, 50 * stake.value],\n\t\t\tsounds: {\n\t\t\t\tincrementation: (config.sounds && config.sounds.incrementation) || null,\n\t\t\t},\n\t\t\tminimumFractionDigits: config.minimumFractionDigits,\n\t\t};\n\n\t\tif (config.thresholds !== undefined) {\n\t\t\ttextResultConfig.winningThresholds = config.thresholds.map((c, i) => ({\n\t\t\t\tamount: (c.multiplier ?? 0) * stake.value,\n\t\t\t\tmainText: thresholdsTexts[i]?.mainText ?? i18n.t(`result.winner${i}`),\n\t\t\t\tsubText1: thresholdsTexts[i]?.subText ?? i18n.t(`result.winnerSubText`),\n\t\t\t\tanimated: c.animated ?? true,\n\t\t\t\tduration: 2,\n\t\t\t}));\n\t\t\tamountResultConfig.thresholds = config.thresholds.map((c) => ({\n\t\t\t\tamount: c.multiplier * stake.value,\n\t\t\t\tanimated: c.animated ?? true,\n\t\t\t\tduration: c.animated ? (c.duration ?? 3) - 2 : c.duration ?? 3,\n\t\t\t}));\n\t\t}\n\n\t\t// Stages\n\t\tresult.addStage(new TextResultStage(textResultConfig));\n\t\tresult.addStage(new AmountResultStage(amountResultConfig));\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a result box containing a popup used for scratch games\n\t */\n\tpublic static createDefaultScratch(\n\t\tconfig: IDefaultResultBoxStyle,\n\t\tstake: IAmount = Amount.fromNumber(100)\n\t): ResultBox {\n\t\tconst result = new ResultBox();\n\n\t\tconst thresholdsTexts = config.thresholdsTexts ?? [];\n\t\tconst looserTexts = config.looserTexts ?? {};\n\n\t\tconst scratchConfig = {\n\t\t\tdisappears: config.disappears ?? true,\n\t\t\tmainTextWinner: config.textStyles.mainTextWinner,\n\t\t\tsubText1Winner: config.textStyles.subText1Winner,\n\t\t\tmainTextLooser: config.textStyles.mainTextLooser,\n\t\t\tsubText1Looser: config.textStyles.subText1Looser,\n\t\t\tsubText2Looser: config.textStyles.subText2Looser,\n\t\t\twinningThresholds: [\n\t\t\t\t{\n\t\t\t\t\tamount: Number(stake.value),\n\t\t\t\t\tmainText: thresholdsTexts[0]?.mainText ?? i18n.t(\"result.winner1\"),\n\t\t\t\t\tsubText1: thresholdsTexts[0]?.subText ?? i18n.t(\"result.winnerSubText\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tamount: 10 * stake.value,\n\t\t\t\t\tmainText: thresholdsTexts[1]?.mainText ?? i18n.t(\"result.winner2\"),\n\t\t\t\t\tsubText1: thresholdsTexts[1]?.subText ?? i18n.t(\"result.winnerSubText\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tamount: 49 * stake.value,\n\t\t\t\t\tmainText: thresholdsTexts[2]?.mainText ?? i18n.t(\"result.winner3\"),\n\t\t\t\t\tsubText1: thresholdsTexts[2]?.subText ?? i18n.t(\"result.winnerSubText\"),\n\t\t\t\t},\n\t\t\t],\n\t\t\tamountStyle: config.winAmountTextStyle,\n\t\t\tlooserTexts: {\n\t\t\t\tmainText: looserTexts.mainText ?? i18n.t(\"result.looser1\"),\n\t\t\t\tsubText1: looserTexts.subText1 ?? i18n.t(\"result.looser2\"),\n\t\t\t\tsubText2: looserTexts.subText2 ?? i18n.t(\"result.looser3\"),\n\t\t\t},\n\t\t\tsounds: {\n\t\t\t\tloser: (config.sounds && config.sounds.loser) || null,\n\t\t\t\twinner: (config.sounds && config.sounds.winner) || null,\n\t\t\t},\n\t\t\tbackgroundTexture: config.backgroundScratch,\n\t\t\tminimumFractionDigits: config.minimumFractionDigits,\n\t\t};\n\n\t\tif (config.thresholds !== undefined) {\n\t\t\tscratchConfig.winningThresholds = config.thresholds.map((c, i) => ({\n\t\t\t\tamount: (c.multiplier ?? 0) * stake.value,\n\t\t\t\tmainText: thresholdsTexts[i]?.mainText ?? i18n.t(`result.winner${i}`),\n\t\t\t\tsubText1: thresholdsTexts[i]?.subText ?? i18n.t(`result.winnerSubText`),\n\t\t\t\tduration: c.duration ?? 3.4,\n\t\t\t}));\n\t\t}\n\n\t\tresult.addStage(new ScratchStage(scratchConfig));\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a result box containing spines used for games using spines\n\t */\n\tpublic static createDefaultSpine(\n\t\tconfig: IDefaultSpineResultBoxStyle,\n\t\tstake: IAmount = Amount.fromNumber(100)\n\t): ResultBox {\n\t\tconst result = new ResultBox();\n\n\t\tresult.addStage(\n\t\t\tnew SpineStage({\n\t\t\t\tthresholdsWinAmount: [Number(stake.value), 10 * stake.value, 49 * stake.value],\n\t\t\t\twinnerDuration: 5,\n\t\t\t\tloserDuration: 5,\n\t\t\t\twinEnterAnimationName: \"enter\",\n\t\t\t\tloseEnterAnimationName: \"enter\",\n\t\t\t\twinExitAnimationName: \"exit\",\n\t\t\t\tloseExitAnimationName: \"exit\",\n\t\t\t\twinMainText: config.winMainText\n\t\t\t\t\t? config.winMainText\n\t\t\t\t\t: config.winSpineTimeline\n\t\t\t\t\t\t\t.getSlotContainerByName(\"label_title\")\n\t\t\t\t\t\t\t.getChildByName<TextField>(\"label\"),\n\t\t\t\twinSubText: config.winSubText\n\t\t\t\t\t? config.winSubText\n\t\t\t\t\t: config.winSpineTimeline\n\t\t\t\t\t\t\t.getSlotContainerByName(\"label_text\")\n\t\t\t\t\t\t\t.getChildByName<TextField>(\"label\"),\n\t\t\t\twinAmountText: config.winAmountText\n\t\t\t\t\t? config.winAmountText\n\t\t\t\t\t: config.winSpineTimeline\n\t\t\t\t\t\t\t.getSlotContainerByName(\"label_amount\")\n\t\t\t\t\t\t\t.getChildByName<TextField>(\"label\"),\n\t\t\t\tloseMainText: config.loseMainText\n\t\t\t\t\t? config.loseMainText\n\t\t\t\t\t: config.loseSpineTimeline\n\t\t\t\t\t\t\t.getSlotContainerByName(\"label_title\")\n\t\t\t\t\t\t\t.getChildByName<TextField>(\"label\"),\n\t\t\t\tloseSubText: config.loseSubText\n\t\t\t\t\t? config.loseSubText\n\t\t\t\t\t: config.loseSpineTimeline\n\t\t\t\t\t\t\t.getSlotContainerByName(\"label_text\")\n\t\t\t\t\t\t\t.getChildByName<TextField>(\"label\"),\n\t\t\t\t...config,\n\t\t\t})\n\t\t);\n\n\t\treturn result;\n\t}\n\n\tpublic export(): IProjectResulBox {\n\t\treturn Tools.assign(ContainerExporter.exportContainer(this, true), {\n\t\t\ttype: \"result.ResultBox\",\n\t\t\tresultBox: {\n\t\t\t\t...(this.particleSystem !== null && { particleSystems: this.particleSystemConfig }),\n\t\t\t\tstages: this.stages.map((stage) => {\n\t\t\t\t\tlet type: string | undefined;\n\t\t\t\t\tif (stage instanceof AmountCoinWizzStage) {\n\t\t\t\t\t\ttype = AmountCoinWizzStage.name;\n\t\t\t\t\t} else if (stage instanceof AmountCurrencyWizzStage) {\n\t\t\t\t\t\ttype = AmountCurrencyWizzStage.name;\n\t\t\t\t\t} else if (stage instanceof AmountResultStage) {\n\t\t\t\t\t\ttype = AmountResultStage.name;\n\t\t\t\t\t} else if (stage instanceof ScratchStage) {\n\t\t\t\t\t\ttype = ScratchStage.name;\n\t\t\t\t\t} else if (stage instanceof SpineStage) {\n\t\t\t\t\t\ttype = SpineStage.name;\n\t\t\t\t\t} else if (stage instanceof TextResultStage) {\n\t\t\t\t\t\ttype = TextResultStage.name;\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tconfig: stage.config,\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic static parse(config: IProjectResulBox, baseUrl: string): ResultBox {\n\t\tlet resultBox = new ResultBox();\n\t\tconst particleSystemConfig = config.resultBox.particleSystems;\n\t\tif (particleSystemConfig !== undefined) {\n\t\t\tresultBox.createParticles(particleSystemConfig.count, particleSystemConfig.sprites, {\n\t\t\t\talpha: particleSystemConfig.alpha,\n\t\t\t\tscale: particleSystemConfig.scale,\n\t\t\t\tposition: particleSystemConfig.position,\n\t\t\t});\n\t\t}\n\t\tfor (const stage of config.resultBox.stages) {\n\t\t\tswitch (stage.type) {\n\t\t\t\tcase AmountCoinWizzStage.name:\n\t\t\t\t\tresultBox.addStage(new AmountCoinWizzStage(stage.config as IAmountCoinWizzStyle));\n\t\t\t\t\tbreak;\n\t\t\t\tcase AmountCurrencyWizzStage.name:\n\t\t\t\t\tresultBox.addStage(new AmountCurrencyWizzStage(stage.config as IAmountCurrencyWizzStyle));\n\t\t\t\t\tbreak;\n\t\t\t\tcase AmountResultStage.name:\n\t\t\t\t\tresultBox.addStage(new AmountResultStage(stage.config as IAmountResultStyle));\n\t\t\t\t\tbreak;\n\t\t\t\tcase ScratchStage.name:\n\t\t\t\t\tresultBox.addStage(new ScratchStage(stage.config as IScratchResultStyle));\n\t\t\t\t\tbreak;\n\t\t\t\tcase SpineStage.name:\n\t\t\t\t\tresultBox.addStage(new SpineStage(stage.config as ISpineStageStyle));\n\t\t\t\t\tbreak;\n\t\t\t\tcase TextResultStage.name:\n\t\t\t\t\tresultBox.addStage(new TextResultStage(stage.config as ITextResultStyle));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tresultBox = ContainerImporter.importContainer<ResultBox>(config, baseUrl, resultBox);\n\t\treturn resultBox;\n\t}\n}\n","import { Container } from \"pixi.js\";\nimport { TweenMax } from \"gsap\";\n\nimport type { ResultBox } from \"./resultBox\";\n\nexport abstract class ResultStage extends Container {\n\t/**\n\t * Show the stage\n\t * @param done The callback to call when animation done\n\t */\n\tpublic abstract onShow(box: ResultBox, done: (stop: boolean, hide?: boolean) => void): void;\n\n\t/**\n\t * Hide the stage\n\t * @param progressive: If true, stage is hidden in 0.3s, otherwise in 0s.\n\t */\n\tpublic onHide(progressive: boolean): Promise<void> {\n\t\tif (!progressive) {\n\t\t\tthis.hide();\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve) => {\n\t\t\tTweenMax.to(this, 0.3, {\n\t\t\t\talpha: 0,\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tthis.hide();\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Hide the stage immediatly\n\t */\n\tpublic hide(): void {\n\t\tthis.visible = false;\n\t\tthis.alpha = 1;\n\t}\n}\n","import { Container, Sprite } from \"pixi.js\";\nimport { TextArea, Docking, DockingBounds } from \"@gdk/core-pixi\";\nimport { Loader, Numeral, Amount } from \"@gdk/core\";\nimport { TweenMax, Back } from \"gsap\";\nimport { Howl } from \"howler\";\nimport type { IStyles } from \"@gdk/core-pixi\";\n\nimport { ResultStage } from \"./resultStage\";\nimport { EResultBoxEvents } from \"./resultBox\";\nimport type { ResultBox } from \"./resultBox\";\nimport type { ITextResultThreshold, ITextResultLooser, ITextResultSounds } from \"./textResultStage\";\n\nexport interface IScratchResultStyle {\n\tbackgroundTexture?: {\n\t\tloser?: string;\n\t\twinner?: string;\n\t};\n\n\tdisappears?: boolean;\n\n\tmainTextWinner: Container | IStyles;\n\tsubText1Winner: Container | IStyles;\n\n\tmainTextLooser: Container | IStyles;\n\tsubText1Looser: Container | IStyles;\n\tsubText2Looser: Container | IStyles;\n\n\tamountStyle?: IStyles;\n\n\twinningThresholds: ITextResultThreshold[];\n\tlooserTexts: ITextResultLooser;\n\tlooserDuration?: number;\n\n\tsounds?: ITextResultSounds;\n\tminimumFractionDigits?: number;\n}\nexport class ScratchStage extends ResultStage {\n\t// Public members\n\tpublic mainText: Container | TextArea;\n\tpublic subText1: Container | TextArea;\n\tpublic subText2: Container | TextArea;\n\n\tpublic config: IScratchResultStyle;\n\n\tpublic background: Sprite;\n\tprivate _amount: TextArea;\n\n\tprivate _loseSound: Howl;\n\tprivate _winSound: Howl;\n\n\tpublic constructor(config: IScratchResultStyle) {\n\t\tsuper();\n\n\t\t// Get texture from config or set default texture\n\t\tconst backgroundTexture: string = config.backgroundTexture.winner || \"sp_popup_fin_00.png\";\n\t\tthis.background = Sprite.fromFrame(backgroundTexture);\n\n\t\t// Main text\n\t\tif (config.mainTextLooser instanceof Container) {\n\t\t\tthis.mainText = config.mainTextLooser;\n\t\t} else {\n\t\t\tthis.mainText = new TextArea(\"\", config.mainTextLooser);\n\t\t\tthis.mainText.docking = new Docking(Docking.centerAll);\n\t\t}\n\n\t\t// Sub text 1\n\t\tif (config.subText1Looser instanceof Container) {\n\t\t\tthis.subText1 = config.subText1Looser;\n\t\t} else {\n\t\t\tthis.subText1 = new TextArea(\"\", config.subText1Looser);\n\t\t\tthis.subText1.docking = new Docking(Docking.centerAll);\n\t\t}\n\n\t\t// Sub text 2\n\t\tif (config.subText2Looser instanceof Container) {\n\t\t\tthis.subText2 = config.subText2Looser;\n\t\t} else {\n\t\t\tthis.subText2 = new TextArea(\"\", config.subText2Looser);\n\t\t\tthis.subText2.docking = new Docking(Docking.centerAll);\n\t\t}\n\n\t\t// Amount\n\t\tthis._amount = new TextArea(\"\", config.amountStyle);\n\t\tthis._amount.docking = new Docking(Docking.centerAll);\n\n\t\t// Sounds\n\t\tconfig.sounds = config.sounds || {};\n\n\t\tif (typeof config.sounds.loser === \"string\") {\n\t\t\tthis._loseSound = Loader.get<Howl>(config.sounds.loser);\n\t\t} else if (config.sounds.loser instanceof Howl) {\n\t\t\tthis._loseSound = config.sounds.loser;\n\t\t}\n\n\t\tif (typeof config.sounds.winner === \"string\") {\n\t\t\tthis._winSound = Loader.get<Howl>(config.sounds.winner);\n\t\t} else if (config.sounds.winner instanceof Howl) {\n\t\t\tthis._winSound = config.sounds.winner;\n\t\t}\n\n\t\t// Misc.\n\t\tthis.config = config;\n\n\t\tthis.docking = new Docking(Docking.centerAll);\n\t\tthis.dockingBounds = new DockingBounds(this.background.width, this.background.height);\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * onShow\n\t * @param box\n\t * @param done\n\t */\n\tpublic onShow(box: ResultBox, done: (stop: boolean) => void): void {\n\t\tlet duration = 3.4;\n\n\t\tif (box.amount.value === 0) {\n\t\t\t// Looser\n\t\t\tthis.subText2.visible = true;\n\t\t\tthis._amount.visible = false;\n\n\t\t\tif (this.config.backgroundTexture.loser) {\n\t\t\t\tthis.background = Sprite.fromFrame(this.config.backgroundTexture.loser);\n\t\t\t\tthis.background.docking = new Docking(Docking.centerAll);\n\t\t\t}\n\n\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\tthis.mainText.text = this.config.looserTexts.mainText;\n\t\t\t\tthis.mainText.styles = this.config.mainTextLooser as IStyles;\n\t\t\t}\n\n\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\tthis.subText1.text = this.config.looserTexts.subText1;\n\t\t\t\tthis.subText1.styles = this.config.subText1Looser as IStyles;\n\t\t\t}\n\n\t\t\tif (this.subText2 instanceof TextArea) {\n\t\t\t\tthis.subText2.text = this.config.looserTexts.subText2;\n\t\t\t\tthis.subText2.styles = this.config.subText2Looser as IStyles;\n\t\t\t}\n\n\t\t\tif (this._loseSound) {\n\t\t\t\tthis._loseSound.play();\n\t\t\t}\n\n\t\t\tduration = this.config.looserDuration ?? 3.4;\n\t\t} else {\n\t\t\t// Winner\n\t\t\tthis.subText2.visible = false;\n\t\t\tthis._amount.visible = true;\n\t\t\tthis._amount.text = Numeral.currency(new Amount(box.amount.value), {\n\t\t\t\tminimumFractionDigits: this.config.minimumFractionDigits ?? 2,\n\t\t\t});\n\n\t\t\tif (this.config.backgroundTexture.winner) {\n\t\t\t\tthis.background = Sprite.fromFrame(this.config.backgroundTexture.winner);\n\t\t\t\tthis.background.docking = new Docking(Docking.centerAll);\n\t\t\t}\n\n\t\t\t// Set text\n\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\tthis.mainText.text = this.config.winningThresholds[0].mainText;\n\t\t\t}\n\n\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\tthis.subText1.text = this.config.winningThresholds[0].subText1;\n\t\t\t}\n\n\t\t\tthis.config.winningThresholds.forEach((t) => {\n\t\t\t\tif (box.amount.value >= t.amount) {\n\t\t\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\t\t\tthis.mainText.text = t.mainText;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\t\t\tthis.subText1.text = t.subText1;\n\t\t\t\t\t}\n\n\t\t\t\t\tduration = t.duration ?? duration;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Set styles\n\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\tthis.mainText.styles = this.config.mainTextWinner as IStyles;\n\t\t\t} else {\n\t\t\t\tthis.mainText = this.config.mainTextWinner as Sprite;\n\t\t\t}\n\n\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\tthis.subText1.styles = this.config.subText1Winner as IStyles;\n\t\t\t} else {\n\t\t\t\tthis.subText1 = this.config.subText1Winner as Sprite;\n\t\t\t}\n\n\t\t\tif (this._winSound) {\n\t\t\t\tthis._winSound.play();\n\t\t\t}\n\t\t}\n\n\t\t// Add children\n\t\tthis.addChild(this.background);\n\t\tthis.addChild(this.mainText);\n\t\tthis.addChild(this.subText1);\n\t\tthis.addChild(this.subText2);\n\t\tthis.addChild(this._amount);\n\n\t\t// Set positions of texts\n\t\tthis.mainText.docking.y = -this.subText1.height * 1.5;\n\t\tthis.subText2.docking.y = this.subText1.height;\n\t\tthis._amount.docking.y = this.subText1.height * 1.5;\n\n\t\tthis.scaleXY = 0;\n\n\t\t// Show popup and hide it after 2 seconds\n\t\tTweenMax.to(this, 0.7, {\n\t\t\tscaleXY: 1,\n\t\t\tease: Back.easeOut.config(1.7),\n\t\t\tonComplete: () => {\n\t\t\t\tbox.emit(EResultBoxEvents.StageHasEntered, this);\n\n\t\t\t\tif (this.config.disappears === false) {\n\t\t\t\t\tdone(true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tTweenMax.to(this, 0.7, {\n\t\t\t\t\tdelay: duration - 1.4,\n\t\t\t\t\tscaleXY: 0,\n\t\t\t\t\tease: Back.easeIn.config(1.7),\n\t\t\t\t\tonStart: () => {\n\t\t\t\t\t\tbox.emit(EResultBoxEvents.StageWillExit, this);\n\t\t\t\t\t},\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\tdone(true);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Hide the stage\n\t * @param progressive: If true, stage is hidden in 0.3s, otherwise in 0s.\n\t */\n\tpublic onHide(progressive: boolean): Promise<void> {\n\t\tif (this.config.disappears === false) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\treturn super.onHide(progressive);\n\t}\n}\n","import { pDelayedCall } from \"@gdk/core-pixi\";\nimport { Numeral } from \"@gdk/core\";\nimport type { SpineTimeline, TextField } from \"@gdk/core-pixi\";\n\nimport { ResultStage } from \"./resultStage\";\nimport type { ResultBox } from \"./resultBox\";\n\nexport interface ISpineStageStyle {\n\tthresholdsTexts: Array<{\n\t\tmainText: string;\n\t\tsubText: string;\n\t}>;\n\n\tlooserTexts: {\n\t\tmainText: string;\n\t\tsubText: string;\n\t};\n\n\twinMainText: TextField;\n\twinSubText: TextField;\n\twinAmountText: TextField;\n\n\tloseMainText: TextField;\n\tloseSubText: TextField;\n\n\tthresholdsWinAmount: number[];\n\n\twinSpineTimeline: SpineTimeline;\n\tloseSpineTimeline: SpineTimeline;\n\n\twinEnterAnimationName: string;\n\twinExitAnimationName: string;\n\n\tloseEnterAnimationName: string;\n\tloseExitAnimationName: string;\n\n\twinnerDuration: number;\n\tloserDuration: number;\n}\n\nexport class SpineStage extends ResultStage {\n\t/* ATTRIBUTES */\n\n\tpublic config: ISpineStageStyle;\n\n\t/* LIFECYCLE */\n\n\t/**\n\t * @constructor\n\t * @param config Configuration of the stage\n\t */\n\tpublic constructor(config: ISpineStageStyle) {\n\t\tsuper();\n\n\t\tthis.config = config;\n\t\tthis.reset();\n\t}\n\n\t/**\n\t * onShow\n\t * @param box\n\t * @param done\n\t */\n\tpublic async onShow(box: ResultBox, done: (stop: boolean) => void): Promise<void> {\n\t\tconst isWin: boolean = box.amount.value > 0;\n\n\t\tif (isWin) {\n\t\t\tthis.config.winAmountText.text = Numeral.currency(box.amount, {\n\t\t\t\tminimumFractionDigits: 2,\n\t\t\t});\n\n\t\t\tfor (let i = this.config.thresholdsWinAmount.length - 1; i >= 0; i--) {\n\t\t\t\tconst thresholdWinAmount: number = this.config.thresholdsWinAmount[i];\n\t\t\t\tconst thresholdText: { mainText: string; subText: string } = this.config.thresholdsTexts[i];\n\n\t\t\t\tif (thresholdText && box.amount.value >= thresholdWinAmount) {\n\t\t\t\t\tthis.config.winMainText.text = thresholdText.mainText;\n\t\t\t\t\tthis.config.winSubText.text = thresholdText.subText;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.config.loseMainText.text = this.config.looserTexts.mainText;\n\t\t\tthis.config.loseSubText.text = this.config.looserTexts.subText;\n\t\t}\n\n\t\tconst enterAnimation = isWin\n\t\t\t? this.config.winSpineTimeline.playDirect(this.config.winEnterAnimationName)\n\t\t\t: this.config.loseSpineTimeline.playDirect(this.config.loseEnterAnimationName);\n\n\t\tenterAnimation\n\t\t\t.then(() => pDelayedCall(isWin ? this.config.winnerDuration : this.config.loserDuration))\n\t\t\t.then(() =>\n\t\t\t\tisWin\n\t\t\t\t\t? this.config.winSpineTimeline.playDirect(this.config.winExitAnimationName)\n\t\t\t\t\t: this.config.loseSpineTimeline.playDirect(this.config.loseExitAnimationName)\n\t\t\t)\n\t\t\t.then(() => {\n\t\t\t\tdone(true);\n\t\t\t});\n\n\t\tthis.config.winSpineTimeline.visible = isWin;\n\t\tthis.config.loseSpineTimeline.visible = !isWin;\n\t}\n\n\t/* PUBLIC METHODS */\n\n\t/**\n\t * Reset the stage\n\t */\n\tpublic reset(): void {\n\t\tthis.config.winSpineTimeline.visible = false;\n\t\tthis.config.loseSpineTimeline.visible = false;\n\t}\n}\n","import { Container } from \"pixi.js\";\nimport { Docking, TextArea, EAlign } from \"@gdk/core-pixi\";\nimport { Loader } from \"@gdk/core\";\nimport { Back, TweenMax } from \"gsap\";\nimport { Howl } from \"howler\";\nimport type { IStyles } from \"@gdk/core-pixi\";\nimport type { Sprite } from \"pixi.js\";\n\nimport { ResultStage } from \"./resultStage\";\nimport { EResultBoxEvents } from \"./resultBox\";\nimport type { ResultBox } from \"./resultBox\";\n\nexport interface ITextResultThreshold {\n\tamount: number;\n\tmainText: string;\n\tsubText1: string;\n\tanimated?: boolean;\n\tduration?: number;\n}\n\nexport interface ITextResultLooser {\n\tdisappears?: boolean;\n\tmainText: string;\n\tsubText1: string;\n\tsubText2: string;\n}\n\nexport interface ITextResultSounds {\n\tloser?: Howl | string;\n\twinner?: Howl | string;\n}\n\nexport interface ITextResultStyle {\n\tmainTextWinner: Container | IStyles;\n\tsubText1Winner: Container | IStyles;\n\n\tmainTextLooser: Container | IStyles;\n\tsubText1Looser: Container | IStyles;\n\tsubText2Looser: Container | IStyles;\n\n\twinningThresholds: ITextResultThreshold[];\n\tlooserTexts: ITextResultLooser;\n\tlooserDuration: number;\n\n\tsounds?: ITextResultSounds;\n}\n\nexport class TextResultStage extends ResultStage {\n\t// Public members\n\tpublic mainText: Container | TextArea;\n\tpublic subText1: Container | TextArea;\n\tpublic subText2: Container | TextArea;\n\n\tpublic config: ITextResultStyle;\n\n\tprivate _loseSound: Howl;\n\tprivate _winSound: Howl;\n\n\t/**\n\t * Constructor\n\t */\n\tpublic constructor(config: ITextResultStyle) {\n\t\tsuper();\n\n\t\t// Main text\n\t\tif (config.mainTextLooser instanceof Container) {\n\t\t\tthis.mainText = config.mainTextLooser;\n\t\t} else {\n\t\t\tthis.mainText = new TextArea(\"\", config.mainTextLooser, { align: EAlign.Center });\n\t\t\tthis.mainText.docking = new Docking(Docking.centerAll);\n\t\t}\n\n\t\t// Sub text 1\n\t\tif (config.subText1Looser instanceof Container) {\n\t\t\tthis.subText1 = config.subText1Looser;\n\t\t} else {\n\t\t\tthis.subText1 = new TextArea(\"\", config.subText1Looser, { align: EAlign.Center });\n\t\t\tthis.subText1.docking = new Docking(Docking.centerAll);\n\t\t}\n\n\t\t// Sub text 2\n\t\tif (config.subText2Looser instanceof Container) {\n\t\t\tthis.subText2 = config.subText2Looser;\n\t\t} else {\n\t\t\tthis.subText2 = new TextArea(\"\", config.subText2Looser, { align: EAlign.Center });\n\t\t\tthis.subText2.docking = new Docking(Docking.centerAll);\n\t\t}\n\n\t\t// Sounds\n\t\tconfig.sounds = config.sounds || {};\n\n\t\tif (typeof config.sounds.loser === \"string\") {\n\t\t\tthis._loseSound = Loader.get<Howl>(config.sounds.loser);\n\t\t} else if (config.sounds.loser instanceof Howl) {\n\t\t\tthis._loseSound = config.sounds.loser;\n\t\t}\n\n\t\tif (typeof config.sounds.winner === \"string\") {\n\t\t\tthis._winSound = Loader.get<Howl>(config.sounds.winner);\n\t\t} else if (config.sounds.winner instanceof Howl) {\n\t\t\tthis._winSound = config.sounds.winner;\n\t\t}\n\n\t\t// Misc.\n\t\tthis.config = config;\n\n\t\tthis.dockAsPoint = true;\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * On show the result box\n\t * @param box the result box reference\n\t * @param done the callback to call when stage animation done\n\t */\n\tpublic onShow(box: ResultBox, done: (stop: boolean, hide?: boolean) => void): void {\n\t\tlet animated = true;\n\t\tlet duration = 2;\n\n\t\t// Set texts\n\t\tif (box.amount.value === 0) {\n\t\t\tthis.subText2.visible = true;\n\n\t\t\t// Looser\n\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\tthis.mainText.freeze();\n\t\t\t\tthis.mainText.keepCanvasReference = true;\n\t\t\t\tthis.mainText.text = this.config.looserTexts.mainText;\n\t\t\t\tthis.mainText.styles = this.config.mainTextLooser as IStyles;\n\t\t\t\tthis.mainText.unfreeze();\n\t\t\t}\n\n\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\tthis.subText1.freeze();\n\t\t\t\tthis.subText1.keepCanvasReference = true;\n\t\t\t\tthis.subText1.text = this.config.looserTexts.subText1;\n\t\t\t\tthis.subText1.styles = this.config.subText1Looser as IStyles;\n\t\t\t\tthis.subText1.unfreeze();\n\t\t\t}\n\n\t\t\tif (this.subText2 instanceof TextArea) {\n\t\t\t\tthis.subText2.freeze();\n\t\t\t\tthis.subText2.keepCanvasReference = true;\n\t\t\t\tthis.subText2.text = this.config.looserTexts.subText2;\n\t\t\t\tthis.subText2.styles = this.config.subText2Looser as IStyles;\n\t\t\t\tthis.subText2.unfreeze();\n\t\t\t}\n\n\t\t\tif (this._loseSound) {\n\t\t\t\tthis._loseSound.play();\n\t\t\t}\n\n\t\t\tduration = this.config.looserDuration;\n\t\t} else {\n\t\t\t// Winner\n\t\t\tthis.subText2.visible = false;\n\n\t\t\t// Set text\n\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\tthis.mainText.freeze();\n\t\t\t\tthis.mainText.keepCanvasReference = true;\n\t\t\t\tthis.mainText.text = this.config.winningThresholds[0].mainText;\n\t\t\t}\n\n\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\tthis.subText1.freeze();\n\t\t\t\tthis.subText1.text = this.config.winningThresholds[0].subText1;\n\t\t\t}\n\n\t\t\tthis.config.winningThresholds.forEach((t) => {\n\t\t\t\tif (box.amount.value >= t.amount) {\n\t\t\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\t\t\tthis.mainText.text = t.mainText;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\t\t\tthis.subText1.text = t.subText1;\n\t\t\t\t\t}\n\n\t\t\t\t\tduration = t.duration ?? 2;\n\t\t\t\t\tanimated = t.animated ?? true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Set styles\n\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\tthis.mainText.styles = this.config.mainTextWinner as IStyles;\n\t\t\t\tthis.mainText.unfreeze();\n\t\t\t} else {\n\t\t\t\tthis.mainText = this.config.mainTextWinner as Sprite;\n\t\t\t}\n\n\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\tthis.subText1.styles = this.config.subText1Winner as IStyles;\n\t\t\t\tthis.subText1.unfreeze();\n\t\t\t} else {\n\t\t\t\tthis.subText1 = this.config.subText1Winner as Sprite;\n\t\t\t}\n\n\t\t\tif (this._winSound) {\n\t\t\t\tthis._winSound.play();\n\t\t\t}\n\t\t}\n\n\t\t// Add children\n\t\tthis.addChild(this.mainText);\n\t\tthis.addChild(this.subText1);\n\t\tthis.addChild(this.subText2);\n\n\t\t// Set texts scale to 1.0\n\t\tthis.mainText.scaleXY = 1;\n\t\tthis.subText2.scaleXY = 1;\n\t\tthis.subText1.scaleXY = 1;\n\n\t\t// Set positions of texts\n\t\tthis.mainText.docking.y = -this.subText1.height;\n\t\tthis.subText1.docking.y = 0;\n\t\tthis.subText2.docking.y = this.subText1.height;\n\n\t\t// Pivot of texts\n\t\tthis.mainText.pivot.x = this.mainText.width / 2;\n\t\tthis.mainText.pivot.y = this.mainText.height / 2;\n\n\t\tthis.subText1.pivot.x = this.subText1.width / 2;\n\t\tthis.subText1.pivot.y = this.subText1.height / 2;\n\n\t\tthis.subText2.pivot.x = this.subText2.width / 2;\n\t\tthis.subText2.pivot.y = this.subText2.height / 2;\n\n\t\tif (!animated) {\n\t\t\tthis.mainText.docking.y -= 50;\n\t\t\tthis.subText1.docking.y -= 50;\n\t\t\tthis.subText2.docking.y -= 50;\n\t\t\tdone(false, false);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.animate(box, duration, done);\n\t}\n\n\tprotected animate(\n\t\tbox: ResultBox,\n\t\tduration: number,\n\t\tdone: (stop: boolean, hide?: boolean) => void\n\t): void {\n\t\t// Reset texts scale\n\t\tthis.mainText.scaleXY = 0;\n\t\tthis.subText2.scaleXY = 0;\n\t\tthis.subText1.scaleXY = 0;\n\n\t\t// ScaleXY from 0 to 1\n\t\tTweenMax.to(this.mainText, 0.25 * duration, {\n\t\t\tscaleXY: 1,\n\t\t\tonComplete: () => {\n\t\t\t\tif (this.mainText instanceof TextArea) {\n\t\t\t\t\tthis.mainText.keepCanvasReference = false;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tTweenMax.to(this.subText1, 0.25 * duration, {\n\t\t\tdelay: 0.25 * duration,\n\t\t\tscaleXY: 1,\n\t\t\tonComplete: () => {\n\t\t\t\tif (this.subText1 instanceof TextArea) {\n\t\t\t\t\tthis.subText1.keepCanvasReference = false;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tTweenMax.to(box.particleSystem, duration, {\n\t\t\tscaleXY: 1,\n\t\t});\n\n\t\tTweenMax.to(this.subText2, 0.25 * duration, {\n\t\t\tdelay: 0.25 * duration,\n\t\t\tscaleXY: 1,\n\t\t\tonComplete: () => {\n\t\t\t\tif (this.subText2 instanceof TextArea) {\n\t\t\t\t\tthis.subText2.keepCanvasReference = false;\n\t\t\t\t}\n\n\t\t\t\tbox.emit(EResultBoxEvents.StageHasEntered, this);\n\n\t\t\t\tTweenMax.to(box.particleSystem, 0.25 * duration, {\n\t\t\t\t\tdelay: 0.25 * duration,\n\t\t\t\t\tscaleXY: 0,\n\t\t\t\t});\n\n\t\t\t\tif (box.amount.value === 0 && this.config.looserTexts.disappears === false) {\n\t\t\t\t\tdone(true, false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// ScaleXY from 1 to 0\n\t\t\t\tTweenMax.to(this.mainText, 0.25 * duration, {\n\t\t\t\t\tease: Back.easeIn.config(1.7),\n\t\t\t\t\tdelay: 0.25 * duration,\n\t\t\t\t\tscaleXY: 0,\n\t\t\t\t});\n\n\t\t\t\tTweenMax.to(this.subText1, 0.25 * duration, {\n\t\t\t\t\tease: Back.easeIn.config(1.7),\n\t\t\t\t\tdelay: 0.25 * duration,\n\t\t\t\t\tscaleXY: 0,\n\t\t\t\t});\n\n\t\t\t\tTweenMax.to(this.subText2, 0.25 * duration, {\n\t\t\t\t\tease: Back.easeIn.config(1.7),\n\t\t\t\t\tdelay: 0.25 * duration,\n\t\t\t\t\tscaleXY: 0,\n\t\t\t\t\tonStart: () => {\n\t\t\t\t\t\tbox.emit(EResultBoxEvents.StageWillExit, this);\n\t\t\t\t\t},\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\tthis.removeChild(box.particleSystem);\n\t\t\t\t\t\tdone(box.amount.value === 0, true);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n}\n","import { Texture } from \"pixi.js\";\nimport i18n from \"i18next\";\nimport { Tools } from \"@gdk/core\";\nimport { Button, Docking, ContainerExporter, ContainerImporter, TextField } from \"@gdk/core-pixi\";\nimport type { IStyles, IButtonStyle } from \"@gdk/core-pixi\";\n\nimport { TextSlide, ELayout } from \"./index\";\nimport { getSlideStylePaddingValue } from \"./textSlide\";\nimport type { ITrigger } from \"../../../com\";\nimport type { Rules, ISlideTextStyle, ISlideStylePadding } from \"./index\";\n\nexport interface IAgreementStyle extends ISlideTextStyle {\n\tokButtonStyle?: IButtonStyle | Button;\n\tgameRuleStyle?: TextField | IStyles;\n\tgameRulePadding?: ISlideStylePadding<AgreementSlide>;\n\tgeneralRuleStyle?: TextField | IStyles;\n\tgeneralRulePadding?: ISlideStylePadding<AgreementSlide>;\n}\n\nexport class AgreementSlide extends TextSlide {\n\t/**\n\t * Ok button reference being added when the agreement slide is shown\n\t */\n\tpublic okButton: Button;\n\t/**\n\t * The general rules textfield working as a link\n\t */\n\tpublic generalRule: TextField;\n\t/**\n\t * The game rules textfield working as a link\n\t */\n\tpublic gameRule: TextField;\n\t/**\n\t * If the agreement slide should be auto-configured in the .configure method. True by default.\n\t */\n\tpublic autoConfigure: boolean = true;\n\t/**\n\t * The com trigger reference used to open general rules and game rules\n\t */\n\tpublic com: ITrigger = null;\n\n\t// Private members\n\tprivate _gameRulePadding: ISlideStylePadding<AgreementSlide> = {};\n\tprivate _generalRulePadding: ISlideStylePadding<AgreementSlide> = {};\n\n\t/**\n\t * Constructor\n\t * @param com communication trigger\n\t * @param style slide style\n\t */\n\tpublic constructor(com: ITrigger, style: IAgreementStyle) {\n\t\tsuper(style);\n\n\t\tthis.com = com;\n\t\tthis.setName(\"rules:agreement\");\n\n\t\t// OK Button\n\t\tthis.okButton =\n\t\t\tstyle.okButtonStyle instanceof Button\n\t\t\t\t? style.okButtonStyle\n\t\t\t\t: new Button(style.okButtonStyle).setName(\"rules:ok\");\n\t\tthis.okButton.doNotExport = true;\n\t\tthis.okButton.docking = new Docking(Docking.bottomRight);\n\n\t\t// Links\n\t\tthis.generalRule =\n\t\t\tstyle.generalRuleStyle instanceof TextField\n\t\t\t\t? style.generalRuleStyle\n\t\t\t\t: new TextField(\n\t\t\t\t\t\ti18n.t(\"rules.agreement.generalRule\"),\n\t\t\t\t\t\tstyle.generalRuleStyle || style.text.style\n\t\t\t\t  ).setName(\"rules:agreement:generalRules\");\n\t\tthis.generalRule.docking = new Docking(Docking.centerAll);\n\t\tthis.generalRule.interactive = true;\n\t\tthis.addChild(this.generalRule);\n\t\tthis._generalRulePadding = Tools.assign(this._generalRulePadding, style.generalRulePadding);\n\n\t\tthis.gameRule =\n\t\t\tstyle.gameRuleStyle instanceof TextField\n\t\t\t\t? style.gameRuleStyle\n\t\t\t\t: new TextField(\n\t\t\t\t\t\ti18n.t(\"rules.agreement.gameRule\"),\n\t\t\t\t\t\tstyle.gameRuleStyle || style.text.style\n\t\t\t\t  ).setName(\"rules:agreement:gameRules\");\n\t\tthis.gameRule.docking = new Docking(Docking.centerAll);\n\t\tthis.gameRule.interactive = true;\n\t\tthis.addChild(this.gameRule);\n\t\tthis._gameRulePadding = Tools.assign(this._gameRulePadding, style.gameRulePadding);\n\n\t\tthis.generalRule.on(\"link\", () => this.com.trigger(\"GLOBAL_RULES\"));\n\t\tthis.gameRule.on(\"link\", () => this.com.trigger(\"GAME_RULES\"));\n\t}\n\n\t/**\n\t * Configures the slide in the given popup\n\t * @param rules the popup containing the slide\n\t */\n\tpublic configure(rules: Rules): void {\n\t\t// Add ok button which is not visible right now\n\t\tthis.okButton.visible = false;\n\t\trules.addChild(this.okButton);\n\n\t\tif (!this.autoConfigure) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Keep default behavior\n\t\tsuper.configure(rules);\n\n\t\t// handle text padding layout\n\t\tif (this.layout === ELayout.TextPadding) {\n\t\t\tdelete this.gameRule.docking;\n\n\t\t\tif (this._gameRulePadding.left !== undefined || this._gameRulePadding.right !== undefined) {\n\t\t\t\tthis.gameRule.x = getSlideStylePaddingValue(this._gameRulePadding.left, this);\n\t\t\t\tthis.gameRule.width =\n\t\t\t\t\tthis.dockingBounds.width -\n\t\t\t\t\t(getSlideStylePaddingValue(this._gameRulePadding.right, this) - this.gameRule.x);\n\t\t\t}\n\t\t\tif (this._gameRulePadding.top !== undefined || this._gameRulePadding.bottom !== undefined) {\n\t\t\t\tthis.gameRule.y = getSlideStylePaddingValue(this._gameRulePadding.top, this);\n\t\t\t\tthis.gameRule.height =\n\t\t\t\t\tthis.dockingBounds.height -\n\t\t\t\t\t(getSlideStylePaddingValue(this._gameRulePadding.bottom, this) - this.gameRule.y);\n\t\t\t}\n\n\t\t\tdelete this.generalRule.docking;\n\n\t\t\tif (\n\t\t\t\tthis._generalRulePadding.left !== undefined ||\n\t\t\t\tthis._generalRulePadding.right !== undefined\n\t\t\t) {\n\t\t\t\tthis.generalRule.x = getSlideStylePaddingValue(this._generalRulePadding.left, this);\n\t\t\t\tthis.generalRule.width =\n\t\t\t\t\tthis.dockingBounds.width -\n\t\t\t\t\t(getSlideStylePaddingValue(this._generalRulePadding.right, this) - this.gameRule.x);\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis._generalRulePadding.top !== undefined ||\n\t\t\t\tthis._generalRulePadding.bottom !== undefined\n\t\t\t) {\n\t\t\t\tthis.generalRule.y = getSlideStylePaddingValue(this._generalRulePadding.top, this);\n\t\t\t\tthis.generalRule.height =\n\t\t\t\t\tthis.dockingBounds.height -\n\t\t\t\t\t(getSlideStylePaddingValue(this._generalRulePadding.bottom, this) - this.gameRule.y);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Reposition text\n\t\tthis.text.docking.y = -this.generalRule.height / 2;\n\n\t\t// Place links\n\t\tthis.generalRule.docking.y = this.text.height / 2;\n\t\tthis.generalRule.docking.x = -this.dockingBounds.width / 2 + this.generalRule.width + 25;\n\n\t\tthis.gameRule.docking.y = this.text.height / 2;\n\t\tthis.gameRule.docking.x = this.dockingBounds.width / 2 - this.gameRule.width - 25;\n\t}\n\n\t/**\n\t * Called when showing the slide in the rules popup\n\t * @param rules the popup containing the slide\n\t */\n\tpublic onShow(rules: Rules): void {\n\t\tsuper.onShow(rules);\n\n\t\tthis.okButton.visible = true;\n\t\trules.addChild(this.okButton);\n\n\t\trules.nextButton.visible = false;\n\t\trules.popup.closeButton.visible = false;\n\t}\n\n\t/**\n\t * Called when hiding the slide in the rules popup\n\t * @param rules the popup containing the slide\n\t */\n\tpublic onHide(rules: Rules): void {\n\t\tthis.okButton.visible = false;\n\n\t\trules.nextButton.visible = true;\n\t\tthis.visible = false;\n\n\t\trules.popup.closeButton.visible = true;\n\t}\n\n\t/**\n\t * On destroy the slide\n\t * @param rules the popup containing the slide\n\t */\n\tpublic onDestroy(rules: Rules): void {\n\t\trules.removeChild(this.okButton);\n\t\trules.nextButton.visible = true;\n\t}\n\n\t/**\n\t * Exports the agreement slide\n\t */\n\tpublic export(): any {\n\t\tthis.children.forEach((c) => (c.doNotExport = true));\n\n\t\treturn Tools.assign(ContainerExporter.exportContainer(this), {\n\t\t\ttype: \"rules.AgreementSlide\",\n\t\t\thasBullet: this.hasBullet,\n\t\t\tagreement: {\n\t\t\t\tokButtonStyle: this.okButton.export(),\n\t\t\t\tgeneralRuleStyle: this.generalRule.export(),\n\t\t\t\tgameRuleStyle: this.gameRule.export(),\n\t\t\t\ttext: this.text.export(),\n\t\t\t\ttitle: this.title.export(),\n\t\t\t} as IAgreementStyle,\n\t\t});\n\t}\n\n\t/**\n\t * Creates a new agremment slide. Function used by project loader\n\t * @param config the serialized data\n\t * @param baseUrl the base url of the loader\n\t */\n\tpublic static parse(config: any, baseUrl: string): AgreementSlide {\n\t\tconst slide = new AgreementSlide(null, {\n\t\t\t// Minimal configuration\n\t\t\tokButtonStyle: {\n\t\t\t\tclickedTexture: Texture.WHITE,\n\t\t\t\tidleTexture: Texture.WHITE,\n\t\t\t\toverTexture: Texture.WHITE,\n\t\t\t\tdisabledTexture: Texture.WHITE,\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\tstyle: config.agreement.text.styles,\n\t\t\t},\n\t\t});\n\t\tslide.autoConfigure = false;\n\n\t\tButton.parse(config.agreement.okButtonStyle, baseUrl, slide.okButton);\n\n\t\tContainerImporter.import(config.agreement.title, baseUrl, slide.title);\n\t\tContainerImporter.import(config.agreement.text, baseUrl, slide.text);\n\t\tContainerImporter.import(config.agreement.generalRuleStyle, baseUrl, slide.generalRule);\n\t\tContainerImporter.import(config.agreement.gameRuleStyle, baseUrl, slide.gameRule);\n\n\t\tContainerImporter.importContainer(config, baseUrl, slide);\n\n\t\tif (config.hasBullet !== undefined) {\n\t\t\tslide.hasBullet = config.hasBullet;\n\t\t}\n\n\t\treturn slide;\n\t}\n}\n","import { DockingBounds, ContainerExporter } from \"@gdk/core-pixi\";\nimport { Tools } from \"@gdk/core\";\n\nimport { Slide } from \"./slide\";\nimport type { Rules } from \"./rules\";\n\nexport class BaseSlide extends Slide {\n\t/**\n\t * Constructor\n\t */\n\tpublic constructor() {\n\t\t// PIXI.Container\n\t\tsuper();\n\t}\n\n\t/**\n\t * Configures the slide in the given popup\n\t * @param rules the popup containing the slide\n\t */\n\tpublic configure(rules: Rules): void {\n\t\t// Misc.\n\t\tthis.dockingBounds = new DockingBounds(rules.dockingBounds.width, rules.dockingBounds.height);\n\t}\n\n\t/**\n\t * Called when showing the slide in the rules popup\n\t * @param rules the popup containing the slide\n\t */\n\tpublic onShow(rules: Rules): void {\n\t\tsuper.onShow(rules);\n\t}\n\n\t/**\n\t * Called when hiding the slide in the rules popup\n\t * @param rules the popup containing the slide\n\t */\n\tpublic onHide(rules: Rules): void {\n\t\tsuper.onHide(rules);\n\t}\n\n\t/**\n\t * Exports the base slide\n\t */\n\tpublic export(): any {\n\t\treturn Tools.assign(ContainerExporter.exportContainer(this), {\n\t\t\ttype: \"rules.BaseSlide\",\n\t\t\thasBullet: this.hasBullet,\n\t\t});\n\t}\n\n\t/**\n\t * Creates a new base slide. Function used by project loader\n\t * @param config the JSON representation of the save slide.\n\t * @param baseUrl the base Url where to find other assets if needed to be loaded incrementally.\n\t */\n\tpublic static parse(config: any, baseUrl: string): BaseSlide {\n\t\tconst slide = new BaseSlide();\n\n\t\tif (config.hasBullet !== undefined) {\n\t\t\tslide.hasBullet = config.hasBullet;\n\t\t}\n\n\t\treturn slide;\n\t}\n}\n","export { Rules, IRulesStyle } from \"./rules\";\nexport { Slide } from \"./slide\";\nexport {\n\tTextSlide,\n\tISlideTextStyle,\n\tELayout,\n\tISlideStylePadding,\n\tSlideStylePaddingFunction,\n\tSlideStylePaddingValue,\n} from \"./textSlide\";\nexport { BaseSlide } from \"./baseSlide\";\nexport { AgreementSlide, IAgreementStyle } from \"./agreement\";\n","import { Container, Sprite, Texture } from \"pixi.js\";\nimport {\n\tisLeftPointerTap,\n\tDocking,\n\tContainerExporter,\n\tTextureExporter,\n\tTextureImporter,\n\tPopup,\n\tButton,\n\tISwipeEventData,\n\tDockingBounds,\n\tContainerImporter,\n} from \"@gdk/core-pixi\";\nimport { Tools } from \"@gdk/core\";\nimport type { IPopupStyle, IButtonStyle } from \"@gdk/core-pixi\";\nimport type { interaction, Point } from \"pixi.js\";\n\nimport type { Slide } from \"./slide\";\nimport type { BaseSlide } from \"./baseSlide\";\n\nexport interface IRulesStyle {\n\tpopup: IPopupStyle | Popup;\n\tnextButton: IButtonStyle | Button;\n\tpreviousButton: IButtonStyle | Button;\n\tbulletPoint: {\n\t\tidle: string | Texture;\n\t\tactive: string | Texture;\n\t};\n}\n\nexport class Rules extends Container {\n\t// Public members\n\tpublic popup: Popup;\n\tpublic nextButton: Button;\n\tpublic previousButton: Button;\n\n\tpublic bullet: Container;\n\tpublic loop: boolean = false;\n\n\tpublic idleBulletTexture: Texture;\n\tpublic activeBulletTexture: Texture;\n\n\tpublic onClose: () => void;\n\tpublic onNext: () => void;\n\tpublic onPrevious: () => void;\n\tpublic onChangeSlide: () => void;\n\n\t// Protected members\n\tprotected _slides: Slide[] = [];\n\tprotected _currentSlide: Slide = null;\n\n\tprotected config: IRulesStyle;\n\n\tprotected currentBullet: Sprite = null;\n\n\tprotected touchStartTime: number;\n\tprotected touchStartPosition: Point;\n\tprotected touchEndPosition: Point;\n\tprotected containerToListen: Container = null;\n\n\t/**\n\t * Constructor\n\t */\n\tpublic constructor(config: IRulesStyle) {\n\t\t// PIXI.Container\n\t\tsuper();\n\n\t\t// Popup\n\t\tif (config.popup instanceof Popup) {\n\t\t\tthis.popup = config.popup;\n\t\t} else {\n\t\t\tthis.popup = new Popup(config.popup);\n\t\t}\n\n\t\t// tracking: closeButton must always be named the same way\n\t\tthis.popup.closeButton.setName(\"rules:close\");\n\n\t\tthis.popup.interactive = true;\n\t\tthis.popup.doNotExport = true;\n\t\tthis.popup.docking = new Docking(Docking.centerAll);\n\n\t\t// Next button\n\t\tif (config.nextButton instanceof Button) {\n\t\t\tthis.nextButton = config.nextButton;\n\t\t} else {\n\t\t\tthis.nextButton = new Button(config.nextButton);\n\t\t}\n\n\t\tthis.nextButton.doNotExport = true;\n\t\tthis.nextButton.docking = new Docking(Docking.bottomRight);\n\n\t\t// tracking: nextButon must always be named the same way\n\t\tthis.nextButton.setName(\"rules:next\");\n\n\t\t// Previous button\n\t\tif (config.previousButton instanceof Button) {\n\t\t\tthis.previousButton = config.previousButton;\n\t\t} else {\n\t\t\tthis.previousButton = new Button(config.previousButton);\n\t\t}\n\n\t\tthis.previousButton.doNotExport = true;\n\t\tthis.previousButton.docking = new Docking(Docking.bottomLeft);\n\t\tthis.previousButton.scaleX = -1;\n\n\t\t// tracking: nextButon must always be named the same way\n\t\tthis.previousButton.setName(\"rules:previous\");\n\n\t\t// Bullet\n\t\tthis.idleBulletTexture =\n\t\t\ttypeof config.bulletPoint.idle === \"string\"\n\t\t\t\t? Texture.fromFrame(config.bulletPoint.idle)\n\t\t\t\t: config.bulletPoint.idle;\n\t\tthis.activeBulletTexture =\n\t\t\ttypeof config.bulletPoint.active === \"string\"\n\t\t\t\t? Texture.fromFrame(config.bulletPoint.active)\n\t\t\t\t: config.bulletPoint.active;\n\n\t\tthis.bullet = new Container();\n\t\tthis.bullet.name = \"Bullets\";\n\t\tthis.bullet.doNotExport = true;\n\t\tthis.bullet.docking = new Docking(Docking.bottomCenterHorizontal);\n\t\tthis.bullet.dockingBounds = new DockingBounds(0, this.idleBulletTexture.height);\n\t\tthis.bullet.docking.y = -48; // Default vertical position according to the guidelines. Can be overrided\n\n\t\t// Children\n\t\tthis.addChild(this.popup);\n\t\tthis.addChild(this.nextButton);\n\t\tthis.addChild(this.previousButton);\n\t\tthis.addChild(this.bullet);\n\n\t\t// Misc.\n\t\tthis.config = config;\n\t\tthis.dockingBounds = new DockingBounds(\n\t\t\tthis.popup.background.width,\n\t\t\tthis.popup.background.height\n\t\t);\n\n\t\t// Finish\n\t\tthis._bindEvents();\n\t}\n\n\t/**\n\t * Returns the slides\n\t */\n\tpublic get slides(): Slide[] {\n\t\treturn this._slides;\n\t}\n\n\t/**\n\t * Returns the current slide\n\t */\n\tpublic get currentSlide(): Slide {\n\t\treturn this._currentSlide;\n\t}\n\n\t/**\n\t * Sets the current slide\n\t */\n\tpublic set currentSlide(slide: Slide) {\n\t\tif (slide === this._currentSlide) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._currentSlide) {\n\t\t\tthis._currentSlide.onHide(this);\n\t\t}\n\n\t\tthis._currentSlide = slide;\n\t\tthis._currentSlide.onShow(this);\n\n\t\t// Update bullet\n\t\tthis.currentBullet.texture = this.idleBulletTexture;\n\n\t\tconst index = this._slides.indexOf(this._currentSlide);\n\n\t\tthis.currentBullet = this.bullet.children[index] as Sprite;\n\t\tthis.currentBullet.texture = this.activeBulletTexture;\n\n\t\t// Next and previous buttons\n\t\tthis.previousButton.visible = index > 0 && this.slides.length > 1;\n\t\tthis.nextButton.visible = index < this.slides.length - 1 && this.slides.length > 1;\n\t}\n\n\t/**\n\t * Adds a slide to the rules popup\n\t * @param slide the slide to add (can be a custom slide extending Slide)\n\t */\n\tpublic addSlide(slide: Slide): void {\n\t\tif (slide.configure) {\n\t\t\tslide.configure(this);\n\t\t}\n\n\t\tthis.addChild(slide);\n\t\tthis._slides.push(slide);\n\n\t\tif (!this._currentSlide) {\n\t\t\tthis._currentSlide = slide;\n\t\t}\n\n\t\tif (this._slides.length >= 1) {\n\t\t\tslide.visible = false;\n\t\t}\n\n\t\t// Add a bullet when precised\n\t\tif (slide.hasBullet) {\n\t\t\tthis._addBullet();\n\t\t}\n\n\t\t// Always add close and next buttons in front of all slides.\n\t\tthis.addChild(this.previousButton);\n\t\tthis.addChild(this.nextButton);\n\t}\n\n\t/**\n\t * Removes the given slide from the rules popup\n\t * @param slide the slide to remove\n\t */\n\tpublic removeSlide(slide: Slide): void {\n\t\t// Destroy\n\t\tif (slide.onDestroy) {\n\t\t\tslide.onDestroy(this);\n\t\t}\n\n\t\tthis.removeChild(slide);\n\n\t\tconst index = this._slides.indexOf(slide);\n\t\tif (index !== -1) {\n\t\t\tthis._slides.splice(index, 1);\n\t\t}\n\n\t\tif (slide === this._currentSlide) {\n\t\t\tthis._currentSlide = this._slides[index > this._slides.length ? this._slides.length : index];\n\n\t\t\tif (this._currentSlide) {\n\t\t\t\tthis._currentSlide.onShow(this);\n\t\t\t}\n\t\t}\n\n\t\t// Remove bullet\n\t\tif (slide.hasBullet && this.bullet.children.length > 0) {\n\t\t\tthis.bullet.children[0].destroy();\n\t\t\tthis.bullet.children.forEach((c: Sprite, i) => (c.x = c.texture.width * i));\n\t\t}\n\t}\n\n\t/**\n\t * Returns a slide identified by the given name\n\t * @param name the name of the slide to find\n\t */\n\tpublic getSlideByName(name: string): Slide {\n\t\tfor (const s of this.slides) {\n\t\t\tif (s.name === name) {\n\t\t\t\treturn s;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Removes all the slides from the rules component\n\t */\n\tpublic removeAllSlides(): void {\n\t\twhile (this._slides.length > 0) {\n\t\t\tthis.removeSlide(this._slides[0]);\n\t\t}\n\n\t\tthis._currentSlide = null;\n\n\t\t// Some slides can hide the close button. Force is to visible\n\t\tthis.popup.closeButton.visible = true;\n\t}\n\n\t/**\n\t * Resets the rules component (rollback to first slide)\n\t */\n\tpublic reset(): void {\n\t\t// Current slide\n\t\tif (this._currentSlide) {\n\t\t\tthis._currentSlide.onHide(this);\n\t\t}\n\n\t\tthis._currentSlide = this._slides[0];\n\t\tthis._currentSlide.onShow(this);\n\n\t\t// Buttons visibility\n\t\tif (this._slides.length > 1) {\n\t\t\tthis.previousButton.visible = this.loop;\n\t\t\tthis.nextButton.visible = true;\n\t\t} else {\n\t\t\tthis.previousButton.visible = false;\n\t\t\tthis.nextButton.visible = false;\n\t\t}\n\n\t\t// Bullets\n\t\tif (this.bullet.children.length > 0) {\n\t\t\tthis.bullet.children.forEach((c: Sprite) => (c.texture = this.idleBulletTexture));\n\t\t\tthis.currentBullet = this.bullet.children[0] as Sprite;\n\t\t\tthis.currentBullet.texture = this.activeBulletTexture;\n\t\t}\n\n\t\t// Reset closeButton to initial texture\n\t\t// (on mobile, button keeps hoverTexture when multiple opening/closing of the popup)\n\t\tthis.popup.closeButton.enabled = true;\n\n\t\t// Always add close and next buttons in front of all slides.\n\t\tthis.addChild(this.previousButton);\n\t\tthis.addChild(this.nextButton);\n\t}\n\n\t/**\n\t * Show the popup with the added slides\n\t * @param loopMode a tag to set the loop mode through slides\n\t */\n\tpublic show(loopMode: boolean = false): void {\n\t\tthis.alpha = 1;\n\t\tthis.loop = loopMode;\n\t\tthis.reset();\n\t}\n\n\t/**\n\t * Switch to the specified slide by its index and returns the instance of the next slide\n\t * @param index The index slide\n\t * @return the specified slide\n\t */\n\tpublic changeSlideByIndex(index: number): Slide {\n\t\tconst currentIndex = this._slides.indexOf(this._currentSlide);\n\t\tconst isNext = currentIndex + 1 === index;\n\t\tconst isPrevious = currentIndex - 1 === index;\n\n\t\tif (index < 0) {\n\t\t\tif (!this.loop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tindex = this._slides.length - ((Math.abs(index) - 1) % this._slides.length);\n\t\t}\n\n\t\tif (index >= this._slides.length) {\n\t\t\tif (!this.loop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tindex = index % this._slides.length;\n\t\t}\n\n\t\tthis._currentSlide.onHide(this);\n\t\tthis.currentBullet.texture = this.idleBulletTexture;\n\t\tthis._currentSlide = this._slides[index];\n\n\t\t// Update bullet, next and pervious buttons visibility according to slide index and loop state\n\t\tthis.previousButton.visible = index > 0 || this.loop;\n\t\tthis.nextButton.visible = index < this._slides.length - 1 || this.loop;\n\n\t\tif (this._currentSlide.hasBullet) {\n\t\t\tthis._updateBulletsTexture(index);\n\t\t} else {\n\t\t\tthis.bullet.visible = false;\n\t\t}\n\n\t\tthis._currentSlide.onShow(this);\n\t\tif (this.onChangeSlide) {\n\t\t\tthis.onChangeSlide();\n\t\t}\n\n\t\tif (isNext && this.onNext) {\n\t\t\tthis.onNext();\n\t\t}\n\n\t\tif (isPrevious && this.onPrevious) {\n\t\t\tthis.onPrevious();\n\t\t}\n\n\t\treturn this._currentSlide;\n\t}\n\n\t/**\n\t * Switches to the next slide and returns the instance of the next slide\n\t * @return: the next slide\n\t */\n\tpublic next(): Slide {\n\t\tconst index = this._slides.indexOf(this._currentSlide) + 1;\n\n\t\treturn this.changeSlideByIndex(index);\n\t}\n\n\t/**\n\t * Switches to the previous slides and returns the instance of the previous slide\n\t * @return: the next slide\n\t */\n\tpublic previous(): Slide {\n\t\tconst index = this._slides.indexOf(this._currentSlide) - 1;\n\n\t\treturn this.changeSlideByIndex(index);\n\t}\n\n\t/**\n\t * Closes the rules popup\n\t */\n\tpublic close(): void {\n\t\tif (this.onClose) {\n\t\t\tthis.onClose();\n\t\t}\n\t}\n\n\t/**\n\t * Add a bullet point\n\t */\n\tprivate _addBullet(): void {\n\t\tconst bulletChild = new Sprite(this.idleBulletTexture);\n\t\tthis.bullet.addChild(bulletChild);\n\t\tthis.bullet.children.forEach((c: Sprite, index) => (c.x = c.texture.width * index));\n\t\tthis.bullet.dockingBounds.width = this.bullet.children.length * this.idleBulletTexture.width;\n\n\t\tif (!this.currentBullet) {\n\t\t\tthis.currentBullet = bulletChild;\n\t\t}\n\n\t\t// Configure bullet visibility when showing one slide\n\t\tthis.bullet.visible = this._slides.length > 1;\n\t\tthis.bullet.pivot.set(0, bulletChild.height / 2);\n\t}\n\n\t/**\n\t * show bullets while updating its texture\n\t * @param currentIndex the index of the bullet to be activated\n\t */\n\tprivate _updateBulletsTexture(currentIndex: number): void {\n\t\tif (this.bullet.children.length > 1) {\n\t\t\tthis.bullet.visible = true;\n\t\t\tthis.currentBullet = this.bullet.children[currentIndex] as Sprite;\n\t\t\tthis.currentBullet.texture = this.activeBulletTexture;\n\t\t}\n\t}\n\n\t// Binds the events\n\tprivate _bindEvents(): void {\n\t\t// Close popup\n\t\tthis.popup.closeButton.on(\"pointertap\", (e: interaction.InteractionEvent) => {\n\t\t\tif (isLeftPointerTap(e)) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t});\n\n\t\t// Next & previous buttons\n\t\tthis.nextButton.on(\"pointertap\", (e: interaction.InteractionEvent) => {\n\t\t\tif (isLeftPointerTap(e)) {\n\t\t\t\tthis.next();\n\t\t\t}\n\t\t});\n\t\tthis.previousButton.on(\"pointertap\", (e: interaction.InteractionEvent) => {\n\t\t\tif (isLeftPointerTap(e)) {\n\t\t\t\tthis.previous();\n\t\t\t}\n\t\t});\n\n\t\tthis.addSwipeListenerToContainer(this.popup);\n\t}\n\n\t/**\n\t * Listen to touchstart event\n\t * @param ev: The interaction event data\n\t */\n\tprivate _onTouchStart = (ev: interaction.InteractionEvent): void => {\n\t\tthis.touchStartPosition = ev.data.getLocalPosition(this);\n\t\tthis.touchStartTime = Date.now();\n\t};\n\n\t/**\n\t * Listen to touchend event\n\t * @param ev: The interaction event data\n\t */\n\tprivate _onTouchEnd = (ev: interaction.InteractionEvent): void => {\n\t\tif (this.touchStartPosition) {\n\t\t\t// DraggEvent disturb \"touchstart\" propagation, sometimes start is null\n\t\t\tthis.touchEndPosition = ev.data.getLocalPosition(this);\n\n\t\t\tconst dx = Math.abs(this.touchStartPosition.x - this.touchEndPosition.x);\n\t\t\tconst dt = Date.now() - this.touchStartTime;\n\t\t\tconst pixelsPerSecond = (1000 * dx) / dt;\n\n\t\t\tif (pixelsPerSecond > 500) {\n\t\t\t\tif (this.touchStartPosition.x > this.touchEndPosition.x) {\n\t\t\t\t\tthis.next();\n\t\t\t\t} else {\n\t\t\t\t\tthis.previous();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Add a container to listen for swipe event\n\t * @param nextContainerToListen: The container to listen\n\t */\n\tpublic addSwipeListenerToContainer(nextContainerToListen: Container = null): void {\n\t\tif (this.containerToListen) {\n\t\t\tthis.containerToListen.removeListener(\"touchstart\", this._onTouchStart);\n\t\t\tthis.containerToListen.removeListener(\"touchend\", this._onTouchEnd);\n\t\t}\n\n\t\tthis.containerToListen = nextContainerToListen || this.popup;\n\t\tthis.containerToListen.addListener(\"touchstart\", this._onTouchStart);\n\t\tthis.containerToListen.addListener(\"touchend\", this._onTouchEnd);\n\t}\n\n\t/**\n\t * Export the rules component\n\t */\n\tpublic export(): any {\n\t\t// Configure slides\n\t\tconst slides = [];\n\t\tthis.slides.forEach((s) => {\n\t\t\t// Export slide if supported\n\t\t\tif (s.export) {\n\t\t\t\ts.doNotExport = false;\n\t\t\t\tslides.push(s.export());\n\t\t\t}\n\n\t\t\t// Stop export\n\t\t\ts.doNotExport = true;\n\t\t});\n\n\t\t// Configure bullets\n\t\tthis.bullet.children.forEach((c) => (c.doNotExport = true));\n\n\t\treturn Tools.assign(ContainerExporter.exportContainer(this), {\n\t\t\ttype: \"rules.Rules\",\n\n\t\t\tpopup: this.popup.export(),\n\t\t\tnextButton: this.nextButton.export(),\n\t\t\tpreviousButton: this.previousButton.export(),\n\t\t\tbulletPoint: {\n\t\t\t\tconfig: ContainerExporter.exportContainer(this.bullet, true),\n\t\t\t\tidle: TextureExporter.exportTexture(this.idleBulletTexture),\n\t\t\t\tactive: TextureExporter.exportTexture(this.activeBulletTexture),\n\t\t\t},\n\n\t\t\tslides,\n\t\t});\n\t}\n\n\t/**\n\t * Parses the rules component\n\t * @param config the serialized data\n\t * @param baseUrl the base url of the loader\n\t */\n\tpublic static parse(config: any, baseUrl: string, rules?: Rules): Rules {\n\t\t// Rules\n\t\tif (!rules) {\n\t\t\trules = new Rules({\n\t\t\t\tpopup: new Popup(),\n\t\t\t\tnextButton: new Button({}, config.nextButton.textStyle, config.nextButton.text),\n\t\t\t\tpreviousButton: new Button({}, config.previousButton.textStyle, config.previousButton.text),\n\t\t\t\tbulletPoint: {\n\t\t\t\t\tidle: Texture.WHITE,\n\t\t\t\t\tactive: Texture.WHITE,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tPopup.parse(config.popup, baseUrl, rules.popup);\n\n\t\tButton.parse(config.nextButton, baseUrl, rules.nextButton);\n\t\tButton.parse(config.previousButton, baseUrl, rules.previousButton);\n\n\t\trules.idleBulletTexture = TextureImporter.importTexture(\n\t\t\tconfig.bulletPoint.idle,\n\t\t\tbaseUrl,\n\t\t\trules,\n\t\t\t\"idleBulletTexture\"\n\t\t);\n\t\trules.activeBulletTexture = TextureImporter.importTexture(\n\t\t\tconfig.bulletPoint.active,\n\t\t\tbaseUrl,\n\t\t\trules,\n\t\t\t\"activeBulletTexture\"\n\t\t);\n\n\t\tif (config.bulletPoint.config) {\n\t\t\tContainerImporter.importContainer(config.bulletPoint.config, baseUrl, rules.bullet);\n\t\t}\n\n\t\t// Docking bounds\n\t\trules.dockingBounds = rules.popup.dockingBounds.clone();\n\n\t\t// Slides\n\t\tconfig.slides.forEach((s) => {\n\t\t\tconst slide = ContainerImporter.import(s, baseUrl) as BaseSlide;\n\t\t\trules.addSlide(slide);\n\t\t});\n\n\t\t// Reset\n\t\tif (rules.slides.length > 0) {\n\t\t\trules.reset();\n\t\t}\n\n\t\treturn rules;\n\t}\n}\n","import { Container } from \"pixi.js\";\nimport { tracker, SlideEvent, ESlideEvent } from \"@gdk/core\";\n\nimport type { Rules } from \"./rules\";\n\nexport abstract class Slide extends Container {\n\t// Public members\n\tpublic hasBullet: boolean = true;\n\n\t/**\n\t * Constructor\n\t */\n\tpublic constructor() {\n\t\t// PIXI.Container\n\t\tsuper();\n\t}\n\n\t/**\n\t * Configures the slide in the given popup\n\t * @param rules the popup containing the slide\n\t */\n\tpublic configure(rules: Rules): void {\n\t\t// Empty. Can be overriden\n\t}\n\n\t/**\n\t * Called when showing the slide in the rules popup\n\t */\n\tpublic onShow(rules: Rules): void {\n\t\tif (this.visible) {\n\t\t\treturn;\n\t\t}\n\t\tthis.visible = true;\n\t\ttracker.track(new SlideEvent(this.getName(), ESlideEvent.Show));\n\t}\n\n\t/**\n\t * Called when hiding the slide in the rules popup\n\t */\n\tpublic onHide(rules: Rules): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\t\ttracker.track(new SlideEvent(this.getName(), ESlideEvent.Hide));\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * On destroy the slide\n\t */\n\tpublic onDestroy(rules: Rules): void {\n\t\treturn;\n\t}\n}\n","import { Sprite } from \"pixi.js\";\nimport { TextArea, EAlign, Docking, DockingBounds } from \"@gdk/core-pixi\";\nimport { Tools } from \"@gdk/core\";\nimport type { IStyles } from \"@gdk/core-pixi\";\nimport type { Container } from \"pixi.js\";\n\nimport { Slide } from \"./slide\";\nimport type { Rules } from \"./rules\";\n\nexport enum ELayout {\n\tTextLeft = 0,\n\tTextTop = 1,\n\tTextPadding = 2,\n}\n\nexport type SlideStylePaddingFunction<SlideType> = (slide: SlideType) => number;\nexport type SlideStylePaddingValue<SlideType> = SlideStylePaddingFunction<SlideType> | number;\nexport const getSlideStylePaddingValue = <SlideType>(\n\tvalue: SlideStylePaddingValue<SlideType>,\n\tslide: SlideType\n): number => {\n\tswitch (typeof value) {\n\t\tcase \"number\":\n\t\t\treturn value as number;\n\t\tcase \"function\":\n\t\t\treturn (value as SlideStylePaddingFunction<SlideType>)(slide);\n\t\tdefault:\n\t\t\treturn 0;\n\t}\n};\n\nexport interface ISlideStylePadding<SlideType> {\n\ttop?: SlideStylePaddingValue<SlideType>;\n\tbottom?: SlideStylePaddingValue<SlideType>;\n\tleft?: SlideStylePaddingValue<SlideType>;\n\tright?: SlideStylePaddingValue<SlideType>;\n}\n\nexport interface ISlideTextStyle {\n\ttext?: {\n\t\ttext?: string;\n\t\tstyle?: IStyles;\n\t\talign?: EAlign;\n\t\tpadding?: ISlideStylePadding<TextSlide>;\n\t};\n\ttitle?:\n\t\t| string\n\t\t| Sprite\n\t\t| {\n\t\t\t\ttext?: string;\n\t\t\t\tstyle?: IStyles;\n\t\t\t\talign?: EAlign;\n\t\t\t\tpadding?: ISlideStylePadding<TextSlide>;\n\t\t  };\n\timage?: string | Container;\n\tlayout?: ELayout;\n\thasBullet?: boolean;\n}\n\nexport class TextSlide extends Slide {\n\t// Public members\n\tpublic title: TextArea | Container;\n\tpublic text: TextArea;\n\tpublic image: Container;\n\tpublic layout: ELayout;\n\n\t// Protected members\n\tprotected textPadding: ISlideStylePadding<TextSlide> = {};\n\tprotected titlePadding: ISlideStylePadding<TextSlide> = {};\n\n\t/**\n\t * Constructor\n\t * @param config: the slide's style\n\t */\n\tpublic constructor(config: ISlideTextStyle = {}) {\n\t\t// PIXI.Container\n\t\tsuper();\n\n\t\t// Setup slide's configuration (style)\n\t\tthis.config = config;\n\t}\n\n\t/**\n\t * Sets the slide text style (config)\n\t */\n\tpublic set config(config: ISlideTextStyle) {\n\t\t// Title\n\t\tif (this.title) {\n\t\t\tthis.title.destroy();\n\t\t}\n\n\t\tconfig.title = config.title || {};\n\t\tif (typeof config.title === \"string\") {\n\t\t\t// Title is a sprite texture name\n\t\t\tthis.title = Sprite.fromFrame(config.title);\n\t\t} else if (config.title instanceof Sprite) {\n\t\t\t// Title is a sprite\n\t\t\tthis.title = config.title;\n\t\t} else {\n\t\t\t// Title is a text field\n\t\t\tthis.title = new TextArea(\n\t\t\t\tconfig.title.text || \"\",\n\t\t\t\tconfig.title.style || {\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tfontName: \"Arial\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\talign: config.title.align === undefined ? EAlign.Center : config.title.align,\n\t\t\t\t}\n\t\t\t);\n\t\t\t(this.title as TextArea).wordWrap = true;\n\n\t\t\tthis.titlePadding = Tools.assign(this.titlePadding, config.title.padding);\n\t\t}\n\n\t\tthis.title.name = \"title\";\n\t\tthis.title.docking = new Docking(Docking.centerHorizontal);\n\t\tthis.addChild(this.title);\n\n\t\t// Text-field\n\t\tif (this.text) {\n\t\t\tthis.text.destroy();\n\t\t}\n\n\t\tconfig.text = config.text || {};\n\t\tthis.text = new TextArea(\n\t\t\tconfig.text.text || \"\",\n\t\t\tconfig.text.style || {\n\t\t\t\tdefault: {\n\t\t\t\t\tfontName: \"Arial\",\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\talign: config.text.align === undefined ? EAlign.Center : config.text.align,\n\t\t\t}\n\t\t);\n\n\t\tthis.text.name = \"text\";\n\t\tthis.text.wordWrap = true;\n\t\tthis.text.docking = new Docking(Docking.centerAll);\n\t\tthis.addChild(this.text);\n\n\t\tthis.textPadding = Tools.assign(this.textPadding, config.text.padding);\n\n\t\t// Image\n\t\tif (this.image) {\n\t\t\tthis.image.destroy();\n\t\t}\n\n\t\tif (config.image) {\n\t\t\tthis.image = typeof config.image === \"string\" ? Sprite.fromFrame(config.image) : config.image;\n\t\t\tthis.image.docking = new Docking(Docking.centerAll);\n\t\t\tthis.addChild(this.image);\n\t\t}\n\n\t\tthis.layout = config.layout || ELayout.TextLeft;\n\n\t\tif (config.hasBullet !== undefined) {\n\t\t\tthis.hasBullet = config.hasBullet;\n\t\t}\n\t}\n\n\t/**\n\t * Configures the slide in the given popup\n\t * @param popup the popup containing the slide\n\t */\n\tpublic configure(rules: Rules): void {\n\t\t// Misc.\n\t\tthis.dockingBounds = new DockingBounds(rules.dockingBounds.width, rules.dockingBounds.height);\n\n\t\t// Title\n\t\tthis.title.y = 15;\n\n\t\tswitch (this.layout) {\n\t\t\tcase ELayout.TextLeft:\n\t\t\t\t// Image\n\t\t\t\tif (this.image) {\n\t\t\t\t\tthis.image.docking.x = this.dockingBounds.width / 4;\n\t\t\t\t}\n\t\t\t\t// Text\n\t\t\t\tthis.text.docking.x = this.image ? -this.dockingBounds.width / 4 + 20 : 0;\n\t\t\t\tthis.text.width = this.image\n\t\t\t\t\t? this.dockingBounds.width / 2 - 20\n\t\t\t\t\t: this.dockingBounds.width - 40;\n\t\t\t\tbreak;\n\t\t\tcase ELayout.TextTop:\n\t\t\t\t// both text and image are centered horizontally\n\t\t\t\t// image is set bellow the text\n\t\t\t\tthis.text.width = Math.min(this.text.width, this.dockingBounds.width - 40);\n\t\t\t\tthis.text.docking.y = -this.dockingBounds.height / 4 + 10;\n\t\t\t\tif (this.image) {\n\t\t\t\t\tthis.image.docking.y = this.dockingBounds.height / 4 - 40;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ELayout.TextPadding:\n\t\t\t\t// apply padding on title and remove docking;\n\t\t\t\tdelete this.title.docking;\n\n\t\t\t\tif (this.titlePadding.left !== undefined || this.titlePadding.right !== undefined) {\n\t\t\t\t\tthis.title.x = getSlideStylePaddingValue(this.titlePadding.left, this);\n\t\t\t\t\tthis.title.width =\n\t\t\t\t\t\tthis.dockingBounds.width -\n\t\t\t\t\t\t(getSlideStylePaddingValue(this.titlePadding.right, this) + this.title.x);\n\t\t\t\t}\n\t\t\t\tif (this.titlePadding.top !== undefined || this.titlePadding.bottom !== undefined) {\n\t\t\t\t\tthis.title.y = getSlideStylePaddingValue(this.titlePadding.top, this);\n\t\t\t\t\tthis.title.height =\n\t\t\t\t\t\tthis.dockingBounds.height -\n\t\t\t\t\t\t(getSlideStylePaddingValue(this.titlePadding.bottom, this) + this.title.y);\n\t\t\t\t}\n\n\t\t\t\t// apply padding on text (center all);\n\t\t\t\tdelete this.text.docking;\n\n\t\t\t\tif (this.textPadding.left !== undefined || this.titlePadding.right !== undefined) {\n\t\t\t\t\tthis.text.x = getSlideStylePaddingValue(this.textPadding.left, this);\n\t\t\t\t\tthis.text.width =\n\t\t\t\t\t\tthis.dockingBounds.width -\n\t\t\t\t\t\t(getSlideStylePaddingValue(this.textPadding.right, this) + this.text.x);\n\t\t\t\t}\n\t\t\t\tif (this.textPadding.top !== undefined || this.textPadding.bottom !== undefined) {\n\t\t\t\t\tthis.text.y = getSlideStylePaddingValue(this.textPadding.top, this);\n\t\t\t\t\tthis.text.height =\n\t\t\t\t\t\tthis.dockingBounds.height -\n\t\t\t\t\t\t(getSlideStylePaddingValue(this.textPadding.bottom, this) + this.text.y);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Called when showing the slide in the rules popup\n\t */\n\tpublic onShow(rules: Rules): void {\n\t\tsuper.onShow(rules);\n\t}\n\n\t/**\n\t * Called when hiding the slide in the rules popup\n\t */\n\tpublic onHide(rules: Rules): void {\n\t\tsuper.onHide(rules);\n\t}\n}\n","import type { TextField } from \"@gdk/core-pixi\";\nimport type { Amount } from \"@gdk/core\";\nimport type { Container, Texture } from \"pixi.js\";\n\nimport type { Timer } from \"../ui\";\n\nexport interface IAvatar extends Container {\n\tsetTexture: (texture: Texture) => void;\n\tsetAsCurrentPlayer: () => void;\n\tsetStatus: (status: EAvatarStatus) => void;\n}\n\nexport interface IAvatarSlot extends Container {\n\treset: () => void;\n\tenterRoomAnim: () => void;\n\tpseudo: TextField;\n\tavatar: IAvatar;\n\tplayerId: string;\n}\nexport interface ICoinPosition {\n\tx: number;\n\ty: number;\n\tstartTime: number;\n\trotation: number;\n}\n\nexport enum EAvatarStatus {\n\tquit = 0,\n\tpending = 1,\n\tready = 2,\n\tnone = 3,\n}\n\nexport interface IBottomBanner extends Container {\n\tcontextText: TextField;\n\ttimer: Timer;\n\tcontent: Container;\n}\n\nexport interface IWaitingRoom extends Container {\n\ttimer: Timer;\n\tmaxPlayers: number;\n}\n\nexport interface IPurse extends Container {\n\tsetPurse: (value: Amount) => void;\n}\n\nexport interface IPurses {\n\tgift: IPurse;\n\ttoken: IPurse;\n\tgameWin: IPurse;\n\tstandard: IPurse;\n}\n","export * from \"./com\";\nexport * from \"./game\";\nexport * from \"./loading\";\nexport * from \"./adaptativeVisualIdentity\";\nexport * from \"./ds\";\n\ndeclare const PACKAGE_VERSION: string;\nexport const VERSION = PACKAGE_VERSION;\n","import { Tools } from \"@gdk/core\";\nimport { AssetStore } from \"@gdk/core-pixi\";\nimport type { Container } from \"pixi.js\";\nimport type { IProject, GamePixi } from \"@gdk/core-pixi\";\n\nexport interface IBehaviorScript {\n\t/**\n\t * The name of the script\n\t */\n\tname: string;\n\t/**\n\t * The id of the script (automatically set)\n\t */\n\tid: string;\n\t/**\n\t * Compiled code (javascript) from the TypeScript\n\t */\n\tcompiledCode: string;\n\t/**\n\t * The TypeScript source code\n\t */\n\tbaseCode: string;\n}\n\nexport interface IBehaviorScriptReference {\n\t/**\n\t * The id of the script to reference\n\t */\n\tid: string;\n\t/**\n\t * Sets wether or not the attached script is active or not\n\t */\n\tactive: boolean;\n}\n\nexport interface IBehaviorCode {\n\t/**\n\t * The collection of distinct scripts available\n\t */\n\tscripts: IBehaviorScript[];\n}\n\n// Template\nconst template = `\nvar require = SystemJS.amdRequire;\nvar exports = {};\n{{code}}\nSystemJS.set(\"{{id}}\", SystemJS.newModule(exports));\n`;\n\ninterface IScriptExport {\n\t/**\n\t * In case of a default export\n\t */\n\tdefault?: any;\n\t/**\n\t * Any other class exported as non-default\n\t */\n\t[className: string]: any;\n}\n\nexport class BehaviorCodeExtension {\n\t/**\n\t * The id of the behavior code extension\n\t */\n\tpublic static id: string = \"behaviorCode\";\n\n\t/**\n\t * Applies the behavior code extension on the given container\n\t * @param game the game reference containing the behavior scripts\n\t * @param project the project JSON reference\n\t * @param container the container having scripts attached\n\t */\n\tpublic static apply(game: GamePixi, project: IProject, container: Container): void {\n\t\tconst data = project.metadata[this.id] as IBehaviorCode;\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst references = container.metadata[this.id] as IBehaviorScriptReference[];\n\t\tif (!references) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Apply all references\n\t\tconst instances = [];\n\n\t\treferences.forEach((r) => {\n\t\t\tif (!r.active) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst script = data.scripts.find((s) => s.id === r.id);\n\t\t\tif (!script) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Inject script\n\t\t\tTools.injectScript(\n\t\t\t\ttemplate.replace(\"{{id}}\", script.id).replace(\"{{code}}\", script.compiledCode),\n\t\t\t\tscript.name,\n\t\t\t\t\"scripts\"\n\t\t\t);\n\n\t\t\t// Get constructor then instantiate\n\t\t\tconst exports = Tools.getScript<any>(script.id);\n\t\t\tinstances.push(new exports.default(container, AssetStore));\n\n\t\t\t// The container is ready\n\t\t\tcontainer.emit(\"ready\");\n\t\t});\n\n\t\t// Register the update event\n\t\tgame.application.emitter.on(\"beforeRender\", () => container.emit(\"update\"));\n\t}\n}\n","import { ProjectLoader } from \"./projectLoader\";\nimport {\n\tBehaviorCodeExtension,\n\tIBehaviorScript,\n\tIBehaviorScriptReference,\n\tIBehaviorCode,\n} from \"./extensions/behaviorCode\";\n\nexport {\n\tProjectLoader,\n\tBehaviorCodeExtension,\n\tIBehaviorScript,\n\tIBehaviorScriptReference,\n\tIBehaviorCode,\n};\n","/* eslint-disable import/no-duplicates */\nimport { ContainerImporter, ProjectImporter, AssetStore } from \"@gdk/core-pixi\";\nimport * as GDKSpine from \"@gdk/core-pixi\";\nimport * as GDKUi from \"@gdk/core-pixi\";\nimport * as GDKProton from \"@gdk/core-pixi\";\nimport type { GamePixi, IProject, IProjectContainer, IViewMap } from \"@gdk/core-pixi\";\nimport type { Container } from \"pixi.js\";\n\nimport * as GDKRules from \"../\";\nimport { BehaviorCodeExtension } from \".\";\n\nexport class ProjectLoader {\n\t/**\n\t * Load the given project\n\t * @param game the game reference, typically a GamePixi\n\t * @param project the project's configuration\n\t * @param baseUrl the base url of the loader\n\t * @param viewMap the viewmap to map views with states\n\t */\n\tpublic static load(\n\t\tgame: GamePixi,\n\t\tproject: IProject,\n\t\tbaseUrl: string,\n\t\tviewMap: IViewMap = {}\n\t): void {\n\t\t// Assets\n\t\tAssetStore.parse(project.assets, baseUrl);\n\n\t\t// Customize container creator\n\t\tContainerImporter.customContainerCreator = (config, container) => {\n\t\t\treturn this.customContainerLoader(config, baseUrl, container, project);\n\t\t};\n\n\t\t// Custom customizer is now commented as it is not used for instance\n\t\tContainerImporter.customContainerCustomizer = (config, container) => {\n\t\t\tthis.customContainerCustomizer(game, config, container, baseUrl, project);\n\t\t};\n\n\t\t// Import project\n\t\tProjectImporter.importProject(game, project, baseUrl, viewMap);\n\t}\n\n\t/**\n\t * Function that customizes the given container according to its metadatas\n\t * @param config the container's configuration\n\t * @param container the currently customized container\n\t * @param baseUrl the base url of the loader\n\t * @param project the project JSON data (source data)\n\t */\n\tpublic static customContainerCustomizer(\n\t\tgame: GamePixi,\n\t\tconfig: IProjectContainer,\n\t\tcontainer: Container,\n\t\tbaseUrl: string,\n\t\tproject: IProject\n\t): void {\n\t\tif (!container.metadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (project.metadata) {\n\t\t\t// Behavior code extension requires metadatas on game (scripts collection)\n\t\t\tBehaviorCodeExtension.apply(game, project, container);\n\t\t}\n\t}\n\n\t/**\n\t * Custom loader for loading custom containers like ui.TextField etc.\n\t * @param config the container's configuration\n\t * @param baseUrl the base url of the loader\n\t * @param container the currently created container\n\t * @param project the project JSON data (source data)\n\t */\n\tpublic static customContainerLoader(\n\t\tconfig: IProjectContainer,\n\t\tbaseUrl: string,\n\t\tcontainer?: Container,\n\t\tproject?: IProject\n\t): Container {\n\t\tconst split = config.type.split(\".\");\n\t\tif (split.length === 1) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet c: Container = null;\n\n\t\t// Create\n\t\tswitch (split[0]) {\n\t\t\tcase \"ui\":\n\t\t\t\tc = GDKUi[split[1]].parse(config, baseUrl, container, project);\n\t\t\t\tbreak;\n\t\t\tcase \"result\":\n\t\t\t\tc = GDKRules[split[1]].parse(config, baseUrl);\n\t\t\t\tbreak;\n\t\t\tcase \"rules\":\n\t\t\t\tc = GDKRules[split[1]].parse(config, baseUrl, container, project);\n\t\t\t\tbreak;\n\t\t\tcase \"spine\":\n\t\t\t\tc = GDKSpine[split[1]].parse(config, baseUrl);\n\t\t\t\tbreak;\n\t\t\tcase \"proton\":\n\t\t\t\tc = GDKProton[split[1]].parse(config, baseUrl);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Return\n\t\treturn c;\n\t}\n}\n","module.exports = require(\"falcon\");","module.exports = require(\"@gdk/core\");","module.exports = require(\"@gdk/core-pixi\");","module.exports = require(\"gsap\");","module.exports = require(\"howler\");","module.exports = require(\"i18next\");","module.exports = require(\"pixi.js\");"],"sourceRoot":""}