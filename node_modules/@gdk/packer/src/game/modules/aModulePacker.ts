import type { GameConfig } from "@gdk/backutils";

import type { IFilesList } from "../../tools/deliveryGenerator";

/**
 * Abstract Module Packer.
 */
export abstract class AModulePacker {
	protected readonly _gameDirectory: string;
	protected readonly _deliveryDirectory: string;
	protected readonly _deliveryVersion: string;
	protected readonly _gameConfiguration: GameConfig;

	/**
	 * ModulePacker constructor.
	 * @param gameDirectory root path of the game to pack.
	 * @param deliveryDirectory path for the output file.
	 * @param deliveryVersion version of the applet.
	 * @param gameConfiguration configuration of the game.
	 */
	public constructor(
		gameDirectory: string,
		deliveryDirectory: string,
		deliveryVersion: string,
		gameConfiguration: GameConfig
	) {
		this._gameDirectory = gameDirectory;
		this._deliveryDirectory = deliveryDirectory;
		this._deliveryVersion = deliveryVersion;
		this._gameConfiguration = gameConfiguration;
	}

	/**
	 * preparePack method to be implemented in each module packer.
	 * method will prepare files to be pack by the deliveryGenerator
	 * @returns an IFilesList when done.
	 */
	public abstract preparePack(): Promise<IFilesList>;

	/**
	 * @returns the packer name.
	 */
	protected abstract _getPackerName(): string;
}
