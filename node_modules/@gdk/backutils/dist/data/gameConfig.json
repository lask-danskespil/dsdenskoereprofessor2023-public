{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "title": "IF declaration file schema",
    "version": "3",
    "description": "Schema describing a declation file for an ITF game",
    "definitions": {
        "Semver": {
            "type": "string",
            "pattern": "^((([0-9]+)\\.([0-9]+)\\.([0-9]+)(?:-([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)$"
        },
        "Provider": {
            "type": "string",
            "enum": ["FDJ", "DKS", "NKT", "VKS", "SVS", "LOR"]
        },
        "StringCode": {
            "type": "string",
            "pattern": "^[\\w-]{1,32}$"
        }
    },
    "properties": {
        "masterGameCode": {
            "$ref": "#/definitions/StringCode",
            "description": "code of the master game this version belongs to"
        },
        "masterGameLabel": {
            "type": "string",
            "description": "optional label for the master game"
        },
        "engine": {
            "type": "string",
            "enum": ["ITG", "MTR", "MTP"]
        },
        "gameProvider": {
            "$ref": "#/definitions/Provider"
        },
        "gameDescription": {
            "type": "object",
            "description": "describes what the game supports",
            "properties": {
                "numberOfStakes": {
                    "type": "object",
                    "description": "number of different stakes the applet is able to display",
                    "properties": {
                        "min": {
                            "type": "integer",
                            "minimum": 1
                        },
                        "max": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                },
                "isJackpot": {
                    "type": "boolean",
                    "description": "Set to true if the game is itself a jackpot",
                    "default": false
                },
                "isConversion": {
                    "type": "boolean",
                    "description": "Set to true if the game is itself a conversion game",
                    "default": false
                },
                "jackpotCompatible": {
                    "type": "boolean",
                    "description": "Does the game support to be linked to a jackpot",
                    "default": true
                },
                "demoCompatible": {
                    "type": "boolean",
                    "description": "Does the game support demo mode",
                    "default": true
                },
                "replayCompatible": {
                    "type": "boolean",
                    "description": "Does the game support replay",
                    "default": true
                },
                "supportedBetModes": {
                    "type": "array",
                    "description": "Supported bet modes for ITG games",
                    "items": {
                        "type": "string",
                        "enum": ["BET_AUTO_CLAIM", "BET_MANUAL_CLAIM"]
                    }
                },
                "assets": {
                    "type": "object",
                    "properties": {
                        "themes": {
                            "type": "object",
                            "description": "Available game themes, keys are the name of the themes",
                            "patternProperties": {
                                "^[\\w-]{1,32}$": {
                                    "type": "string"
                                }
                            },
                            "additionalProperties": false
                        },
                        "i18n": {
                            "type": "object",
                            "description": "Supported languages, keys are the names of the locales",
                            "patternProperties": {
                                "^[a-z]{2}-[A-Z]{2}$": {
                                    "type": "string"
                                }
                            }
                        },
                        "behaviours": {
                            "type": "object",
                            "description": "Supported behaviours, keys are the names of the behaviours",
                            "patternProperties": {
                                "^[\\w-]{1,32}$": {
                                    "type": "string"
                                }
                            },
                            "additionalProperties": false
                        },
                        "services": {
                            "type": "object",
                            "description": "Supported services, keys are the names of the services",
                            "patternProperties": {
                                "^[\\w-]{1,32}$": {
                                    "type": "string"
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    "required": [
                        "themes",
                        "i18n",
                        "behaviours",
                        "services"
                    ]
                }
            },
            "required": ["assets"]
        },
        "lotteryGameCode": {
            "$ref": "#/definitions/StringCode",
            "description": "lottery game code, this code is the one used to communicate with IF endpoints"
        },
        "stakes": {
            "type": "array",
            "description": "stakes to be displayed by the game applet",
            "items": {
                "type": "object",
                "properties": {
                    "value": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "currency": {
                        "type": "string"
                    },
                    "jackpotDraws": {
                        "type": "integer",
                        "minimum": 1
                    }
                },
                "required": ["value", "currency"]
            }
        },
        "jackpot": {
            "type": "object",
            "description": "Tells if the lottery game is linked to a jackpot",
            "properties": {
                "enabled": {
                    "type": "boolean"
                }
            }
        },
        "demo": {
            "type": "object",
            "description": "Tells if the lottery game is available in demo mode",
            "properties": {
                "enabled": {
                    "type": "boolean"
                },
                "forceAuthentication": {
                    "type": "boolean"
                }
            }
        },
        "selectedBetMode": {
            "type": "string",
            "description": "Tells the lottery game which bet mode to use for ITG"
        },
        "selectedTheme": {
            "type": "string",
            "description": "Tells the lottery game which theme to display"
        },
        "selectedLocale": {
            "type": "string",
            "description": "Tells the lottery game which language to display"
        },
        "selectedBehaviour": {
            "type": "string",
            "description": "Tells the lottery game which behavior to use"
        },
        "gameParameters": {
            "type": "object",
            "description": "Game generic parameters"
        },
        "behavioursParameters": {
            "type": "object",
            "description": "Specific lottery dependant parameters",
            "patternProperties": {
                ".*": {
                    "type": "object",
                    "description": "Set of parameter fo a lottery",
                    "properties": {
                        "vi": {
                            "type": "string"
                        },
                        "pauseOnBlur": {
                            "type": "boolean"
                        },
                        "muteSoundOnBlur": {
                            "type": "boolean"
                        },
                        "skipSplash": {
                            "type": "boolean"
                        },
                        "skipHome": {
                            "type": "boolean"
                        },
                        "autoButton": {
                            "type": "boolean"
                        },
                        "demoButton": {
                            "type": "boolean"
                        }
                    },
                    "required": ["vi"]
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": true,
    "required": [
        "masterGameCode",
        "masterGameLabel",
        "engine",
        "gameProvider",
        "gameDescription",
        "lotteryGameCode",
        "stakes",
        "selectedTheme",
        "selectedLocale",
        "selectedBehaviour",
        "gameParameters",
        "behavioursParameters"
    ]
}
