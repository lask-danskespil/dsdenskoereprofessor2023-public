image: gdk-forge-framework:latest

.test: &test
  tags:
    - common
  only:
    - master
    - dev
    - merge_request

stages:
  - build
  - test

cache:
  paths:
    - .npmcache

before_script:
  - npm ci --prefer-offline --cache .npmcache

build:
  <<: *test
  stage: build
  script:
    - npm run build

lint:
  <<: *test
  stage: test
  script:
    - npm run lint

test:
  <<: *test
  stage: test
  script:
    - npm run test
