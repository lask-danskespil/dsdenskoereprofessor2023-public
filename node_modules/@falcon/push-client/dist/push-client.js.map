{"version":3,"sources":["webpack://pushClient/webpack/bootstrap","webpack://pushClient/./src/push/transport/WebSocketPushTransport.ts","webpack://pushClient/./src/push/transport/ServerSentEventsPushTransport.ts","webpack://pushClient/./src/push/transport/PushTransportMechanism.ts","webpack://pushClient/./src/push/transport/index.ts","webpack://pushClient/./src/push/PushSettings.ts","webpack://pushClient/./src/push/transport/PushTransport.ts","webpack://pushClient/./src/push/transport/MqttPushTransport.ts","webpack://pushClient/C:/dev/git/falcon-push/node_modules/event-source-polyfill/src/eventsource.js","webpack://pushClient/./src/push/transport/createTransport.ts","webpack://pushClient/C:/dev/git/falcon-push/node_modules/custom-event-polyfill/polyfill.js","webpack://pushClient/./src/push/PushChannelImpl.ts","webpack://pushClient/./src/push/PushImpl.ts","webpack://pushClient/./src/push/initializePush.ts","webpack://pushClient/./src/push/index.ts","webpack://pushClient/./src/push-client.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","WebSocketPushTransport","listener","this","connect","pushSettings","_this","url","secure","SCHEME_WSS","SCHEME_WS","hostName","undefined","port","path","topic","type","id","accessToken","socket","WebSocket","Promise","resolve","reject","onopen","onerror","e","console","log","disconnect","close","onclose","ping","ServerSentEventsPushTransport","SCHEME_HTTPS","SCHEME_HTTP","eventSource","EventSource","withCredentials","onmessage","onMessage","onError","onConnection","onDisconnection","pushMessage","JSON","parse","data","PushTransportMechanism","createTransport_1","createTransport","MqttPushTransport_1","MqttPushTransport","PushTransport_1","PushTransport","PushTransportMechanism_1","ServerSentEventsPushTransport_1","WebSocketPushTransport_1","PushSettings","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","setTimeout","clearTimeout","XMLHttpRequest","XDomainRequest","NativeEventSource","document","fetch","Response","TextDecoder","TextEncoder","AbortController","C","F","callback","then","result","error","originalFetch","options","TextDecoderPolyfill","bitsNeeded","codePoint","signal","abort","decode","octets","valid","shift","octetsCount","Error","string","length","octet","String","fromCharCode","encode","stream","supportsStreamOption","k","XHRWrapper","xhr","responseType","readyState","status","statusText","responseText","onprogress","onreadystatechange","_contentType","_xhr","_sendTimeout","_abort","toLowerCase","replace","charCodeAt","HeadersPolyfill","all","map","array","split","parts","join","_map","XHRTransport","HeadersWrapper","headers","_headers","FetchTransport","EventTarget","_listeners","throwError","Event","target","MessageEvent","lastEventId","ConnectionEvent","open","method","that","state","timeout","silent","onload","onabort","onStart","contentType","getResponseHeader","onProgress","onFinish","onTimeout","indexOf","setRequestHeader","getAllResponseHeaders","send","error1","onStartCallback","onProgressCallback","onFinishCallback","offset","chunk","slice","controller","textDecoder","credentials","cache","response","reader","body","getReader","cancel","readNextChunk","read","done","dispatchEvent","event","typeListeners","handleEvent","addEventListener","listeners","found","push","removeEventListener","filtered","WAITING","CONNECTING","OPEN","CLOSED","AFTER_CR","FIELD_START","FIELD","VALUE_START","VALUE","contentTypeRegExp","parseDuration","def","parseInt","clampDuration","Math","min","max","fire","f","EventSourcePolyfill","_close","es","Boolean","initialRetry","heartbeatTimeout","retry","wasActivity","stringify","CurrentTransport","Transport","isFetchSupported","transport","cancelFunction","currentState","dataBuffer","lastEventIdBuffer","eventTypeBuffer","textBuffer","fieldStart","valueStart","test","message","textChunk","position","field","requestURL","encodeURIComponent","requestHeaders","Accept","start","factory","v","apply","window","transportMechanism","transportListener","SERVER_SENT_EVENTS","WEBSOCKET","ce","CustomEvent","cancelable","preventDefault","defaultPrevented","params","evt","origPrevent","bubbles","detail","createEvent","initCustomEvent","transport_1","PushChannelImpl","settings","muteDiscard","eventTarget","createTextNode","reasonId","reasonParameters","mediaType","content","_a","sent","stop","mute","discardMessages","muteBuffer","unmute","buffer","forEach","ev","connectedEvent","emitEvent","disconnectedEvent","pushMessageEvent","PushChannelImpl_1","PushImpl","createChannel","PushImpl_1","initializePush","initializePush_1","PushSettings_1","push_1"],"mappings":"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","file":"push-client.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","import { PushTransport } from './PushTransport';\r\nimport { PushTransportListener } from './PushTransportListener';\r\nimport { PushSettings } from '../PushSettings';\r\n\r\n/**\r\n * WebSocket push transport implementation\r\n */\r\nclass WebSocketPushTransport implements PushTransport {\r\n    private static readonly SCHEME_WS: string = 'ws';\r\n    private static readonly SCHEME_WSS: string = 'wss';\r\n\r\n    private listener: PushTransportListener;\r\n    private socket: WebSocket;\r\n\r\n    /**\r\n     * Class constructor\r\n     * @param listener Listener\r\n     */\r\n    constructor(listener: PushTransportListener) {\r\n        this.listener = listener;\r\n    }\r\n\r\n    /**\r\n     * Connect the transport\r\n     * @param pushSettings Push settings\r\n     * @return Promise that resolves once the transport is connected\r\n     */\r\n    connect(pushSettings: PushSettings): Promise<void> {\r\n        let scheme: string = pushSettings.secure ? WebSocketPushTransport.SCHEME_WSS : WebSocketPushTransport.SCHEME_WS;\r\n        let url: string = `${scheme}://${pushSettings.hostName}`;\r\n\r\n        if (pushSettings.port !== undefined) {\r\n            url = `${url}:${pushSettings.port}`;\r\n        }\r\n\r\n        if (pushSettings.path !== undefined) {\r\n            url = `${url}${pushSettings.path}`;\r\n        }\r\n\r\n        url = `${url}/${pushSettings.topic.type}/${pushSettings.topic.id}`;\r\n        if (pushSettings.accessToken !== undefined) {\r\n            url = `${url}?accessToken=${pushSettings.accessToken}`;\r\n        }\r\n\r\n        this.socket = new WebSocket(url); // TODO: pass access token\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.onopen = () => resolve();\r\n            this.socket.onerror = e => {\r\n                console.log('WebSocket connection error', e);\r\n                reject(e);\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Disconnect the transport\r\n     * @return Promise that resolves once the transport is disconnected\r\n     */\r\n    disconnect(): Promise<void> {\r\n        this.socket.close();\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.onclose = () => resolve();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Ping the transport\r\n     */\r\n    ping(): void {\r\n        // TODO\r\n    }\r\n\r\n}\r\n\r\nexport {\r\n    WebSocketPushTransport\r\n};\r\n","import { PushTransport } from './PushTransport';\r\nimport { PushTransportListener } from './PushTransportListener';\r\nimport { PushSettings } from '../PushSettings';\r\n\r\n/**\r\n * SSE push transport implementation\r\n */\r\nclass ServerSentEventsPushTransport implements PushTransport {\r\n    private static readonly SCHEME_HTTP: string = 'http';\r\n    private static readonly SCHEME_HTTPS: string = 'https';\r\n\r\n    private eventSource!: EventSource;\r\n    private listener: PushTransportListener;\r\n\r\n    /**\r\n     * Class constructor\r\n     * @param listener Listener\r\n     */\r\n    constructor(listener: PushTransportListener) {\r\n        this.listener = listener;\r\n    }\r\n\r\n    /**\r\n     * Connect the transport\r\n     * @param pushSettings Push settings\r\n     * @return Promise that resolves once the transport is connected\r\n     */\r\n    connect(pushSettings: PushSettings): Promise<void> {\r\n        let scheme: string = pushSettings.secure ? ServerSentEventsPushTransport.SCHEME_HTTPS : ServerSentEventsPushTransport.SCHEME_HTTP;\r\n        let url: string = `${scheme}://${pushSettings.hostName}`;\r\n\r\n        if (pushSettings.port !== undefined) {\r\n            url = `${url}:${pushSettings.port}`;\r\n        }\r\n\r\n        if (pushSettings.path !== undefined) {\r\n            url = `${url}${pushSettings.path}`;\r\n        }\r\n\r\n        url = `${url}/${pushSettings.topic.type}/${pushSettings.topic.id}`;\r\n\r\n        if (pushSettings.accessToken !== undefined) {\r\n            url = `${url}?accessToken=${pushSettings.accessToken}`;\r\n        }\r\n\r\n        this.eventSource = new EventSource(url, {\r\n            withCredentials: true\r\n        });\r\n        this.eventSource.onmessage = e => this.onMessage(e);\r\n\r\n        return new Promise<void>((resolve, reject) => {\r\n            this.eventSource.onopen = () => {\r\n                this.eventSource.onerror = e => this.onError(e);\r\n                this.listener.onConnection();\r\n                resolve();\r\n            };\r\n            this.eventSource.onerror = e => reject();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Disconnect the transport\r\n     * @return Promise that resolves once the transport is disconnected\r\n     */\r\n    async disconnect(): Promise<void> {\r\n        this.eventSource.close();\r\n        this.eventSource = undefined;\r\n        this.listener.onDisconnection(null, null);\r\n    }\r\n\r\n    /**\r\n     * Ping the transport\r\n     */\r\n    ping(): void {\r\n        // Nothing to do\r\n    }\r\n\r\n    /**\r\n     * Event triggered when a message gets received\r\n     * @param e Message event\r\n     */\r\n    private onMessage(e: MessageEvent): void {\r\n        let pushMessage: any = JSON.parse(e.data);\r\n        this.listener.onMessage(pushMessage.type, pushMessage.data);\r\n    }\r\n\r\n    /**\r\n     * Event triggered when an error is detected\r\n     * @param e Message event\r\n     */\r\n    private onError(e: MessageEvent): void {\r\n        this.listener.onDisconnection(null, null);\r\n    }\r\n\r\n}\r\n\r\nexport {\r\n    ServerSentEventsPushTransport\r\n};\r\n","\r\n/**\r\n * Push transport mechanism\r\n */\r\nenum PushTransportMechanism {\r\n    MQTT = 1,\r\n    SERVER_SENT_EVENTS = 2,\r\n    WEBSOCKET = 3\r\n}\r\n\r\nexport {\r\n    PushTransportMechanism\r\n};\r\n","export { createTransport } from './createTransport';\r\nexport { MqttPushTransport } from './MqttPushTransport';\r\nexport { PushTransport } from './PushTransport';\r\nexport { PushTransportListener } from './PushTransportListener';\r\nexport { PushTransportMechanism } from './PushTransportMechanism';\r\nexport { ServerSentEventsPushTransport } from './ServerSentEventsPushTransport';\r\nexport { WebSocketPushTransport } from './WebSocketPushTransport';\r\n","import { PushTopic } from './PushTopic';\r\nimport { PushTransportMechanism } from './transport';\r\n\r\n/**\r\n * Push settings\r\n */\r\nclass PushSettings {\r\n    topic: PushTopic;\r\n    transport: PushTransportMechanism;\r\n    secure?: boolean;\r\n    hostName: string;\r\n    port?: number;\r\n    path?: string;\r\n    accessToken?: string;\r\n}\r\n\r\nexport {\r\n    PushSettings\r\n};\r\n","import { PushSettings } from '../PushSettings';\r\n\r\n/**\r\n * Push transport interface\r\n */\r\nabstract class PushTransport {\r\n\r\n    /**\r\n     * Connect the transport\r\n     * @param pushSettings Push settings\r\n     * @return Promise that resolves once the transport is connected\r\n     */\r\n    abstract connect(pushSettings: PushSettings): Promise<void>;\r\n\r\n    /**\r\n     * Disconnect the transport\r\n     * @return Promise that resolves once the transport is disconnected\r\n     */\r\n    abstract disconnect(): Promise<void>;\r\n\r\n    /**\r\n     * Ping the transport\r\n     */\r\n    abstract ping(): void;\r\n\r\n}\r\n\r\nexport {\r\n    PushTransport\r\n};\r\n","import { PushTransport } from './PushTransport';\r\nimport { PushSettings } from '../PushSettings';\r\n\r\n/**\r\n * MQTT push transport\r\n */\r\nclass MqttPushTransport implements PushTransport {\r\n\r\n    /**\r\n     * Connect the transport\r\n     * @param hostName    Host name\r\n     * @param port        Port number\r\n     * @param path        Path\r\n     * @param accessToken Access token\r\n     * @return Promise that resolves once the transport is connected\r\n     */\r\n    async connect(pushSettings: PushSettings): Promise<void> {\r\n\r\n    }\r\n\r\n    /**\r\n     * Disconnect the transport\r\n     * @return Promise that resolves once the transport is disconnected\r\n     */\r\n    async disconnect(): Promise<void> {\r\n\r\n    }\r\n\r\n    /**\r\n     * Ping the transport\r\n     */\r\n    ping(): void {\r\n\r\n    }\r\n\r\n}\r\n\r\nexport {\r\n    MqttPushTransport\r\n};\r\n","/** @license\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\r\n\r\n/*jslint indent: 2, vars: true, plusplus: true */\r\n/*global setTimeout, clearTimeout */\r\n\r\n(function (global) {\r\n  \"use strict\";\r\n\r\n  var setTimeout = global.setTimeout;\r\n  var clearTimeout = global.clearTimeout;\r\n  var XMLHttpRequest = global.XMLHttpRequest;\r\n  var XDomainRequest = global.XDomainRequest;\r\n  var NativeEventSource = global.EventSource;\r\n  var document = global.document;\r\n  var Promise = global.Promise;\r\n  var fetch = global.fetch;\r\n  var Response = global.Response;\r\n  var TextDecoder = global.TextDecoder;\r\n  var TextEncoder = global.TextEncoder;\r\n  var AbortController = global.AbortController;\r\n\r\n  if (Object.create == undefined) {\r\n    Object.create = function (C) {\r\n      function F(){}\r\n      F.prototype = C;\r\n      return new F();\r\n    };\r\n  }\r\n\r\n  // ?\r\n  if (Promise != undefined && Promise.prototype[\"finally\"] == undefined) {\r\n    Promise.prototype[\"finally\"] = function (callback) {\r\n      return this.then(function (result) {\r\n        return Promise.resolve(callback()).then(function () {\r\n          return result;\r\n        });\r\n      }, function (error) {\r\n        return Promise.resolve(callback()).then(function () {\r\n          throw error;\r\n        });\r\n      });\r\n    };\r\n  }\r\n\r\n  // see #118, #123, #125\r\n  if (fetch != undefined && true) {\r\n    var originalFetch = fetch;\r\n    fetch = function (url, options) {\r\n      return Promise.resolve(originalFetch(url, options));\r\n    };\r\n  }\r\n\r\n  if (AbortController == undefined) {\r\n    AbortController = function () {\r\n      this.signal = null;\r\n      this.abort = function () {\r\n      };\r\n    };\r\n  }\r\n\r\n  function TextDecoderPolyfill() {\r\n    this.bitsNeeded = 0;\r\n    this.codePoint = 0;\r\n  }\r\n\r\n  TextDecoderPolyfill.prototype.decode = function (octets) {\r\n    function valid(codePoint, shift, octetsCount) {\r\n      if (octetsCount === 1) {\r\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\r\n      }\r\n      if (octetsCount === 2) {\r\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\r\n      }\r\n      if (octetsCount === 3) {\r\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\r\n      }\r\n      throw new Error();\r\n    }\r\n    function octetsCount(bitsNeeded, codePoint) {\r\n      if (bitsNeeded === 6 * 1) {\r\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\r\n      }\r\n      if (bitsNeeded === 6 * 2) {\r\n        return codePoint > 15 ? 3 : 2;\r\n      }\r\n      if (bitsNeeded === 6 * 3) {\r\n        return 3;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var REPLACER = 0xFFFD;\r\n    var string = \"\";\r\n    var bitsNeeded = this.bitsNeeded;\r\n    var codePoint = this.codePoint;\r\n    for (var i = 0; i < octets.length; i += 1) {\r\n      var octet = octets[i];\r\n      if (bitsNeeded !== 0) {\r\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n          string += String.fromCharCode(codePoint);\r\n        }\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (octet >= 0 && octet <= 127) {\r\n          bitsNeeded = 0;\r\n          codePoint = octet;\r\n        } else if (octet >= 192 && octet <= 223) {\r\n          bitsNeeded = 6 * 1;\r\n          codePoint = octet & 31;\r\n        } else if (octet >= 224 && octet <= 239) {\r\n          bitsNeeded = 6 * 2;\r\n          codePoint = octet & 15;\r\n        } else if (octet >= 240 && octet <= 247) {\r\n          bitsNeeded = 6 * 3;\r\n          codePoint = octet & 7;\r\n        } else {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n      } else {\r\n        bitsNeeded -= 6;\r\n        codePoint = codePoint << 6 | octet & 63;\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (codePoint <= 0xFFFF) {\r\n          string += String.fromCharCode(codePoint);\r\n        } else {\r\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\r\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\r\n        }\r\n      }\r\n    }\r\n    this.bitsNeeded = bitsNeeded;\r\n    this.codePoint = codePoint;\r\n    return string;\r\n  };\r\n\r\n  // Firefox < 38 throws an error with stream option\r\n  var supportsStreamOption = function () {\r\n    try {\r\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {stream: true}) === \"test\";\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // IE, Edge\r\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\r\n    TextDecoder = TextDecoderPolyfill;\r\n  }\r\n\r\n  var k = function () {\r\n  };\r\n\r\n  function XHRWrapper(xhr) {\r\n    this.withCredentials = false;\r\n    this.responseType = \"\";\r\n    this.readyState = 0;\r\n    this.status = 0;\r\n    this.statusText = \"\";\r\n    this.responseText = \"\";\r\n    this.onprogress = k;\r\n    this.onreadystatechange = k;\r\n    this._contentType = \"\";\r\n    this._xhr = xhr;\r\n    this._sendTimeout = 0;\r\n    this._abort = k;\r\n  }\r\n\r\n  XHRWrapper.prototype.open = function (method, url) {\r\n    this._abort(true);\r\n\r\n    var that = this;\r\n    var xhr = this._xhr;\r\n    var state = 1;\r\n    var timeout = 0;\r\n\r\n    this._abort = function (silent) {\r\n      if (that._sendTimeout !== 0) {\r\n        clearTimeout(that._sendTimeout);\r\n        that._sendTimeout = 0;\r\n      }\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        xhr.onload = k;\r\n        xhr.onerror = k;\r\n        xhr.onabort = k;\r\n        xhr.onprogress = k;\r\n        xhr.onreadystatechange = k;\r\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\r\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\r\n        xhr.abort();\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        if (!silent) {\r\n          that.readyState = 4;\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n      state = 0;\r\n    };\r\n\r\n    var onStart = function () {\r\n      if (state === 1) {\r\n        //state = 2;\r\n        var status = 0;\r\n        var statusText = \"\";\r\n        var contentType = undefined;\r\n        if (!(\"contentType\" in xhr)) {\r\n          try {\r\n            status = xhr.status;\r\n            statusText = xhr.statusText;\r\n            contentType = xhr.getResponseHeader(\"Content-Type\");\r\n          } catch (error) {\r\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\r\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\r\n            status = 0;\r\n            statusText = \"\";\r\n            contentType = undefined;\r\n            // Firefox < 14, Chrome ?, Safari ?\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\r\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\r\n          }\r\n        } else {\r\n          status = 200;\r\n          statusText = \"OK\";\r\n          contentType = xhr.contentType;\r\n        }\r\n        if (status !== 0) {\r\n          state = 2;\r\n          that.readyState = 2;\r\n          that.status = status;\r\n          that.statusText = statusText;\r\n          that._contentType = contentType;\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n    };\r\n    var onProgress = function () {\r\n      onStart();\r\n      if (state === 2 || state === 3) {\r\n        state = 3;\r\n        var responseText = \"\";\r\n        try {\r\n          responseText = xhr.responseText;\r\n        } catch (error) {\r\n          // IE 8 - 9 with XMLHttpRequest\r\n        }\r\n        that.readyState = 3;\r\n        that.responseText = responseText;\r\n        that.onprogress();\r\n      }\r\n    };\r\n    var onFinish = function () {\r\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\r\n      // IE 8 fires \"onload\" without \"onprogress\"\r\n      onProgress();\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        that.readyState = 4;\r\n        that.onreadystatechange();\r\n      }\r\n    };\r\n    var onReadyStateChange = function () {\r\n      if (xhr != undefined) { // Opera 12\r\n        if (xhr.readyState === 4) {\r\n          onFinish();\r\n        } else if (xhr.readyState === 3) {\r\n          onProgress();\r\n        } else if (xhr.readyState === 2) {\r\n          onStart();\r\n        }\r\n      }\r\n    };\r\n    var onTimeout = function () {\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 500);\r\n      if (xhr.readyState === 3) {\r\n        onProgress();\r\n      }\r\n    };\r\n\r\n    // XDomainRequest#abort removes onprogress, onerror, onload\r\n    xhr.onload = onFinish;\r\n    xhr.onerror = onFinish;\r\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\r\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\r\n    // https://code.google.com/p/chromium/issues/detail?id=153570\r\n    // IE 8 fires \"onload\" without \"onprogress\r\n    xhr.onabort = onFinish;\r\n\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723    \r\n    if (!(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype)) {\r\n      xhr.onprogress = onProgress;\r\n    }\r\n\r\n    // IE 8 - 9 (XMLHTTPRequest)\r\n    // Opera < 12\r\n    // Firefox < 3.5\r\n    // Firefox 3.5 - 3.6 - ? < 9.0\r\n    // onprogress is not fired sometimes or delayed\r\n    // see also #64\r\n    xhr.onreadystatechange = onReadyStateChange;\r\n\r\n    if (\"contentType\" in xhr) {\r\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\r\n    }\r\n    xhr.open(method, url, true);\r\n\r\n    if (\"readyState\" in xhr) {\r\n      // workaround for Opera 12 issue with \"progress\" events\r\n      // #91\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 0);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.abort = function () {\r\n    this._abort(false);\r\n  };\r\n  XHRWrapper.prototype.getResponseHeader = function (name) {\r\n    return this._contentType;\r\n  };\r\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\r\n    var xhr = this._xhr;\r\n    if (\"setRequestHeader\" in xhr) {\r\n      xhr.setRequestHeader(name, value);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\r\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() : \"\";\r\n  };\r\n  XHRWrapper.prototype.send = function () {\r\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\r\n    if (!(\"ontimeout\" in XMLHttpRequest.prototype) &&\r\n        document != undefined &&\r\n        document.readyState != undefined &&\r\n        document.readyState !== \"complete\") {\r\n      var that = this;\r\n      that._sendTimeout = setTimeout(function () {\r\n        that._sendTimeout = 0;\r\n        that.send();\r\n      }, 4);\r\n      return;\r\n    }\r\n\r\n    var xhr = this._xhr;\r\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\r\n    xhr.withCredentials = this.withCredentials;\r\n    xhr.responseType = this.responseType;\r\n    try {\r\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\r\n      xhr.send(undefined);\r\n    } catch (error1) {\r\n      // Safari 5.1.7, Opera 12\r\n      throw error1;\r\n    }\r\n  };\r\n\r\n  function toLowerCase(name) {\r\n    return name.replace(/[A-Z]/g, function (c) {\r\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\r\n    });\r\n  }\r\n\r\n  function HeadersPolyfill(all) {\r\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\r\n    var map = Object.create(null);\r\n    var array = all.split(\"\\r\\n\");\r\n    for (var i = 0; i < array.length; i += 1) {\r\n      var line = array[i];\r\n      var parts = line.split(\": \");\r\n      var name = parts.shift();\r\n      var value = parts.join(\": \");\r\n      map[toLowerCase(name)] = value;\r\n    }\r\n    this._map = map;\r\n  }\r\n  HeadersPolyfill.prototype.get = function (name) {\r\n    return this._map[toLowerCase(name)];\r\n  };\r\n\r\n  function XHRTransport() {\r\n  }\r\n\r\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    xhr.open(\"GET\", url);\r\n    var offset = 0;\r\n    xhr.onprogress = function () {\r\n      var responseText = xhr.responseText;\r\n      var chunk = responseText.slice(offset);\r\n      offset += chunk.length;\r\n      onProgressCallback(chunk);\r\n    };\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === 2) {\r\n        var status = xhr.status;\r\n        var statusText = xhr.statusText;\r\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\r\n        var headers = xhr.getAllResponseHeaders();\r\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers), function () {\r\n          xhr.abort();\r\n        });\r\n      } else if (xhr.readyState === 4) {\r\n        onFinishCallback();\r\n      }\r\n    };\r\n    xhr.withCredentials = withCredentials;\r\n    xhr.responseType = \"text\";\r\n    for (var name in headers) {\r\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n        xhr.setRequestHeader(name, headers[name]);\r\n      }\r\n    }\r\n    xhr.send();\r\n  };\r\n  \r\n  function HeadersWrapper(headers) {\r\n    this._headers = headers;\r\n  }\r\n  HeadersWrapper.prototype.get = function (name) {\r\n    return this._headers.get(name);\r\n  };\r\n\r\n  function FetchTransport() {\r\n  }\r\n\r\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    var controller = new AbortController();\r\n    var signal = controller.signal;// see #120\r\n    var textDecoder = new TextDecoder();\r\n    fetch(url, {\r\n      headers: headers,\r\n      credentials: withCredentials ? \"include\" : \"same-origin\",\r\n      signal: signal,\r\n      cache: \"no-store\"\r\n    }).then(function (response) {\r\n      var reader = response.body.getReader();\r\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers), function () {\r\n        controller.abort();\r\n        reader.cancel();\r\n      });\r\n      return new Promise(function (resolve, reject) {\r\n        var readNextChunk = function () {\r\n          reader.read().then(function (result) {\r\n            if (result.done) {\r\n              //Note: bytes in textDecoder are ignored\r\n              resolve(undefined);\r\n            } else {\r\n              var chunk = textDecoder.decode(result.value, {stream: true});\r\n              onProgressCallback(chunk);\r\n              readNextChunk();\r\n            }\r\n          })[\"catch\"](function (error) {\r\n            reject(error);\r\n          });\r\n        };\r\n        readNextChunk();\r\n      });\r\n    })[\"finally\"](function () {\r\n      onFinishCallback();\r\n    });\r\n  };\r\n\r\n  function EventTarget() {\r\n    this._listeners = Object.create(null);\r\n  }\r\n\r\n  function throwError(e) {\r\n    setTimeout(function () {\r\n      throw e;\r\n    }, 0);\r\n  }\r\n\r\n  EventTarget.prototype.dispatchEvent = function (event) {\r\n    event.target = this;\r\n    var typeListeners = this._listeners[event.type];\r\n    if (typeListeners != undefined) {\r\n      var length = typeListeners.length;\r\n      for (var i = 0; i < length; i += 1) {\r\n        var listener = typeListeners[i];\r\n        try {\r\n          if (typeof listener.handleEvent === \"function\") {\r\n            listener.handleEvent(event);\r\n          } else {\r\n            listener.call(this, event);\r\n          }\r\n        } catch (e) {\r\n          throwError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  EventTarget.prototype.addEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners == undefined) {\r\n      typeListeners = [];\r\n      listeners[type] = typeListeners;\r\n    }\r\n    var found = false;\r\n    for (var i = 0; i < typeListeners.length; i += 1) {\r\n      if (typeListeners[i] === listener) {\r\n        found = true;\r\n      }\r\n    }\r\n    if (!found) {\r\n      typeListeners.push(listener);\r\n    }\r\n  };\r\n  EventTarget.prototype.removeEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners != undefined) {\r\n      var filtered = [];\r\n      for (var i = 0; i < typeListeners.length; i += 1) {\r\n        if (typeListeners[i] !== listener) {\r\n          filtered.push(typeListeners[i]);\r\n        }\r\n      }\r\n      if (filtered.length === 0) {\r\n        delete listeners[type];\r\n      } else {\r\n        listeners[type] = filtered;\r\n      }\r\n    }\r\n  };\r\n\r\n  function Event(type) {\r\n    this.type = type;\r\n    this.target = undefined;\r\n  }\r\n\r\n  function MessageEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.data = options.data;\r\n    this.lastEventId = options.lastEventId;\r\n  }\r\n\r\n  MessageEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ConnectionEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.status = options.status;\r\n    this.statusText = options.statusText;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  ConnectionEvent.prototype = Object.create(Event.prototype);\r\n\r\n  var WAITING = -1;\r\n  var CONNECTING = 0;\r\n  var OPEN = 1;\r\n  var CLOSED = 2;\r\n\r\n  var AFTER_CR = -1;\r\n  var FIELD_START = 0;\r\n  var FIELD = 1;\r\n  var VALUE_START = 2;\r\n  var VALUE = 3;\r\n\r\n  var contentTypeRegExp = /^text\\/event\\-stream;?(\\s*charset\\=utf\\-8)?$/i;\r\n\r\n  var MINIMUM_DURATION = 1000;\r\n  var MAXIMUM_DURATION = 18000000;\r\n\r\n  var parseDuration = function (value, def) {\r\n    var n = parseInt(value, 10);\r\n    if (n !== n) {\r\n      n = def;\r\n    }\r\n    return clampDuration(n);\r\n  };\r\n  var clampDuration = function (n) {\r\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\r\n  };\r\n\r\n  var fire = function (that, f, event) {\r\n    try {\r\n      if (typeof f === \"function\") {\r\n        f.call(that, event);\r\n      }\r\n    } catch (e) {\r\n      throwError(e);\r\n    }\r\n  };\r\n\r\n  function EventSourcePolyfill(url, options) {\r\n    EventTarget.call(this);\r\n\r\n    this.onopen = undefined;\r\n    this.onmessage = undefined;\r\n    this.onerror = undefined;\r\n\r\n    this.url = undefined;\r\n    this.readyState = undefined;\r\n    this.withCredentials = undefined;\r\n\r\n    this._close = undefined;\r\n\r\n    start(this, url, options);\r\n  }\r\n\r\n  function getBestTransport() {\r\n    return (XMLHttpRequest != undefined && (\"withCredentials\" in XMLHttpRequest.prototype)) || XDomainRequest == undefined\r\n      ? XMLHttpRequest\r\n      : XDomainRequest;\r\n  }\r\n\r\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\r\n\r\n  function start(es, url, options) {\r\n    url = String(url);\r\n    var withCredentials = options != undefined && Boolean(options.withCredentials);\r\n\r\n    var initialRetry = clampDuration(1000);\r\n    var heartbeatTimeout = options != undefined && options.heartbeatTimeout != undefined ? parseDuration(options.heartbeatTimeout, 45000) : clampDuration(45000);\r\n\r\n    var lastEventId = \"\";\r\n    var retry = initialRetry;\r\n    var wasActivity = false;\r\n    var headers = options != undefined && options.headers != undefined ? JSON.parse(JSON.stringify(options.headers)) : undefined;\r\n    var CurrentTransport = options != undefined && options.Transport != undefined ? options.Transport : getBestTransport();\r\n    var xhr = isFetchSupported && !(options != undefined && options.Transport != undefined) ? undefined : new XHRWrapper(new CurrentTransport());\r\n    var transport = xhr == undefined ? new FetchTransport() : new XHRTransport();\r\n    var cancelFunction = undefined;\r\n    var timeout = 0;\r\n    var currentState = WAITING;\r\n    var dataBuffer = \"\";\r\n    var lastEventIdBuffer = \"\";\r\n    var eventTypeBuffer = \"\";\r\n\r\n    var textBuffer = \"\";\r\n    var state = FIELD_START;\r\n    var fieldStart = 0;\r\n    var valueStart = 0;\r\n\r\n    var onStart = function (status, statusText, contentType, headers, cancel) {\r\n      if (currentState === CONNECTING) {\r\n        cancelFunction = cancel;\r\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\r\n          currentState = OPEN;\r\n          wasActivity = true;\r\n          retry = initialRetry;\r\n          es.readyState = OPEN;\r\n          var event = new ConnectionEvent(\"open\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onopen, event);\r\n        } else {\r\n          var message = \"\";\r\n          if (status !== 200) {\r\n            if (statusText) {\r\n              statusText = statusText.replace(/\\s+/g, \" \");\r\n            }\r\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\r\n          } else {\r\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\r\n          }\r\n          throwError(new Error(message));\r\n          close();\r\n          var event = new ConnectionEvent(\"error\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onerror, event);\r\n        }\r\n      }\r\n    };\r\n\r\n    var onProgress = function (textChunk) {\r\n      if (currentState === OPEN) {\r\n        var n = -1;\r\n        for (var i = 0; i < textChunk.length; i += 1) {\r\n          var c = textChunk.charCodeAt(i);\r\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\r\n            n = i;\r\n          }\r\n        }\r\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\r\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\r\n        if (chunk !== \"\") {\r\n          wasActivity = true;\r\n        }\r\n        for (var position = 0; position < chunk.length; position += 1) {\r\n          var c = chunk.charCodeAt(position);\r\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\r\n            state = FIELD_START;\r\n          } else {\r\n            if (state === AFTER_CR) {\r\n              state = FIELD_START;\r\n            }\r\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\r\n              if (state !== FIELD_START) {\r\n                if (state === FIELD) {\r\n                  valueStart = position + 1;\r\n                }\r\n                var field = chunk.slice(fieldStart, valueStart - 1);\r\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\r\n                if (field === \"data\") {\r\n                  dataBuffer += \"\\n\";\r\n                  dataBuffer += value;\r\n                } else if (field === \"id\") {\r\n                  lastEventIdBuffer = value;\r\n                } else if (field === \"event\") {\r\n                  eventTypeBuffer = value;\r\n                } else if (field === \"retry\") {\r\n                  initialRetry = parseDuration(value, initialRetry);\r\n                  retry = initialRetry;\r\n                } else if (field === \"heartbeatTimeout\") {\r\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\r\n                  if (timeout !== 0) {\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(function () {\r\n                      onTimeout();\r\n                    }, heartbeatTimeout);\r\n                  }\r\n                }\r\n              }\r\n              if (state === FIELD_START) {\r\n                if (dataBuffer !== \"\") {\r\n                  lastEventId = lastEventIdBuffer;\r\n                  if (eventTypeBuffer === \"\") {\r\n                    eventTypeBuffer = \"message\";\r\n                  }\r\n                  var event = new MessageEvent(eventTypeBuffer, {\r\n                    data: dataBuffer.slice(1),\r\n                    lastEventId: lastEventIdBuffer\r\n                  });\r\n                  es.dispatchEvent(event);\r\n                  if (eventTypeBuffer === \"message\") {\r\n                    fire(es, es.onmessage, event);\r\n                  }\r\n                  if (currentState === CLOSED) {\r\n                    return;\r\n                  }\r\n                }\r\n                dataBuffer = \"\";\r\n                eventTypeBuffer = \"\";\r\n              }\r\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\r\n            } else {\r\n              if (state === FIELD_START) {\r\n                fieldStart = position;\r\n                state = FIELD;\r\n              }\r\n              if (state === FIELD) {\r\n                if (c === \":\".charCodeAt(0)) {\r\n                  valueStart = position + 1;\r\n                  state = VALUE_START;\r\n                }\r\n              } else if (state === VALUE_START) {\r\n                state = VALUE;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var onFinish = function () {\r\n      if (currentState === OPEN || currentState === CONNECTING) {\r\n        currentState = WAITING;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        timeout = setTimeout(function () {\r\n          onTimeout();\r\n        }, retry);\r\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\r\n\r\n        es.readyState = CONNECTING;\r\n        var event = new Event(\"error\");\r\n        es.dispatchEvent(event);\r\n        fire(es, es.onerror, event);\r\n      }\r\n    };\r\n\r\n    var close = function () {\r\n      currentState = CLOSED;\r\n      if (cancelFunction != undefined) {\r\n        cancelFunction();\r\n        cancelFunction = undefined;\r\n      }\r\n      if (timeout !== 0) {\r\n        clearTimeout(timeout);\r\n        timeout = 0;\r\n      }\r\n      es.readyState = CLOSED;\r\n    };\r\n\r\n    var onTimeout = function () {\r\n      timeout = 0;\r\n\r\n      if (currentState !== WAITING) {\r\n        if (!wasActivity && cancelFunction != undefined) {\r\n          throwError(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds. Reconnecting.\"));\r\n          cancelFunction();\r\n          cancelFunction = undefined;\r\n        } else {\r\n          wasActivity = false;\r\n          timeout = setTimeout(function () {\r\n            onTimeout();\r\n          }, heartbeatTimeout);\r\n        }\r\n        return;\r\n      }\r\n\r\n      wasActivity = false;\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, heartbeatTimeout);\r\n\r\n      currentState = CONNECTING;\r\n      dataBuffer = \"\";\r\n      eventTypeBuffer = \"\";\r\n      lastEventIdBuffer = lastEventId;\r\n      textBuffer = \"\";\r\n      fieldStart = 0;\r\n      valueStart = 0;\r\n      state = FIELD_START;\r\n\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\r\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\r\n      var requestURL = url;\r\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\r\n        if (lastEventId !== \"\") {\r\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"lastEventId=\" + encodeURIComponent(lastEventId);\r\n        }\r\n      }\r\n      var requestHeaders = {};\r\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\r\n      if (headers != undefined) {\r\n        for (var name in headers) {\r\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n            requestHeaders[name] = headers[name];\r\n          }\r\n        }\r\n      }\r\n      try {\r\n        transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\r\n      } catch (error) {\r\n        close();\r\n        throw error;\r\n      }\r\n    };\r\n\r\n    es.url = url;\r\n    es.readyState = CONNECTING;\r\n    es.withCredentials = withCredentials;\r\n    es._close = close;\r\n\r\n    onTimeout();\r\n  }\r\n\r\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\r\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.prototype.OPEN = OPEN;\r\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.close = function () {\r\n    this._close();\r\n  };\r\n\r\n  EventSourcePolyfill.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.OPEN = OPEN;\r\n  EventSourcePolyfill.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.withCredentials = undefined;\r\n\r\n  (function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n      var v = factory(exports);\r\n      if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n      define([\"exports\"], factory);\r\n    }\r\n    else {\r\n      factory(global);\r\n    }\r\n  })(function (exports) {\r\n    exports.EventSourcePolyfill = EventSourcePolyfill;\r\n    exports.NativeEventSource = NativeEventSource;\r\n    if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\r\n      // Why replace a native EventSource ?\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\r\n      // https://code.google.com/p/chromium/issues/detail?id=260144\r\n      // https://code.google.com/p/chromium/issues/detail?id=225654\r\n      // ...\r\n      exports.EventSource = EventSourcePolyfill;\r\n    }\r\n  });\r\n}(typeof window !== 'undefined' ? window : this));\r\n","import { PushTransport } from './PushTransport';\r\nimport { PushTransportListener } from './PushTransportListener';\r\nimport { PushTransportMechanism } from './PushTransportMechanism';\r\nimport { ServerSentEventsPushTransport } from './ServerSentEventsPushTransport';\r\nimport { WebSocketPushTransport } from './WebSocketPushTransport';\r\n\r\n/**\r\n * Create a transport\r\n * @param transportMechanism Transport mechanism\r\n * @param transportListener  Transport listener\r\n * @return Push transport\r\n */\r\nfunction createTransport(transportMechanism: PushTransportMechanism, transportListener: PushTransportListener): PushTransport {\r\n    let transport: PushTransport;\r\n\r\n    switch (transportMechanism) {\r\n    case PushTransportMechanism.SERVER_SENT_EVENTS:\r\n        transport = new ServerSentEventsPushTransport(transportListener);\r\n        break;\r\n    case PushTransportMechanism.WEBSOCKET:\r\n        transport = new WebSocketPushTransport(transportListener);\r\n        break;\r\n    default:\r\n        throw new Error('Unknown push transport mechanism ' + transportMechanism);\r\n    }\r\n\r\n    return transport;\r\n}\r\n\r\nexport {\r\n    createTransport\r\n};\r\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {\n        bubbles: false,\n        cancelable: false,\n        detail: undefined\n      };\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","import { ConnectedEvent, ConnectedEventDetail, DisconnectedEvent, DisconnectedEventDetail, PushEvent, PushEventDetail, PushEventMap, PushMessageEvent, PushMessageEventDetail } from './event';\r\nimport { createTransport, PushTransport } from './transport';\r\nimport { PushChannel } from './PushChannel';\r\nimport { PushSettings } from './PushSettings';\r\n\r\n/**\r\n * Push channel implementation\r\n */\r\nclass PushChannelImpl implements PushChannel {\r\n    private eventTarget: Text;\r\n    private settings: PushSettings;\r\n    private transport: PushTransport;\r\n    private muteBuffer: Array<PushEvent<PushEventDetail>>|undefined;\r\n    private muteDiscard: boolean = false;\r\n\r\n    /**\r\n     * Class constructor\r\n     * @param settings Push settings\r\n     */\r\n    constructor(settings: PushSettings) {\r\n        this.settings = settings;\r\n        this.eventTarget = document.createTextNode(null);\r\n        this.transport = createTransport(settings.transport, {\r\n            onConnection: () => this.onConnection(),\r\n            onDisconnection: (reasonId, reasonParameters) => this.onDisconnection(reasonId, reasonParameters),\r\n            onMessage: <T>(mediaType, content) => this.onMessage(mediaType, content)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Start listening for push messages\r\n     * @return Promise that resolves once the channel is ready\r\n     */\r\n    async start(): Promise<void> {\r\n        await this.transport.connect(this.settings);\r\n    }\r\n\r\n    /**\r\n     * Stop listening for push messages\r\n     * @return Promise that resolves once the channel is stopped\r\n     */\r\n    async stop(): Promise<void> {\r\n        await this.transport.disconnect();\r\n    }\r\n\r\n    /**\r\n     * Mute the push mechanism\r\n     * <p>While muted, messages are still received but are buffered and not sent to the listener.</p>\r\n     * <p>Once unmuted, all buffered messages are sent.</p>\r\n     * @param discardMessages While muted, discard all received messages\r\n     */\r\n    mute(discardMessages?: boolean): void {\r\n        this.muteDiscard = !!discardMessages;\r\n\r\n        if (this.muteBuffer === undefined || this.muteDiscard) {\r\n            this.muteBuffer = [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Unmute the push mechansm\r\n     * <p>Resumes sending messages to the event listeners, after sending all messages that may have ended up in the buffer.</p>\r\n     */\r\n    unmute(): void {\r\n        if (this.muteBuffer) {\r\n            let buffer: Array<PushEvent<PushEventDetail>> = this.muteBuffer;\r\n            this.muteBuffer = undefined;\r\n            buffer.forEach(ev => this.eventTarget.dispatchEvent(ev as Event));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add an event listener\r\n     * @param type     Event type\r\n     * @param listener Event listener\r\n     * @param options  Options\r\n     */\r\n    addEventListener<K extends keyof PushEventMap>(type: K, listener?: ((this: PushChannel, ev: PushEventMap[K]) => any) | EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions): void {\r\n        this.eventTarget.addEventListener(type, listener, options);\r\n    }\r\n\r\n    /**\r\n     * Remove an event listener\r\n     * @param type     Event type\r\n     * @param listener Listener\r\n     * @param options  Options\r\n     */\r\n    removeEventListener<K extends keyof PushEventMap>(type: K, listener?: ((this: PushChannel, ev: PushEventMap[K]) => any) | EventListenerOrEventListenerObject, options?: boolean | EventListenerOptions): void {\r\n        this.eventTarget.removeEventListener(type, listener, options);\r\n    }\r\n\r\n    /**\r\n     * Ping the channel\r\n     */\r\n    ping(): void {\r\n        this.transport.ping();\r\n    }\r\n\r\n    /**\r\n     * Callback triggered when the connection is established\r\n     */\r\n    private onConnection(): void {\r\n        let connectedEventDetail: ConnectedEventDetail = {};\r\n        let connectedEvent: ConnectedEvent = new CustomEvent('connected', {detail: connectedEventDetail});\r\n        this.emitEvent(connectedEvent);\r\n    }\r\n\r\n    /**\r\n     * Callback triggered when the connection is closed\r\n     * @param reasonId         Reason identifier\r\n     * @param reasonParameters Reason parameters\r\n     */\r\n    private onDisconnection(reasonId: string, reasonParameters: Map<string, string>): void {\r\n        let disconnectedEventDetail: DisconnectedEventDetail = {\r\n            reasonId: reasonId,\r\n            reasonParameters: reasonParameters\r\n        };\r\n        let disconnectedEvent: DisconnectedEvent = new CustomEvent('disconnected', {detail: disconnectedEventDetail});\r\n        this.emitEvent(disconnectedEvent);\r\n    }\r\n\r\n    /**\r\n     * Callback triggered when a message is received\r\n     * @param mediaType Media type\r\n     * @param content   Content\r\n     */\r\n    private onMessage<T>(mediaType: string, content: T): void {\r\n        let pushMessageEventDetail: PushMessageEventDetail<T> = {\r\n            mediaType: mediaType,\r\n            content: content\r\n        };\r\n        let pushMessageEvent: PushMessageEvent<T> = new CustomEvent('message', {detail: pushMessageEventDetail});\r\n        this.emitEvent(pushMessageEvent);\r\n    }\r\n\r\n    /**\r\n     * Emit an event\r\n     * @param ev Push event\r\n     */\r\n    private emitEvent<T extends PushEventDetail>(ev: PushEvent<T>): void {\r\n        if (this.muteBuffer) {\r\n            if (!this.muteDiscard) {\r\n                this.muteBuffer.push(ev);\r\n            }\r\n        } else {\r\n            this.eventTarget.dispatchEvent(ev);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport {\r\n    PushChannelImpl\r\n};\r\n","import { Push } from './Push';\r\nimport { PushChannel } from './PushChannel';\r\nimport { PushChannelImpl } from './PushChannelImpl';\r\nimport { PushSettings } from './PushSettings';\r\n\r\n/**\r\n * Push implementation\r\n */\r\nclass PushImpl implements Push {\r\n\r\n    /**\r\n     * Create a push channel\r\n     * @param settings Settings\r\n     * @return Promise that resolves to a push channel\r\n     */\r\n    async createChannel(settings: PushSettings): Promise<PushChannel> {\r\n        return new PushChannelImpl(settings);\r\n    }\r\n\r\n}\r\n\r\nexport {\r\n    PushImpl\r\n};\r\n","import { Push } from './Push';\r\nimport { PushImpl } from './PushImpl';\r\n\r\n/**\r\n * Initialize the push library\r\n * @return Push library instance\r\n */\r\nasync function initializePush(): Promise<Push> {\r\n    return new PushImpl();\r\n}\r\n\r\nexport {\r\n    initializePush\r\n};\r\n","export { initializePush } from './initializePush';\r\nexport { Push } from './Push';\r\nexport { PushChannel } from './PushChannel';\r\nexport { PushSettings } from './PushSettings';\r\nexport { PushTransportMechanism } from './transport';\r\n","export { initializePush, Push, PushChannel, PushSettings, PushTransportMechanism } from './push';\r\n"],"sourceRoot":""}